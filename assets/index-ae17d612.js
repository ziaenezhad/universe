var s0=Object.defineProperty;var o0=(t,e,r)=>e in t?s0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Md=(t,e,r)=>(o0(t,typeof e!="symbol"?e+"":e,r),r);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function gc(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function a0(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var i=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return t[n]}})}),r}var gm={exports:{}},Qa={},ym={exports:{}},J={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ws=Symbol.for("react.element"),l0=Symbol.for("react.portal"),u0=Symbol.for("react.fragment"),h0=Symbol.for("react.strict_mode"),c0=Symbol.for("react.profiler"),d0=Symbol.for("react.provider"),f0=Symbol.for("react.context"),p0=Symbol.for("react.forward_ref"),m0=Symbol.for("react.suspense"),g0=Symbol.for("react.memo"),y0=Symbol.for("react.lazy"),Dd=Symbol.iterator;function v0(t){return t===null||typeof t!="object"?null:(t=Dd&&t[Dd]||t["@@iterator"],typeof t=="function"?t:null)}var vm={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},_m=Object.assign,xm={};function Bi(t,e,r){this.props=t,this.context=e,this.refs=xm,this.updater=r||vm}Bi.prototype.isReactComponent={};Bi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Bi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function wm(){}wm.prototype=Bi.prototype;function yc(t,e,r){this.props=t,this.context=e,this.refs=xm,this.updater=r||vm}var vc=yc.prototype=new wm;vc.constructor=yc;_m(vc,Bi.prototype);vc.isPureReactComponent=!0;var kd=Array.isArray,Em=Object.prototype.hasOwnProperty,_c={current:null},Tm={key:!0,ref:!0,__self:!0,__source:!0};function Sm(t,e,r){var n,i={},s=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Em.call(e,n)&&!Tm.hasOwnProperty(n)&&(i[n]=e[n]);var a=arguments.length-2;if(a===1)i.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];i.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)i[n]===void 0&&(i[n]=a[n]);return{$$typeof:Ws,type:t,key:s,ref:o,props:i,_owner:_c.current}}function _0(t,e){return{$$typeof:Ws,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xc(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ws}function x0(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Bd=/\/+/g;function Pl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?x0(""+t.key):e.toString(36)}function Xo(t,e,r,n,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ws:case l0:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+Pl(o,0):n,kd(i)?(r="",t!=null&&(r=t.replace(Bd,"$&/")+"/"),Xo(i,e,r,"",function(u){return u})):i!=null&&(xc(i)&&(i=_0(i,r+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Bd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",kd(t))for(var a=0;a<t.length;a++){s=t[a];var l=n+Pl(s,a);o+=Xo(s,e,r,l,i)}else if(l=v0(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=n+Pl(s,a++),o+=Xo(s,e,r,l,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function io(t,e,r){if(t==null)return t;var n=[],i=0;return Xo(t,n,"","",function(s){return e.call(r,s,i++)}),n}function w0(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var et={current:null},Wo={transition:null},E0={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Wo,ReactCurrentOwner:_c};J.Children={map:io,forEach:function(t,e,r){io(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return io(t,function(){e++}),e},toArray:function(t){return io(t,function(e){return e})||[]},only:function(t){if(!xc(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};J.Component=Bi;J.Fragment=u0;J.Profiler=c0;J.PureComponent=yc;J.StrictMode=h0;J.Suspense=m0;J.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=E0;J.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=_m({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=_c.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)Em.call(e,l)&&!Tm.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:Ws,type:t.type,key:i,ref:s,props:n,_owner:o}};J.createContext=function(t){return t={$$typeof:f0,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:d0,_context:t},t.Consumer=t};J.createElement=Sm;J.createFactory=function(t){var e=Sm.bind(null,t);return e.type=t,e};J.createRef=function(){return{current:null}};J.forwardRef=function(t){return{$$typeof:p0,render:t}};J.isValidElement=xc;J.lazy=function(t){return{$$typeof:y0,_payload:{_status:-1,_result:t},_init:w0}};J.memo=function(t,e){return{$$typeof:g0,type:t,compare:e===void 0?null:e}};J.startTransition=function(t){var e=Wo.transition;Wo.transition={};try{t()}finally{Wo.transition=e}};J.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};J.useCallback=function(t,e){return et.current.useCallback(t,e)};J.useContext=function(t){return et.current.useContext(t)};J.useDebugValue=function(){};J.useDeferredValue=function(t){return et.current.useDeferredValue(t)};J.useEffect=function(t,e){return et.current.useEffect(t,e)};J.useId=function(){return et.current.useId()};J.useImperativeHandle=function(t,e,r){return et.current.useImperativeHandle(t,e,r)};J.useInsertionEffect=function(t,e){return et.current.useInsertionEffect(t,e)};J.useLayoutEffect=function(t,e){return et.current.useLayoutEffect(t,e)};J.useMemo=function(t,e){return et.current.useMemo(t,e)};J.useReducer=function(t,e,r){return et.current.useReducer(t,e,r)};J.useRef=function(t){return et.current.useRef(t)};J.useState=function(t){return et.current.useState(t)};J.useSyncExternalStore=function(t,e,r){return et.current.useSyncExternalStore(t,e,r)};J.useTransition=function(){return et.current.useTransition()};J.version="18.2.0";ym.exports=J;var Za=ym.exports;const T0=gc(Za);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S0=Za,A0=Symbol.for("react.element"),C0=Symbol.for("react.fragment"),b0=Object.prototype.hasOwnProperty,I0=S0.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,P0={key:!0,ref:!0,__self:!0,__source:!0};function Am(t,e,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)b0.call(e,n)&&!P0.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:A0,type:t,key:s,ref:o,props:i,_owner:I0.current}}Qa.Fragment=C0;Qa.jsx=Am;Qa.jsxs=Am;gm.exports=Qa;var Yn=gm.exports,Lu={},Cm={exports:{}},mt={},bm={exports:{}},Im={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,G){var A=P.length;P.push(G);e:for(;0<A;){var L=A-1>>>1,V=P[L];if(0<i(V,G))P[L]=G,P[A]=V,A=L;else break e}}function r(P){return P.length===0?null:P[0]}function n(P){if(P.length===0)return null;var G=P[0],A=P.pop();if(A!==G){P[0]=A;e:for(var L=0,V=P.length,te=V>>>1;L<te;){var ee=2*(L+1)-1,xe=P[ee],se=ee+1,fe=P[se];if(0>i(xe,A))se<V&&0>i(fe,xe)?(P[L]=fe,P[se]=A,L=se):(P[L]=xe,P[ee]=A,L=ee);else if(se<V&&0>i(fe,A))P[L]=fe,P[se]=A,L=se;else break e}}return G}function i(P,G){var A=P.sortIndex-G.sortIndex;return A!==0?A:P.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],h=1,c=null,d=3,f=!1,p=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function m(P){for(var G=r(u);G!==null;){if(G.callback===null)n(u);else if(G.startTime<=P)n(u),G.sortIndex=G.expirationTime,e(l,G);else break;G=r(u)}}function _(P){if(v=!1,m(P),!p)if(r(l)!==null)p=!0,Y(w);else{var G=r(u);G!==null&&O(_,G.startTime-P)}}function w(P,G){p=!1,v&&(v=!1,y(E),E=-1),f=!0;var A=d;try{for(m(G),c=r(l);c!==null&&(!(c.expirationTime>G)||P&&!M());){var L=c.callback;if(typeof L=="function"){c.callback=null,d=c.priorityLevel;var V=L(c.expirationTime<=G);G=t.unstable_now(),typeof V=="function"?c.callback=V:c===r(l)&&n(l),m(G)}else n(l);c=r(l)}if(c!==null)var te=!0;else{var ee=r(u);ee!==null&&O(_,ee.startTime-G),te=!1}return te}finally{c=null,d=A,f=!1}}var S=!1,T=null,E=-1,D=5,I=-1;function M(){return!(t.unstable_now()-I<D)}function B(){if(T!==null){var P=t.unstable_now();I=P;var G=!0;try{G=T(!0,P)}finally{G?b():(S=!1,T=null)}}else S=!1}var b;if(typeof g=="function")b=function(){g(B)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,W=C.port2;C.port1.onmessage=B,b=function(){W.postMessage(null)}}else b=function(){x(B,0)};function Y(P){T=P,S||(S=!0,b())}function O(P,G){E=x(function(){P(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,Y(w))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(P){switch(d){case 1:case 2:case 3:var G=3;break;default:G=d}var A=d;d=G;try{return P()}finally{d=A}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,G){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var A=d;d=P;try{return G()}finally{d=A}},t.unstable_scheduleCallback=function(P,G,A){var L=t.unstable_now();switch(typeof A=="object"&&A!==null?(A=A.delay,A=typeof A=="number"&&0<A?L+A:L):A=L,P){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=A+V,P={id:h++,callback:G,priorityLevel:P,startTime:A,expirationTime:V,sortIndex:-1},A>L?(P.sortIndex=A,e(u,P),r(l)===null&&P===r(u)&&(v?(y(E),E=-1):v=!0,O(_,A-L))):(P.sortIndex=V,e(l,P),p||f||(p=!0,Y(w))),P},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(P){var G=d;return function(){var A=d;d=G;try{return P.apply(this,arguments)}finally{d=A}}}})(Im);bm.exports=Im;var R0=bm.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm=Za,pt=R0;function R(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Rm=new Set,Ss={};function Dn(t,e){Ei(t,e),Ei(t+"Capture",e)}function Ei(t,e){for(Ss[t]=e,t=0;t<e.length;t++)Rm.add(e[t])}var wr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Uu=Object.prototype.hasOwnProperty,M0=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Nd={},Fd={};function D0(t){return Uu.call(Fd,t)?!0:Uu.call(Nd,t)?!1:M0.test(t)?Fd[t]=!0:(Nd[t]=!0,!1)}function k0(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function B0(t,e,r,n){if(e===null||typeof e>"u"||k0(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function tt(t,e,r,n,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var He={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){He[t]=new tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];He[e]=new tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){He[t]=new tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){He[t]=new tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){He[t]=new tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){He[t]=new tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){He[t]=new tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){He[t]=new tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){He[t]=new tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var wc=/[\-:]([a-z])/g;function Ec(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wc,Ec);He[e]=new tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wc,Ec);He[e]=new tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wc,Ec);He[e]=new tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){He[t]=new tt(t,1,!1,t.toLowerCase(),null,!1,!1)});He.xlinkHref=new tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){He[t]=new tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tc(t,e,r,n){var i=He.hasOwnProperty(e)?He[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(B0(e,r,i,n)&&(r=null),n||i===null?D0(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):i.mustUseProperty?t[i.propertyName]=r===null?i.type===3?!1:"":r:(e=i.attributeName,n=i.attributeNamespace,r===null?t.removeAttribute(e):(i=i.type,r=i===3||i===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Cr=Pm.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,so=Symbol.for("react.element"),Kn=Symbol.for("react.portal"),qn=Symbol.for("react.fragment"),Sc=Symbol.for("react.strict_mode"),Gu=Symbol.for("react.profiler"),Mm=Symbol.for("react.provider"),Dm=Symbol.for("react.context"),Ac=Symbol.for("react.forward_ref"),zu=Symbol.for("react.suspense"),Hu=Symbol.for("react.suspense_list"),Cc=Symbol.for("react.memo"),Rr=Symbol.for("react.lazy"),km=Symbol.for("react.offscreen"),Od=Symbol.iterator;function zi(t){return t===null||typeof t!="object"?null:(t=Od&&t[Od]||t["@@iterator"],typeof t=="function"?t:null)}var ve=Object.assign,Rl;function ts(t){if(Rl===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);Rl=e&&e[1]||""}return`
`+Rl+t}var Ml=!1;function Dl(t,e){if(!t||Ml)return"";Ml=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=n.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var l=`
`+i[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Ml=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ts(t):""}function N0(t){switch(t.tag){case 5:return ts(t.type);case 16:return ts("Lazy");case 13:return ts("Suspense");case 19:return ts("SuspenseList");case 0:case 2:case 15:return t=Dl(t.type,!1),t;case 11:return t=Dl(t.type.render,!1),t;case 1:return t=Dl(t.type,!0),t;default:return""}}function $u(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case qn:return"Fragment";case Kn:return"Portal";case Gu:return"Profiler";case Sc:return"StrictMode";case zu:return"Suspense";case Hu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Dm:return(t.displayName||"Context")+".Consumer";case Mm:return(t._context.displayName||"Context")+".Provider";case Ac:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Cc:return e=t.displayName||null,e!==null?e:$u(t.type)||"Memo";case Rr:e=t._payload,t=t._init;try{return $u(t(e))}catch{}}return null}function F0(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $u(e);case 8:return e===Sc?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Bm(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function O0(t){var e=Bm(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var i=r.get,s=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function oo(t){t._valueTracker||(t._valueTracker=O0(t))}function Nm(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=Bm(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function ca(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Vu(t,e){var r=e.checked;return ve({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Ld(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=qr(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fm(t,e){e=e.checked,e!=null&&Tc(t,"checked",e,!1)}function ju(t,e){Fm(t,e);var r=qr(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Xu(t,e.type,r):e.hasOwnProperty("defaultValue")&&Xu(t,e.type,qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ud(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function Xu(t,e,r){(e!=="number"||ca(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var rs=Array.isArray;function ui(t,e,r,n){if(t=t.options,e){e={};for(var i=0;i<r.length;i++)e["$"+r[i]]=!0;for(r=0;r<t.length;r++)i=e.hasOwnProperty("$"+t[r].value),t[r].selected!==i&&(t[r].selected=i),i&&n&&(t[r].defaultSelected=!0)}else{for(r=""+qr(r),e=null,i=0;i<t.length;i++){if(t[i].value===r){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Wu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(R(91));return ve({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Gd(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(R(92));if(rs(r)){if(1<r.length)throw Error(R(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:qr(r)}}function Om(t,e){var r=qr(e.value),n=qr(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function zd(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Lm(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Yu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Lm(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ao,Um=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ao=ao||document.createElement("div"),ao.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ao.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function As(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},L0=["Webkit","ms","Moz","O"];Object.keys(hs).forEach(function(t){L0.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),hs[e]=hs[t]})});function Gm(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||hs.hasOwnProperty(t)&&hs[t]?(""+e).trim():e+"px"}function zm(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,i=Gm(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,i):t[r]=i}}var U0=ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ku(t,e){if(e){if(U0[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(R(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(R(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(R(61))}if(e.style!=null&&typeof e.style!="object")throw Error(R(62))}}function qu(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Qu=null;function bc(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Zu=null,hi=null,ci=null;function Hd(t){if(t=qs(t)){if(typeof Zu!="function")throw Error(R(280));var e=t.stateNode;e&&(e=nl(e),Zu(t.stateNode,t.type,e))}}function Hm(t){hi?ci?ci.push(t):ci=[t]:hi=t}function $m(){if(hi){var t=hi,e=ci;if(ci=hi=null,Hd(t),e)for(t=0;t<e.length;t++)Hd(e[t])}}function Vm(t,e){return t(e)}function jm(){}var kl=!1;function Xm(t,e,r){if(kl)return t(e,r);kl=!0;try{return Vm(t,e,r)}finally{kl=!1,(hi!==null||ci!==null)&&(jm(),$m())}}function Cs(t,e){var r=t.stateNode;if(r===null)return null;var n=nl(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(R(231,e,typeof r));return r}var Ju=!1;if(wr)try{var Hi={};Object.defineProperty(Hi,"passive",{get:function(){Ju=!0}}),window.addEventListener("test",Hi,Hi),window.removeEventListener("test",Hi,Hi)}catch{Ju=!1}function G0(t,e,r,n,i,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(h){this.onError(h)}}var cs=!1,da=null,fa=!1,eh=null,z0={onError:function(t){cs=!0,da=t}};function H0(t,e,r,n,i,s,o,a,l){cs=!1,da=null,G0.apply(z0,arguments)}function $0(t,e,r,n,i,s,o,a,l){if(H0.apply(this,arguments),cs){if(cs){var u=da;cs=!1,da=null}else throw Error(R(198));fa||(fa=!0,eh=u)}}function kn(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function Wm(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function $d(t){if(kn(t)!==t)throw Error(R(188))}function V0(t){var e=t.alternate;if(!e){if(e=kn(t),e===null)throw Error(R(188));return e!==t?null:t}for(var r=t,n=e;;){var i=r.return;if(i===null)break;var s=i.alternate;if(s===null){if(n=i.return,n!==null){r=n;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===r)return $d(i),t;if(s===n)return $d(i),e;s=s.sibling}throw Error(R(188))}if(r.return!==n.return)r=i,n=s;else{for(var o=!1,a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o)throw Error(R(189))}}if(r.alternate!==n)throw Error(R(190))}if(r.tag!==3)throw Error(R(188));return r.stateNode.current===r?t:e}function Ym(t){return t=V0(t),t!==null?Km(t):null}function Km(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Km(t);if(e!==null)return e;t=t.sibling}return null}var qm=pt.unstable_scheduleCallback,Vd=pt.unstable_cancelCallback,j0=pt.unstable_shouldYield,X0=pt.unstable_requestPaint,Te=pt.unstable_now,W0=pt.unstable_getCurrentPriorityLevel,Ic=pt.unstable_ImmediatePriority,Qm=pt.unstable_UserBlockingPriority,pa=pt.unstable_NormalPriority,Y0=pt.unstable_LowPriority,Zm=pt.unstable_IdlePriority,Ja=null,nr=null;function K0(t){if(nr&&typeof nr.onCommitFiberRoot=="function")try{nr.onCommitFiberRoot(Ja,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:Z0,q0=Math.log,Q0=Math.LN2;function Z0(t){return t>>>=0,t===0?32:31-(q0(t)/Q0|0)|0}var lo=64,uo=4194304;function ns(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ma(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,i=t.suspendedLanes,s=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~i;a!==0?n=ns(a):(s&=o,s!==0&&(n=ns(s)))}else o=r&~i,o!==0?n=ns(o):s!==0&&(n=ns(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-Ut(e),i=1<<r,n|=t[r],e&=~i;return n}function J0(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function e_(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ut(s),a=1<<o,l=i[o];l===-1?(!(a&r)||a&n)&&(i[o]=J0(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function th(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jm(){var t=lo;return lo<<=1,!(lo&4194240)&&(lo=64),t}function Bl(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function Ys(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=r}function t_(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var i=31-Ut(r),s=1<<i;e[i]=0,n[i]=-1,t[i]=-1,r&=~s}}function Pc(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-Ut(r),i=1<<n;i&e|t[n]&e&&(t[n]|=e),r&=~i}}var ie=0;function eg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tg,Rc,rg,ng,ig,rh=!1,ho=[],zr=null,Hr=null,$r=null,bs=new Map,Is=new Map,kr=[],r_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jd(t,e){switch(t){case"focusin":case"focusout":zr=null;break;case"dragenter":case"dragleave":Hr=null;break;case"mouseover":case"mouseout":$r=null;break;case"pointerover":case"pointerout":bs.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Is.delete(e.pointerId)}}function $i(t,e,r,n,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qs(e),e!==null&&Rc(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function n_(t,e,r,n,i){switch(e){case"focusin":return zr=$i(zr,t,e,r,n,i),!0;case"dragenter":return Hr=$i(Hr,t,e,r,n,i),!0;case"mouseover":return $r=$i($r,t,e,r,n,i),!0;case"pointerover":var s=i.pointerId;return bs.set(s,$i(bs.get(s)||null,t,e,r,n,i)),!0;case"gotpointercapture":return s=i.pointerId,Is.set(s,$i(Is.get(s)||null,t,e,r,n,i)),!0}return!1}function sg(t){var e=mn(t.target);if(e!==null){var r=kn(e);if(r!==null){if(e=r.tag,e===13){if(e=Wm(r),e!==null){t.blockedOn=e,ig(t.priority,function(){rg(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=nh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Qu=n,r.target.dispatchEvent(n),Qu=null}else return e=qs(r),e!==null&&Rc(e),t.blockedOn=r,!1;e.shift()}return!0}function Xd(t,e,r){Yo(t)&&r.delete(e)}function i_(){rh=!1,zr!==null&&Yo(zr)&&(zr=null),Hr!==null&&Yo(Hr)&&(Hr=null),$r!==null&&Yo($r)&&($r=null),bs.forEach(Xd),Is.forEach(Xd)}function Vi(t,e){t.blockedOn===e&&(t.blockedOn=null,rh||(rh=!0,pt.unstable_scheduleCallback(pt.unstable_NormalPriority,i_)))}function Ps(t){function e(i){return Vi(i,t)}if(0<ho.length){Vi(ho[0],t);for(var r=1;r<ho.length;r++){var n=ho[r];n.blockedOn===t&&(n.blockedOn=null)}}for(zr!==null&&Vi(zr,t),Hr!==null&&Vi(Hr,t),$r!==null&&Vi($r,t),bs.forEach(e),Is.forEach(e),r=0;r<kr.length;r++)n=kr[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<kr.length&&(r=kr[0],r.blockedOn===null);)sg(r),r.blockedOn===null&&kr.shift()}var di=Cr.ReactCurrentBatchConfig,ga=!0;function s_(t,e,r,n){var i=ie,s=di.transition;di.transition=null;try{ie=1,Mc(t,e,r,n)}finally{ie=i,di.transition=s}}function o_(t,e,r,n){var i=ie,s=di.transition;di.transition=null;try{ie=4,Mc(t,e,r,n)}finally{ie=i,di.transition=s}}function Mc(t,e,r,n){if(ga){var i=nh(t,e,r,n);if(i===null)Vl(t,e,n,ya,r),jd(t,n);else if(n_(i,t,e,r,n))n.stopPropagation();else if(jd(t,n),e&4&&-1<r_.indexOf(t)){for(;i!==null;){var s=qs(i);if(s!==null&&tg(s),s=nh(t,e,r,n),s===null&&Vl(t,e,n,ya,r),s===i)break;i=s}i!==null&&n.stopPropagation()}else Vl(t,e,n,null,r)}}var ya=null;function nh(t,e,r,n){if(ya=null,t=bc(n),t=mn(t),t!==null)if(e=kn(t),e===null)t=null;else if(r=e.tag,r===13){if(t=Wm(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ya=t,null}function og(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(W0()){case Ic:return 1;case Qm:return 4;case pa:case Y0:return 16;case Zm:return 536870912;default:return 16}default:return 16}}var Fr=null,Dc=null,Ko=null;function ag(){if(Ko)return Ko;var t,e=Dc,r=e.length,n,i="value"in Fr?Fr.value:Fr.textContent,s=i.length;for(t=0;t<r&&e[t]===i[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===i[s-n];n++);return Ko=i.slice(t,1<n?1-n:void 0)}function qo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function co(){return!0}function Wd(){return!1}function gt(t){function e(r,n,i,s,o){this._reactName=r,this._targetInst=i,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?co:Wd,this.isPropagationStopped=Wd,this}return ve(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=co)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=co)},persist:function(){},isPersistent:co}),e}var Ni={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},kc=gt(Ni),Ks=ve({},Ni,{view:0,detail:0}),a_=gt(Ks),Nl,Fl,ji,el=ve({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bc,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ji&&(ji&&t.type==="mousemove"?(Nl=t.screenX-ji.screenX,Fl=t.screenY-ji.screenY):Fl=Nl=0,ji=t),Nl)},movementY:function(t){return"movementY"in t?t.movementY:Fl}}),Yd=gt(el),l_=ve({},el,{dataTransfer:0}),u_=gt(l_),h_=ve({},Ks,{relatedTarget:0}),Ol=gt(h_),c_=ve({},Ni,{animationName:0,elapsedTime:0,pseudoElement:0}),d_=gt(c_),f_=ve({},Ni,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),p_=gt(f_),m_=ve({},Ni,{data:0}),Kd=gt(m_),g_={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y_={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},v_={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function __(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=v_[t])?!!e[t]:!1}function Bc(){return __}var x_=ve({},Ks,{key:function(t){if(t.key){var e=g_[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=qo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?y_[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bc,charCode:function(t){return t.type==="keypress"?qo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?qo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),w_=gt(x_),E_=ve({},el,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qd=gt(E_),T_=ve({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bc}),S_=gt(T_),A_=ve({},Ni,{propertyName:0,elapsedTime:0,pseudoElement:0}),C_=gt(A_),b_=ve({},el,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),I_=gt(b_),P_=[9,13,27,32],Nc=wr&&"CompositionEvent"in window,ds=null;wr&&"documentMode"in document&&(ds=document.documentMode);var R_=wr&&"TextEvent"in window&&!ds,lg=wr&&(!Nc||ds&&8<ds&&11>=ds),Qd=String.fromCharCode(32),Zd=!1;function ug(t,e){switch(t){case"keyup":return P_.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function hg(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Qn=!1;function M_(t,e){switch(t){case"compositionend":return hg(e);case"keypress":return e.which!==32?null:(Zd=!0,Qd);case"textInput":return t=e.data,t===Qd&&Zd?null:t;default:return null}}function D_(t,e){if(Qn)return t==="compositionend"||!Nc&&ug(t,e)?(t=ag(),Ko=Dc=Fr=null,Qn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lg&&e.locale!=="ko"?null:e.data;default:return null}}var k_={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!k_[t.type]:e==="textarea"}function cg(t,e,r,n){Hm(n),e=va(e,"onChange"),0<e.length&&(r=new kc("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var fs=null,Rs=null;function B_(t){Eg(t,0)}function tl(t){var e=ei(t);if(Nm(e))return t}function N_(t,e){if(t==="change")return e}var dg=!1;if(wr){var Ll;if(wr){var Ul="oninput"in document;if(!Ul){var ef=document.createElement("div");ef.setAttribute("oninput","return;"),Ul=typeof ef.oninput=="function"}Ll=Ul}else Ll=!1;dg=Ll&&(!document.documentMode||9<document.documentMode)}function tf(){fs&&(fs.detachEvent("onpropertychange",fg),Rs=fs=null)}function fg(t){if(t.propertyName==="value"&&tl(Rs)){var e=[];cg(e,Rs,t,bc(t)),Xm(B_,e)}}function F_(t,e,r){t==="focusin"?(tf(),fs=e,Rs=r,fs.attachEvent("onpropertychange",fg)):t==="focusout"&&tf()}function O_(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tl(Rs)}function L_(t,e){if(t==="click")return tl(e)}function U_(t,e){if(t==="input"||t==="change")return tl(e)}function G_(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Vt=typeof Object.is=="function"?Object.is:G_;function Ms(t,e){if(Vt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var i=r[n];if(!Uu.call(e,i)||!Vt(t[i],e[i]))return!1}return!0}function rf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nf(t,e){var r=rf(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=rf(r)}}function pg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mg(){for(var t=window,e=ca();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=ca(t.document)}return e}function Fc(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function z_(t){var e=mg(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&pg(r.ownerDocument.documentElement,r)){if(n!==null&&Fc(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=r.textContent.length,s=Math.min(n.start,i);n=n.end===void 0?s:Math.min(n.end,i),!t.extend&&s>n&&(i=n,n=s,s=i),i=nf(r,s);var o=nf(r,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var H_=wr&&"documentMode"in document&&11>=document.documentMode,Zn=null,ih=null,ps=null,sh=!1;function sf(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;sh||Zn==null||Zn!==ca(n)||(n=Zn,"selectionStart"in n&&Fc(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),ps&&Ms(ps,n)||(ps=n,n=va(ih,"onSelect"),0<n.length&&(e=new kc("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=Zn)))}function fo(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var Jn={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionend:fo("Transition","TransitionEnd")},Gl={},gg={};wr&&(gg=document.createElement("div").style,"AnimationEvent"in window||(delete Jn.animationend.animation,delete Jn.animationiteration.animation,delete Jn.animationstart.animation),"TransitionEvent"in window||delete Jn.transitionend.transition);function rl(t){if(Gl[t])return Gl[t];if(!Jn[t])return t;var e=Jn[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in gg)return Gl[t]=e[r];return t}var yg=rl("animationend"),vg=rl("animationiteration"),_g=rl("animationstart"),xg=rl("transitionend"),wg=new Map,of="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function tn(t,e){wg.set(t,e),Dn(e,[t])}for(var zl=0;zl<of.length;zl++){var Hl=of[zl],$_=Hl.toLowerCase(),V_=Hl[0].toUpperCase()+Hl.slice(1);tn($_,"on"+V_)}tn(yg,"onAnimationEnd");tn(vg,"onAnimationIteration");tn(_g,"onAnimationStart");tn("dblclick","onDoubleClick");tn("focusin","onFocus");tn("focusout","onBlur");tn(xg,"onTransitionEnd");Ei("onMouseEnter",["mouseout","mouseover"]);Ei("onMouseLeave",["mouseout","mouseover"]);Ei("onPointerEnter",["pointerout","pointerover"]);Ei("onPointerLeave",["pointerout","pointerover"]);Dn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Dn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Dn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Dn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Dn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var is="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),j_=new Set("cancel close invalid load scroll toggle".split(" ").concat(is));function af(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,$0(n,e,void 0,t),t.currentTarget=null}function Eg(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],i=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&i.isPropagationStopped())break e;af(i,a,u),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&i.isPropagationStopped())break e;af(i,a,u),s=l}}}if(fa)throw t=eh,fa=!1,eh=null,t}function le(t,e){var r=e[hh];r===void 0&&(r=e[hh]=new Set);var n=t+"__bubble";r.has(n)||(Tg(e,t,2,!1),r.add(n))}function $l(t,e,r){var n=0;e&&(n|=4),Tg(r,t,n,e)}var po="_reactListening"+Math.random().toString(36).slice(2);function Ds(t){if(!t[po]){t[po]=!0,Rm.forEach(function(r){r!=="selectionchange"&&(j_.has(r)||$l(r,!1,t),$l(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[po]||(e[po]=!0,$l("selectionchange",!1,e))}}function Tg(t,e,r,n){switch(og(e)){case 1:var i=s_;break;case 4:i=o_;break;default:i=Mc}r=i.bind(null,e,r,t),i=void 0,!Ju||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,r,{capture:!0,passive:i}):t.addEventListener(e,r,!0):i!==void 0?t.addEventListener(e,r,{passive:i}):t.addEventListener(e,r,!1)}function Vl(t,e,r,n,i){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;o=o.return}for(;a!==null;){if(o=mn(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue e}a=a.parentNode}}n=n.return}Xm(function(){var u=s,h=bc(r),c=[];e:{var d=wg.get(t);if(d!==void 0){var f=kc,p=t;switch(t){case"keypress":if(qo(r)===0)break e;case"keydown":case"keyup":f=w_;break;case"focusin":p="focus",f=Ol;break;case"focusout":p="blur",f=Ol;break;case"beforeblur":case"afterblur":f=Ol;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Yd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=u_;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=S_;break;case yg:case vg:case _g:f=d_;break;case xg:f=C_;break;case"scroll":f=a_;break;case"wheel":f=I_;break;case"copy":case"cut":case"paste":f=p_;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=qd}var v=(e&4)!==0,x=!v&&t==="scroll",y=v?d!==null?d+"Capture":null:d;v=[];for(var g=u,m;g!==null;){m=g;var _=m.stateNode;if(m.tag===5&&_!==null&&(m=_,y!==null&&(_=Cs(g,y),_!=null&&v.push(ks(g,_,m)))),x)break;g=g.return}0<v.length&&(d=new f(d,p,null,r,h),c.push({event:d,listeners:v}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&r!==Qu&&(p=r.relatedTarget||r.fromElement)&&(mn(p)||p[Er]))break e;if((f||d)&&(d=h.window===h?h:(d=h.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=r.relatedTarget||r.toElement,f=u,p=p?mn(p):null,p!==null&&(x=kn(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(v=Yd,_="onMouseLeave",y="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=qd,_="onPointerLeave",y="onPointerEnter",g="pointer"),x=f==null?d:ei(f),m=p==null?d:ei(p),d=new v(_,g+"leave",f,r,h),d.target=x,d.relatedTarget=m,_=null,mn(h)===u&&(v=new v(y,g+"enter",p,r,h),v.target=m,v.relatedTarget=x,_=v),x=_,f&&p)t:{for(v=f,y=p,g=0,m=v;m;m=On(m))g++;for(m=0,_=y;_;_=On(_))m++;for(;0<g-m;)v=On(v),g--;for(;0<m-g;)y=On(y),m--;for(;g--;){if(v===y||y!==null&&v===y.alternate)break t;v=On(v),y=On(y)}v=null}else v=null;f!==null&&lf(c,d,f,v,!1),p!==null&&x!==null&&lf(c,x,p,v,!0)}}e:{if(d=u?ei(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var w=N_;else if(Jd(d))if(dg)w=U_;else{w=O_;var S=F_}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(w=L_);if(w&&(w=w(t,u))){cg(c,w,r,h);break e}S&&S(t,d,u),t==="focusout"&&(S=d._wrapperState)&&S.controlled&&d.type==="number"&&Xu(d,"number",d.value)}switch(S=u?ei(u):window,t){case"focusin":(Jd(S)||S.contentEditable==="true")&&(Zn=S,ih=u,ps=null);break;case"focusout":ps=ih=Zn=null;break;case"mousedown":sh=!0;break;case"contextmenu":case"mouseup":case"dragend":sh=!1,sf(c,r,h);break;case"selectionchange":if(H_)break;case"keydown":case"keyup":sf(c,r,h)}var T;if(Nc)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Qn?ug(t,r)&&(E="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(E="onCompositionStart");E&&(lg&&r.locale!=="ko"&&(Qn||E!=="onCompositionStart"?E==="onCompositionEnd"&&Qn&&(T=ag()):(Fr=h,Dc="value"in Fr?Fr.value:Fr.textContent,Qn=!0)),S=va(u,E),0<S.length&&(E=new Kd(E,t,null,r,h),c.push({event:E,listeners:S}),T?E.data=T:(T=hg(r),T!==null&&(E.data=T)))),(T=R_?M_(t,r):D_(t,r))&&(u=va(u,"onBeforeInput"),0<u.length&&(h=new Kd("onBeforeInput","beforeinput",null,r,h),c.push({event:h,listeners:u}),h.data=T))}Eg(c,e)})}function ks(t,e,r){return{instance:t,listener:e,currentTarget:r}}function va(t,e){for(var r=e+"Capture",n=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Cs(t,r),s!=null&&n.unshift(ks(t,s,i)),s=Cs(t,e),s!=null&&n.push(ks(t,s,i))),t=t.return}return n}function On(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function lf(t,e,r,n,i){for(var s=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,i?(l=Cs(r,s),l!=null&&o.unshift(ks(r,l,a))):i||(l=Cs(r,s),l!=null&&o.push(ks(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var X_=/\r\n?/g,W_=/\u0000|\uFFFD/g;function uf(t){return(typeof t=="string"?t:""+t).replace(X_,`
`).replace(W_,"")}function mo(t,e,r){if(e=uf(e),uf(t)!==e&&r)throw Error(R(425))}function _a(){}var oh=null,ah=null;function lh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uh=typeof setTimeout=="function"?setTimeout:void 0,Y_=typeof clearTimeout=="function"?clearTimeout:void 0,hf=typeof Promise=="function"?Promise:void 0,K_=typeof queueMicrotask=="function"?queueMicrotask:typeof hf<"u"?function(t){return hf.resolve(null).then(t).catch(q_)}:uh;function q_(t){setTimeout(function(){throw t})}function jl(t,e){var r=e,n=0;do{var i=r.nextSibling;if(t.removeChild(r),i&&i.nodeType===8)if(r=i.data,r==="/$"){if(n===0){t.removeChild(i),Ps(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=i}while(r);Ps(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function cf(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var Fi=Math.random().toString(36).slice(2),tr="__reactFiber$"+Fi,Bs="__reactProps$"+Fi,Er="__reactContainer$"+Fi,hh="__reactEvents$"+Fi,Q_="__reactListeners$"+Fi,Z_="__reactHandles$"+Fi;function mn(t){var e=t[tr];if(e)return e;for(var r=t.parentNode;r;){if(e=r[Er]||r[tr]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=cf(t);t!==null;){if(r=t[tr])return r;t=cf(t)}return e}t=r,r=t.parentNode}return null}function qs(t){return t=t[tr]||t[Er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(R(33))}function nl(t){return t[Bs]||null}var ch=[],ti=-1;function rn(t){return{current:t}}function ue(t){0>ti||(t.current=ch[ti],ch[ti]=null,ti--)}function ae(t,e){ti++,ch[ti]=t.current,t.current=e}var Qr={},qe=rn(Qr),st=rn(!1),Sn=Qr;function Ti(t,e){var r=t.type.contextTypes;if(!r)return Qr;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in r)i[s]=e[s];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function ot(t){return t=t.childContextTypes,t!=null}function xa(){ue(st),ue(qe)}function df(t,e,r){if(qe.current!==Qr)throw Error(R(168));ae(qe,e),ae(st,r)}function Sg(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(R(108,F0(t)||"Unknown",i));return ve({},r,n)}function wa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qr,Sn=qe.current,ae(qe,t),ae(st,st.current),!0}function ff(t,e,r){var n=t.stateNode;if(!n)throw Error(R(169));r?(t=Sg(t,e,Sn),n.__reactInternalMemoizedMergedChildContext=t,ue(st),ue(qe),ae(qe,t)):ue(st),ae(st,r)}var fr=null,il=!1,Xl=!1;function Ag(t){fr===null?fr=[t]:fr.push(t)}function J_(t){il=!0,Ag(t)}function nn(){if(!Xl&&fr!==null){Xl=!0;var t=0,e=ie;try{var r=fr;for(ie=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}fr=null,il=!1}catch(i){throw fr!==null&&(fr=fr.slice(t+1)),qm(Ic,nn),i}finally{ie=e,Xl=!1}}return null}var ri=[],ni=0,Ea=null,Ta=0,yt=[],vt=0,An=null,mr=1,gr="";function ln(t,e){ri[ni++]=Ta,ri[ni++]=Ea,Ea=t,Ta=e}function Cg(t,e,r){yt[vt++]=mr,yt[vt++]=gr,yt[vt++]=An,An=t;var n=mr;t=gr;var i=32-Ut(n)-1;n&=~(1<<i),r+=1;var s=32-Ut(e)+i;if(30<s){var o=i-i%5;s=(n&(1<<o)-1).toString(32),n>>=o,i-=o,mr=1<<32-Ut(e)+i|r<<i|n,gr=s+t}else mr=1<<s|r<<i|n,gr=t}function Oc(t){t.return!==null&&(ln(t,1),Cg(t,1,0))}function Lc(t){for(;t===Ea;)Ea=ri[--ni],ri[ni]=null,Ta=ri[--ni],ri[ni]=null;for(;t===An;)An=yt[--vt],yt[vt]=null,gr=yt[--vt],yt[vt]=null,mr=yt[--vt],yt[vt]=null}var ft=null,dt=null,ce=!1,Nt=null;function bg(t,e){var r=_t(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function pf(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ft=t,dt=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ft=t,dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=An!==null?{id:mr,overflow:gr}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=_t(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,ft=t,dt=null,!0):!1;default:return!1}}function dh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function fh(t){if(ce){var e=dt;if(e){var r=e;if(!pf(t,e)){if(dh(t))throw Error(R(418));e=Vr(r.nextSibling);var n=ft;e&&pf(t,e)?bg(n,r):(t.flags=t.flags&-4097|2,ce=!1,ft=t)}}else{if(dh(t))throw Error(R(418));t.flags=t.flags&-4097|2,ce=!1,ft=t}}}function mf(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ft=t}function go(t){if(t!==ft)return!1;if(!ce)return mf(t),ce=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!lh(t.type,t.memoizedProps)),e&&(e=dt)){if(dh(t))throw Ig(),Error(R(418));for(;e;)bg(t,e),e=Vr(e.nextSibling)}if(mf(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(R(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){dt=Vr(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}dt=null}}else dt=ft?Vr(t.stateNode.nextSibling):null;return!0}function Ig(){for(var t=dt;t;)t=Vr(t.nextSibling)}function Si(){dt=ft=null,ce=!1}function Uc(t){Nt===null?Nt=[t]:Nt.push(t)}var ex=Cr.ReactCurrentBatchConfig;function Dt(t,e){if(t&&t.defaultProps){e=ve({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}var Sa=rn(null),Aa=null,ii=null,Gc=null;function zc(){Gc=ii=Aa=null}function Hc(t){var e=Sa.current;ue(Sa),t._currentValue=e}function ph(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function fi(t,e){Aa=t,Gc=ii=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(it=!0),t.firstContext=null)}function Tt(t){var e=t._currentValue;if(Gc!==t)if(t={context:t,memoizedValue:e,next:null},ii===null){if(Aa===null)throw Error(R(308));ii=t,Aa.dependencies={lanes:0,firstContext:t}}else ii=ii.next=t;return e}var gn=null;function $c(t){gn===null?gn=[t]:gn.push(t)}function Pg(t,e,r,n){var i=e.interleaved;return i===null?(r.next=r,$c(e)):(r.next=i.next,i.next=r),e.interleaved=r,Tr(t,n)}function Tr(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var Mr=!1;function Vc(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function _r(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,re&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,Tr(t,r)}return i=n.interleaved,i===null?(e.next=e,$c(n)):(e.next=i.next,i.next=e),n.interleaved=e,Tr(t,r)}function Qo(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Pc(t,r)}}function gf(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var i=null,s=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};s===null?i=s=o:s=s.next=o,r=r.next}while(r!==null);s===null?i=s=e:s=s.next=e}else i=s=e;r={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Ca(t,e,r,n){var i=t.updateQueue;Mr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var h=t.alternate;h!==null&&(h=h.updateQueue,a=h.lastBaseUpdate,a!==o&&(a===null?h.firstBaseUpdate=u:a.next=u,h.lastBaseUpdate=l))}if(s!==null){var c=i.baseState;o=0,h=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((n&d)===d){h!==null&&(h=h.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,v=a;switch(d=e,f=r,v.tag){case 1:if(p=v.payload,typeof p=="function"){c=p.call(f,c,d);break e}c=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,d=typeof p=="function"?p.call(f,c,d):p,d==null)break e;c=ve({},c,d);break e;case 2:Mr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},h===null?(u=h=f,l=c):h=h.next=f,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(1);if(h===null&&(l=c),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);bn|=o,t.lanes=o,t.memoizedState=c}}function yf(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=r,typeof i!="function")throw Error(R(191,i));i.call(n)}}}var Mg=new Pm.Component().refs;function mh(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:ve({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var sl={isMounted:function(t){return(t=t._reactInternals)?kn(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=Je(),i=Wr(t),s=_r(n,i);s.payload=e,r!=null&&(s.callback=r),e=jr(t,s,i),e!==null&&(Gt(e,t,i,n),Qo(e,t,i))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=Je(),i=Wr(t),s=_r(n,i);s.tag=1,s.payload=e,r!=null&&(s.callback=r),e=jr(t,s,i),e!==null&&(Gt(e,t,i,n),Qo(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=Je(),n=Wr(t),i=_r(r,n);i.tag=2,e!=null&&(i.callback=e),e=jr(t,i,n),e!==null&&(Gt(e,t,n,r),Qo(e,t,n))}};function vf(t,e,r,n,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ms(r,n)||!Ms(i,s):!0}function Dg(t,e,r){var n=!1,i=Qr,s=e.contextType;return typeof s=="object"&&s!==null?s=Tt(s):(i=ot(e)?Sn:qe.current,n=e.contextTypes,s=(n=n!=null)?Ti(t,i):Qr),e=new e(r,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=sl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function _f(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&sl.enqueueReplaceState(e,e.state,null)}function gh(t,e,r,n){var i=t.stateNode;i.props=r,i.state=t.memoizedState,i.refs=Mg,Vc(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Tt(s):(s=ot(e)?Sn:qe.current,i.context=Ti(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(mh(t,e,s,r),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&sl.enqueueReplaceState(i,i.state,null),Ca(t,r,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Xi(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(R(309));var n=r.stateNode}if(!n)throw Error(R(147,t));var i=n,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;a===Mg&&(a=i.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(R(284));if(!r._owner)throw Error(R(290,t))}return t}function yo(t,e){throw t=Object.prototype.toString.call(e),Error(R(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xf(t){var e=t._init;return e(t._payload)}function kg(t){function e(y,g){if(t){var m=y.deletions;m===null?(y.deletions=[g],y.flags|=16):m.push(g)}}function r(y,g){if(!t)return null;for(;g!==null;)e(y,g),g=g.sibling;return null}function n(y,g){for(y=new Map;g!==null;)g.key!==null?y.set(g.key,g):y.set(g.index,g),g=g.sibling;return y}function i(y,g){return y=Yr(y,g),y.index=0,y.sibling=null,y}function s(y,g,m){return y.index=m,t?(m=y.alternate,m!==null?(m=m.index,m<g?(y.flags|=2,g):m):(y.flags|=2,g)):(y.flags|=1048576,g)}function o(y){return t&&y.alternate===null&&(y.flags|=2),y}function a(y,g,m,_){return g===null||g.tag!==6?(g=Jl(m,y.mode,_),g.return=y,g):(g=i(g,m),g.return=y,g)}function l(y,g,m,_){var w=m.type;return w===qn?h(y,g,m.props.children,_,m.key):g!==null&&(g.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Rr&&xf(w)===g.type)?(_=i(g,m.props),_.ref=Xi(y,g,m),_.return=y,_):(_=na(m.type,m.key,m.props,null,y.mode,_),_.ref=Xi(y,g,m),_.return=y,_)}function u(y,g,m,_){return g===null||g.tag!==4||g.stateNode.containerInfo!==m.containerInfo||g.stateNode.implementation!==m.implementation?(g=eu(m,y.mode,_),g.return=y,g):(g=i(g,m.children||[]),g.return=y,g)}function h(y,g,m,_,w){return g===null||g.tag!==7?(g=xn(m,y.mode,_,w),g.return=y,g):(g=i(g,m),g.return=y,g)}function c(y,g,m){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Jl(""+g,y.mode,m),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case so:return m=na(g.type,g.key,g.props,null,y.mode,m),m.ref=Xi(y,null,g),m.return=y,m;case Kn:return g=eu(g,y.mode,m),g.return=y,g;case Rr:var _=g._init;return c(y,_(g._payload),m)}if(rs(g)||zi(g))return g=xn(g,y.mode,m,null),g.return=y,g;yo(y,g)}return null}function d(y,g,m,_){var w=g!==null?g.key:null;if(typeof m=="string"&&m!==""||typeof m=="number")return w!==null?null:a(y,g,""+m,_);if(typeof m=="object"&&m!==null){switch(m.$$typeof){case so:return m.key===w?l(y,g,m,_):null;case Kn:return m.key===w?u(y,g,m,_):null;case Rr:return w=m._init,d(y,g,w(m._payload),_)}if(rs(m)||zi(m))return w!==null?null:h(y,g,m,_,null);yo(y,m)}return null}function f(y,g,m,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return y=y.get(m)||null,a(g,y,""+_,w);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case so:return y=y.get(_.key===null?m:_.key)||null,l(g,y,_,w);case Kn:return y=y.get(_.key===null?m:_.key)||null,u(g,y,_,w);case Rr:var S=_._init;return f(y,g,m,S(_._payload),w)}if(rs(_)||zi(_))return y=y.get(m)||null,h(g,y,_,w,null);yo(g,_)}return null}function p(y,g,m,_){for(var w=null,S=null,T=g,E=g=0,D=null;T!==null&&E<m.length;E++){T.index>E?(D=T,T=null):D=T.sibling;var I=d(y,T,m[E],_);if(I===null){T===null&&(T=D);break}t&&T&&I.alternate===null&&e(y,T),g=s(I,g,E),S===null?w=I:S.sibling=I,S=I,T=D}if(E===m.length)return r(y,T),ce&&ln(y,E),w;if(T===null){for(;E<m.length;E++)T=c(y,m[E],_),T!==null&&(g=s(T,g,E),S===null?w=T:S.sibling=T,S=T);return ce&&ln(y,E),w}for(T=n(y,T);E<m.length;E++)D=f(T,y,E,m[E],_),D!==null&&(t&&D.alternate!==null&&T.delete(D.key===null?E:D.key),g=s(D,g,E),S===null?w=D:S.sibling=D,S=D);return t&&T.forEach(function(M){return e(y,M)}),ce&&ln(y,E),w}function v(y,g,m,_){var w=zi(m);if(typeof w!="function")throw Error(R(150));if(m=w.call(m),m==null)throw Error(R(151));for(var S=w=null,T=g,E=g=0,D=null,I=m.next();T!==null&&!I.done;E++,I=m.next()){T.index>E?(D=T,T=null):D=T.sibling;var M=d(y,T,I.value,_);if(M===null){T===null&&(T=D);break}t&&T&&M.alternate===null&&e(y,T),g=s(M,g,E),S===null?w=M:S.sibling=M,S=M,T=D}if(I.done)return r(y,T),ce&&ln(y,E),w;if(T===null){for(;!I.done;E++,I=m.next())I=c(y,I.value,_),I!==null&&(g=s(I,g,E),S===null?w=I:S.sibling=I,S=I);return ce&&ln(y,E),w}for(T=n(y,T);!I.done;E++,I=m.next())I=f(T,y,E,I.value,_),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?E:I.key),g=s(I,g,E),S===null?w=I:S.sibling=I,S=I);return t&&T.forEach(function(B){return e(y,B)}),ce&&ln(y,E),w}function x(y,g,m,_){if(typeof m=="object"&&m!==null&&m.type===qn&&m.key===null&&(m=m.props.children),typeof m=="object"&&m!==null){switch(m.$$typeof){case so:e:{for(var w=m.key,S=g;S!==null;){if(S.key===w){if(w=m.type,w===qn){if(S.tag===7){r(y,S.sibling),g=i(S,m.props.children),g.return=y,y=g;break e}}else if(S.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===Rr&&xf(w)===S.type){r(y,S.sibling),g=i(S,m.props),g.ref=Xi(y,S,m),g.return=y,y=g;break e}r(y,S);break}else e(y,S);S=S.sibling}m.type===qn?(g=xn(m.props.children,y.mode,_,m.key),g.return=y,y=g):(_=na(m.type,m.key,m.props,null,y.mode,_),_.ref=Xi(y,g,m),_.return=y,y=_)}return o(y);case Kn:e:{for(S=m.key;g!==null;){if(g.key===S)if(g.tag===4&&g.stateNode.containerInfo===m.containerInfo&&g.stateNode.implementation===m.implementation){r(y,g.sibling),g=i(g,m.children||[]),g.return=y,y=g;break e}else{r(y,g);break}else e(y,g);g=g.sibling}g=eu(m,y.mode,_),g.return=y,y=g}return o(y);case Rr:return S=m._init,x(y,g,S(m._payload),_)}if(rs(m))return p(y,g,m,_);if(zi(m))return v(y,g,m,_);yo(y,m)}return typeof m=="string"&&m!==""||typeof m=="number"?(m=""+m,g!==null&&g.tag===6?(r(y,g.sibling),g=i(g,m),g.return=y,y=g):(r(y,g),g=Jl(m,y.mode,_),g.return=y,y=g),o(y)):r(y,g)}return x}var Ai=kg(!0),Bg=kg(!1),Qs={},ir=rn(Qs),Ns=rn(Qs),Fs=rn(Qs);function yn(t){if(t===Qs)throw Error(R(174));return t}function jc(t,e){switch(ae(Fs,e),ae(Ns,t),ae(ir,Qs),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Yu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Yu(e,t)}ue(ir),ae(ir,e)}function Ci(){ue(ir),ue(Ns),ue(Fs)}function Ng(t){yn(Fs.current);var e=yn(ir.current),r=Yu(e,t.type);e!==r&&(ae(Ns,t),ae(ir,r))}function Xc(t){Ns.current===t&&(ue(ir),ue(Ns))}var me=rn(0);function ba(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Wl=[];function Wc(){for(var t=0;t<Wl.length;t++)Wl[t]._workInProgressVersionPrimary=null;Wl.length=0}var Zo=Cr.ReactCurrentDispatcher,Yl=Cr.ReactCurrentBatchConfig,Cn=0,ye=null,Pe=null,ke=null,Ia=!1,ms=!1,Os=0,tx=0;function Ve(){throw Error(R(321))}function Yc(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!Vt(t[r],e[r]))return!1;return!0}function Kc(t,e,r,n,i,s){if(Cn=s,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zo.current=t===null||t.memoizedState===null?sx:ox,t=r(n,i),ms){s=0;do{if(ms=!1,Os=0,25<=s)throw Error(R(301));s+=1,ke=Pe=null,e.updateQueue=null,Zo.current=ax,t=r(n,i)}while(ms)}if(Zo.current=Pa,e=Pe!==null&&Pe.next!==null,Cn=0,ke=Pe=ye=null,Ia=!1,e)throw Error(R(300));return t}function qc(){var t=Os!==0;return Os=0,t}function Zt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ke===null?ye.memoizedState=ke=t:ke=ke.next=t,ke}function St(){if(Pe===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=ke===null?ye.memoizedState:ke.next;if(e!==null)ke=e,Pe=t;else{if(t===null)throw Error(R(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},ke===null?ye.memoizedState=ke=t:ke=ke.next=t}return ke}function Ls(t,e){return typeof e=="function"?e(t):e}function Kl(t){var e=St(),r=e.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=t;var n=Pe,i=n.baseQueue,s=r.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}n.baseQueue=i=s,r.pending=null}if(i!==null){s=i.next,n=n.baseState;var a=o=null,l=null,u=s;do{var h=u.lane;if((Cn&h)===h)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var c={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=c,o=n):l=l.next=c,ye.lanes|=h,bn|=h}u=u.next}while(u!==null&&u!==s);l===null?o=n:l.next=a,Vt(n,e.memoizedState)||(it=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){i=t;do s=i.lane,ye.lanes|=s,bn|=s,i=i.next;while(i!==t)}else i===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function ql(t){var e=St(),r=e.queue;if(r===null)throw Error(R(311));r.lastRenderedReducer=t;var n=r.dispatch,i=r.pending,s=e.memoizedState;if(i!==null){r.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Vt(s,e.memoizedState)||(it=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),r.lastRenderedState=s}return[s,n]}function Fg(){}function Og(t,e){var r=ye,n=St(),i=e(),s=!Vt(n.memoizedState,i);if(s&&(n.memoizedState=i,it=!0),n=n.queue,Qc(Gg.bind(null,r,n,t),[t]),n.getSnapshot!==e||s||ke!==null&&ke.memoizedState.tag&1){if(r.flags|=2048,Us(9,Ug.bind(null,r,n,i,e),void 0,null),Ne===null)throw Error(R(349));Cn&30||Lg(r,e,i)}return i}function Lg(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function Ug(t,e,r,n){e.value=r,e.getSnapshot=n,zg(e)&&Hg(t)}function Gg(t,e,r){return r(function(){zg(e)&&Hg(t)})}function zg(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!Vt(t,r)}catch{return!0}}function Hg(t){var e=Tr(t,1);e!==null&&Gt(e,t,1,-1)}function wf(t){var e=Zt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ls,lastRenderedState:t},e.queue=t,t=t.dispatch=ix.bind(null,ye,t),[e.memoizedState,t]}function Us(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function $g(){return St().memoizedState}function Jo(t,e,r,n){var i=Zt();ye.flags|=t,i.memoizedState=Us(1|e,r,void 0,n===void 0?null:n)}function ol(t,e,r,n){var i=St();n=n===void 0?null:n;var s=void 0;if(Pe!==null){var o=Pe.memoizedState;if(s=o.destroy,n!==null&&Yc(n,o.deps)){i.memoizedState=Us(e,r,s,n);return}}ye.flags|=t,i.memoizedState=Us(1|e,r,s,n)}function Ef(t,e){return Jo(8390656,8,t,e)}function Qc(t,e){return ol(2048,8,t,e)}function Vg(t,e){return ol(4,2,t,e)}function jg(t,e){return ol(4,4,t,e)}function Xg(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Wg(t,e,r){return r=r!=null?r.concat([t]):null,ol(4,4,Xg.bind(null,e,t),r)}function Zc(){}function Yg(t,e){var r=St();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Yc(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function Kg(t,e){var r=St();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&Yc(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function qg(t,e,r){return Cn&21?(Vt(r,e)||(r=Jm(),ye.lanes|=r,bn|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,it=!0),t.memoizedState=r)}function rx(t,e){var r=ie;ie=r!==0&&4>r?r:4,t(!0);var n=Yl.transition;Yl.transition={};try{t(!1),e()}finally{ie=r,Yl.transition=n}}function Qg(){return St().memoizedState}function nx(t,e,r){var n=Wr(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},Zg(t))Jg(e,r);else if(r=Pg(t,e,r,n),r!==null){var i=Je();Gt(r,t,n,i),ey(r,e,n)}}function ix(t,e,r){var n=Wr(t),i={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(Zg(t))Jg(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,r);if(i.hasEagerState=!0,i.eagerState=a,Vt(a,o)){var l=e.interleaved;l===null?(i.next=i,$c(e)):(i.next=l.next,l.next=i),e.interleaved=i;return}}catch{}finally{}r=Pg(t,e,i,n),r!==null&&(i=Je(),Gt(r,t,n,i),ey(r,e,n))}}function Zg(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function Jg(t,e){ms=Ia=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function ey(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,Pc(t,r)}}var Pa={readContext:Tt,useCallback:Ve,useContext:Ve,useEffect:Ve,useImperativeHandle:Ve,useInsertionEffect:Ve,useLayoutEffect:Ve,useMemo:Ve,useReducer:Ve,useRef:Ve,useState:Ve,useDebugValue:Ve,useDeferredValue:Ve,useTransition:Ve,useMutableSource:Ve,useSyncExternalStore:Ve,useId:Ve,unstable_isNewReconciler:!1},sx={readContext:Tt,useCallback:function(t,e){return Zt().memoizedState=[t,e===void 0?null:e],t},useContext:Tt,useEffect:Ef,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,Jo(4194308,4,Xg.bind(null,e,t),r)},useLayoutEffect:function(t,e){return Jo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Jo(4,2,t,e)},useMemo:function(t,e){var r=Zt();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Zt();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=nx.bind(null,ye,t),[n.memoizedState,t]},useRef:function(t){var e=Zt();return t={current:t},e.memoizedState=t},useState:wf,useDebugValue:Zc,useDeferredValue:function(t){return Zt().memoizedState=t},useTransition:function(){var t=wf(!1),e=t[0];return t=rx.bind(null,t[1]),Zt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=ye,i=Zt();if(ce){if(r===void 0)throw Error(R(407));r=r()}else{if(r=e(),Ne===null)throw Error(R(349));Cn&30||Lg(n,e,r)}i.memoizedState=r;var s={value:r,getSnapshot:e};return i.queue=s,Ef(Gg.bind(null,n,s,t),[t]),n.flags|=2048,Us(9,Ug.bind(null,n,s,r,e),void 0,null),r},useId:function(){var t=Zt(),e=Ne.identifierPrefix;if(ce){var r=gr,n=mr;r=(n&~(1<<32-Ut(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Os++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=tx++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ox={readContext:Tt,useCallback:Yg,useContext:Tt,useEffect:Qc,useImperativeHandle:Wg,useInsertionEffect:Vg,useLayoutEffect:jg,useMemo:Kg,useReducer:Kl,useRef:$g,useState:function(){return Kl(Ls)},useDebugValue:Zc,useDeferredValue:function(t){var e=St();return qg(e,Pe.memoizedState,t)},useTransition:function(){var t=Kl(Ls)[0],e=St().memoizedState;return[t,e]},useMutableSource:Fg,useSyncExternalStore:Og,useId:Qg,unstable_isNewReconciler:!1},ax={readContext:Tt,useCallback:Yg,useContext:Tt,useEffect:Qc,useImperativeHandle:Wg,useInsertionEffect:Vg,useLayoutEffect:jg,useMemo:Kg,useReducer:ql,useRef:$g,useState:function(){return ql(Ls)},useDebugValue:Zc,useDeferredValue:function(t){var e=St();return Pe===null?e.memoizedState=t:qg(e,Pe.memoizedState,t)},useTransition:function(){var t=ql(Ls)[0],e=St().memoizedState;return[t,e]},useMutableSource:Fg,useSyncExternalStore:Og,useId:Qg,unstable_isNewReconciler:!1};function bi(t,e){try{var r="",n=e;do r+=N0(n),n=n.return;while(n);var i=r}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Ql(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function yh(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var lx=typeof WeakMap=="function"?WeakMap:Map;function ty(t,e,r){r=_r(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Ma||(Ma=!0,bh=n),yh(t,e)},r}function ry(t,e,r){r=_r(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;r.payload=function(){return n(i)},r.callback=function(){yh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(r.callback=function(){yh(t,e),typeof n!="function"&&(Xr===null?Xr=new Set([this]):Xr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function Tf(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new lx;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(r)||(i.add(r),t=Ex.bind(null,t,e,r),e.then(t,t))}function Sf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Af(t,e,r,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=_r(-1,1),e.tag=2,jr(r,e,1))),r.lanes|=1),t)}var ux=Cr.ReactCurrentOwner,it=!1;function Ze(t,e,r,n){e.child=t===null?Bg(e,null,r,n):Ai(e,t.child,r,n)}function Cf(t,e,r,n,i){r=r.render;var s=e.ref;return fi(e,i),n=Kc(t,e,r,n,s,i),r=qc(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sr(t,e,i)):(ce&&r&&Oc(e),e.flags|=1,Ze(t,e,n,i),e.child)}function bf(t,e,r,n,i){if(t===null){var s=r.type;return typeof s=="function"&&!od(s)&&s.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=s,ny(t,e,s,n,i)):(t=na(r.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(r=r.compare,r=r!==null?r:Ms,r(o,n)&&t.ref===e.ref)return Sr(t,e,i)}return e.flags|=1,t=Yr(s,n),t.ref=e.ref,t.return=e,e.child=t}function ny(t,e,r,n,i){if(t!==null){var s=t.memoizedProps;if(Ms(s,n)&&t.ref===e.ref)if(it=!1,e.pendingProps=n=s,(t.lanes&i)!==0)t.flags&131072&&(it=!0);else return e.lanes=t.lanes,Sr(t,e,i)}return vh(t,e,r,n,i)}function iy(t,e,r){var n=e.pendingProps,i=n.children,s=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ae(oi,ct),ct|=r;else{if(!(r&1073741824))return t=s!==null?s.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ae(oi,ct),ct|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:r,ae(oi,ct),ct|=n}else s!==null?(n=s.baseLanes|r,e.memoizedState=null):n=r,ae(oi,ct),ct|=n;return Ze(t,e,i,r),e.child}function sy(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function vh(t,e,r,n,i){var s=ot(r)?Sn:qe.current;return s=Ti(e,s),fi(e,i),r=Kc(t,e,r,n,s,i),n=qc(),t!==null&&!it?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Sr(t,e,i)):(ce&&n&&Oc(e),e.flags|=1,Ze(t,e,r,i),e.child)}function If(t,e,r,n,i){if(ot(r)){var s=!0;wa(e)}else s=!1;if(fi(e,i),e.stateNode===null)ea(t,e),Dg(e,r,n),gh(e,r,n,i),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Tt(u):(u=ot(r)?Sn:qe.current,u=Ti(e,u));var h=r.getDerivedStateFromProps,c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&_f(e,o,n,u),Mr=!1;var d=e.memoizedState;o.state=d,Ca(e,n,o,i),l=e.memoizedState,a!==n||d!==l||st.current||Mr?(typeof h=="function"&&(mh(e,r,h,n),l=e.memoizedState),(a=Mr||vf(e,r,a,n,d,l,u))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,Rg(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Dt(e.type,a),o.props=u,c=e.pendingProps,d=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Tt(l):(l=ot(r)?Sn:qe.current,l=Ti(e,l));var f=r.getDerivedStateFromProps;(h=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||d!==l)&&_f(e,o,n,l),Mr=!1,d=e.memoizedState,o.state=d,Ca(e,n,o,i);var p=e.memoizedState;a!==c||d!==p||st.current||Mr?(typeof f=="function"&&(mh(e,r,f,n),p=e.memoizedState),(u=Mr||vf(e,r,u,n,d,p,l)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),n=!1)}return _h(t,e,r,n,s,i)}function _h(t,e,r,n,i,s){sy(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&ff(e,r,!1),Sr(t,e,s);n=e.stateNode,ux.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Ai(e,t.child,null,s),e.child=Ai(e,null,a,s)):Ze(t,e,a,s),e.memoizedState=n.state,i&&ff(e,r,!0),e.child}function oy(t){var e=t.stateNode;e.pendingContext?df(t,e.pendingContext,e.pendingContext!==e.context):e.context&&df(t,e.context,!1),jc(t,e.containerInfo)}function Pf(t,e,r,n,i){return Si(),Uc(i),e.flags|=256,Ze(t,e,r,n),e.child}var xh={dehydrated:null,treeContext:null,retryLane:0};function wh(t){return{baseLanes:t,cachePool:null,transitions:null}}function ay(t,e,r){var n=e.pendingProps,i=me.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ae(me,i&1),t===null)return fh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,s?(n=e.mode,s=e.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=ul(o,n,0,null),t=xn(t,n,r,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=wh(r),e.memoizedState=xh,t):Jc(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return hx(t,e,o,n,a,i,r);if(s){s=n.fallback,o=e.mode,i=t.child,a=i.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Yr(i,l),n.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=Yr(a,s):(s=xn(s,o,r,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,o=t.child.memoizedState,o=o===null?wh(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~r,e.memoizedState=xh,n}return s=t.child,t=s.sibling,n=Yr(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function Jc(t,e){return e=ul({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function vo(t,e,r,n){return n!==null&&Uc(n),Ai(e,t.child,null,r),t=Jc(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hx(t,e,r,n,i,s,o){if(r)return e.flags&256?(e.flags&=-257,n=Ql(Error(R(422))),vo(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=n.fallback,i=e.mode,n=ul({mode:"visible",children:n.children},i,0,null),s=xn(s,i,o,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Ai(e,t.child,null,o),e.child.memoizedState=wh(o),e.memoizedState=xh,s);if(!(e.mode&1))return vo(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(R(419)),n=Ql(s,n,void 0),vo(t,e,o,n)}if(a=(o&t.childLanes)!==0,it||a){if(n=Ne,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Tr(t,i),Gt(n,t,i,-1))}return sd(),n=Ql(Error(R(421))),vo(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Tx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,dt=Vr(i.nextSibling),ft=e,ce=!0,Nt=null,t!==null&&(yt[vt++]=mr,yt[vt++]=gr,yt[vt++]=An,mr=t.id,gr=t.overflow,An=e),e=Jc(e,n.children),e.flags|=4096,e)}function Rf(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),ph(t.return,e,r)}function Zl(t,e,r,n,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=r,s.tailMode=i)}function ly(t,e,r){var n=e.pendingProps,i=n.revealOrder,s=n.tail;if(Ze(t,e,n.children,r),n=me.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Rf(t,r,e);else if(t.tag===19)Rf(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(ae(me,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(r=e.child,i=null;r!==null;)t=r.alternate,t!==null&&ba(t)===null&&(i=r),r=r.sibling;r=i,r===null?(i=e.child,e.child=null):(i=r.sibling,r.sibling=null),Zl(e,!1,i,r,s);break;case"backwards":for(r=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ba(t)===null){e.child=i;break}t=i.sibling,i.sibling=r,r=i,i=t}Zl(e,!0,r,null,s);break;case"together":Zl(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ea(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Sr(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),bn|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(R(153));if(e.child!==null){for(t=e.child,r=Yr(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Yr(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function cx(t,e,r){switch(e.tag){case 3:oy(e),Si();break;case 5:Ng(e);break;case 1:ot(e.type)&&wa(e);break;case 4:jc(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;ae(Sa,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(ae(me,me.current&1),e.flags|=128,null):r&e.child.childLanes?ay(t,e,r):(ae(me,me.current&1),t=Sr(t,e,r),t!==null?t.sibling:null);ae(me,me.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return ly(t,e,r);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ae(me,me.current),n)break;return null;case 22:case 23:return e.lanes=0,iy(t,e,r)}return Sr(t,e,r)}var uy,Eh,hy,cy;uy=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Eh=function(){};hy=function(t,e,r,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,yn(ir.current);var s=null;switch(r){case"input":i=Vu(t,i),n=Vu(t,n),s=[];break;case"select":i=ve({},i,{value:void 0}),n=ve({},n,{value:void 0}),s=[];break;case"textarea":i=Wu(t,i),n=Wu(t,n),s=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=_a)}Ku(r,n);var o;r=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var a=i[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ss.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(a=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(s||(s=[]),s.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ss.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&le("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}r&&(s=s||[]).push("style",r);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};cy=function(t,e,r,n){r!==n&&(e.flags|=4)};function Wi(t,e){if(!ce)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function je(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)r|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function dx(t,e,r){var n=e.pendingProps;switch(Lc(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return je(e),null;case 1:return ot(e.type)&&xa(),je(e),null;case 3:return n=e.stateNode,Ci(),ue(st),ue(qe),Wc(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(go(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nt!==null&&(Rh(Nt),Nt=null))),Eh(t,e),je(e),null;case 5:Xc(e);var i=yn(Fs.current);if(r=e.type,t!==null&&e.stateNode!=null)hy(t,e,r,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(R(166));return je(e),null}if(t=yn(ir.current),go(e)){n=e.stateNode,r=e.type;var s=e.memoizedProps;switch(n[tr]=e,n[Bs]=s,t=(e.mode&1)!==0,r){case"dialog":le("cancel",n),le("close",n);break;case"iframe":case"object":case"embed":le("load",n);break;case"video":case"audio":for(i=0;i<is.length;i++)le(is[i],n);break;case"source":le("error",n);break;case"img":case"image":case"link":le("error",n),le("load",n);break;case"details":le("toggle",n);break;case"input":Ld(n,s),le("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},le("invalid",n);break;case"textarea":Gd(n,s),le("invalid",n)}Ku(r,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&mo(n.textContent,a,t),i=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&mo(n.textContent,a,t),i=["children",""+a]):Ss.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&le("scroll",n)}switch(r){case"input":oo(n),Ud(n,s,!0);break;case"textarea":oo(n),zd(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=_a)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Lm(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[tr]=e,t[Bs]=n,uy(t,e,!1,!1),e.stateNode=t;e:{switch(o=qu(r,n),r){case"dialog":le("cancel",t),le("close",t),i=n;break;case"iframe":case"object":case"embed":le("load",t),i=n;break;case"video":case"audio":for(i=0;i<is.length;i++)le(is[i],t);i=n;break;case"source":le("error",t),i=n;break;case"img":case"image":case"link":le("error",t),le("load",t),i=n;break;case"details":le("toggle",t),i=n;break;case"input":Ld(t,n),i=Vu(t,n),le("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=ve({},n,{value:void 0}),le("invalid",t);break;case"textarea":Gd(t,n),i=Wu(t,n),le("invalid",t);break;default:i=n}Ku(r,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?zm(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Um(t,l)):s==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&As(t,l):typeof l=="number"&&As(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ss.hasOwnProperty(s)?l!=null&&s==="onScroll"&&le("scroll",t):l!=null&&Tc(t,s,l,o))}switch(r){case"input":oo(t),Ud(t,n,!1);break;case"textarea":oo(t),zd(t);break;case"option":n.value!=null&&t.setAttribute("value",""+qr(n.value));break;case"select":t.multiple=!!n.multiple,s=n.value,s!=null?ui(t,!!n.multiple,s,!1):n.defaultValue!=null&&ui(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=_a)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return je(e),null;case 6:if(t&&e.stateNode!=null)cy(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(R(166));if(r=yn(Fs.current),yn(ir.current),go(e)){if(n=e.stateNode,r=e.memoizedProps,n[tr]=e,(s=n.nodeValue!==r)&&(t=ft,t!==null))switch(t.tag){case 3:mo(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&mo(n.nodeValue,r,(t.mode&1)!==0)}s&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[tr]=e,e.stateNode=n}return je(e),null;case 13:if(ue(me),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ce&&dt!==null&&e.mode&1&&!(e.flags&128))Ig(),Si(),e.flags|=98560,s=!1;else if(s=go(e),n!==null&&n.dehydrated!==null){if(t===null){if(!s)throw Error(R(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(R(317));s[tr]=e}else Si(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;je(e),s=!1}else Nt!==null&&(Rh(Nt),Nt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||me.current&1?Re===0&&(Re=3):sd())),e.updateQueue!==null&&(e.flags|=4),je(e),null);case 4:return Ci(),Eh(t,e),t===null&&Ds(e.stateNode.containerInfo),je(e),null;case 10:return Hc(e.type._context),je(e),null;case 17:return ot(e.type)&&xa(),je(e),null;case 19:if(ue(me),s=e.memoizedState,s===null)return je(e),null;if(n=(e.flags&128)!==0,o=s.rendering,o===null)if(n)Wi(s,!1);else{if(Re!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ba(t),o!==null){for(e.flags|=128,Wi(s,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)s=r,t=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return ae(me,me.current&1|2),e.child}t=t.sibling}s.tail!==null&&Te()>Ii&&(e.flags|=128,n=!0,Wi(s,!1),e.lanes=4194304)}else{if(!n)if(t=ba(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),Wi(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ce)return je(e),null}else 2*Te()-s.renderingStartTime>Ii&&r!==1073741824&&(e.flags|=128,n=!0,Wi(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(r=s.last,r!==null?r.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Te(),e.sibling=null,r=me.current,ae(me,n?r&1|2:r&1),e):(je(e),null);case 22:case 23:return id(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ct&1073741824&&(je(e),e.subtreeFlags&6&&(e.flags|=8192)):je(e),null;case 24:return null;case 25:return null}throw Error(R(156,e.tag))}function fx(t,e){switch(Lc(e),e.tag){case 1:return ot(e.type)&&xa(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ci(),ue(st),ue(qe),Wc(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xc(e),null;case 13:if(ue(me),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(R(340));Si()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ue(me),null;case 4:return Ci(),null;case 10:return Hc(e.type._context),null;case 22:case 23:return id(),null;case 24:return null;default:return null}}var _o=!1,We=!1,px=typeof WeakSet=="function"?WeakSet:Set,U=null;function si(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){we(t,e,n)}else r.current=null}function Th(t,e,r){try{r()}catch(n){we(t,e,n)}}var Mf=!1;function mx(t,e){if(oh=ga,t=mg(),Fc(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var i=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{r.nodeType,s.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,h=0,c=t,d=null;t:for(;;){for(var f;c!==r||i!==0&&c.nodeType!==3||(a=o+i),c!==s||n!==0&&c.nodeType!==3||(l=o+n),c.nodeType===3&&(o+=c.nodeValue.length),(f=c.firstChild)!==null;)d=c,c=f;for(;;){if(c===t)break t;if(d===r&&++u===i&&(a=o),d===s&&++h===n&&(l=o),(f=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=f}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(ah={focusedElem:t,selectionRange:r},ga=!1,U=e;U!==null;)if(e=U,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,U=t;else for(;U!==null;){e=U;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,x=p.memoizedState,y=e.stateNode,g=y.getSnapshotBeforeUpdate(e.elementType===e.type?v:Dt(e.type,v),x);y.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var m=e.stateNode.containerInfo;m.nodeType===1?m.textContent="":m.nodeType===9&&m.documentElement&&m.removeChild(m.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(R(163))}}catch(_){we(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}return p=Mf,Mf=!1,p}function gs(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Th(e,r,s)}i=i.next}while(i!==n)}}function al(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Sh(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function dy(t){var e=t.alternate;e!==null&&(t.alternate=null,dy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tr],delete e[Bs],delete e[hh],delete e[Q_],delete e[Z_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function fy(t){return t.tag===5||t.tag===3||t.tag===4}function Df(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||fy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ah(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=_a));else if(n!==4&&(t=t.child,t!==null))for(Ah(t,e,r),t=t.sibling;t!==null;)Ah(t,e,r),t=t.sibling}function Ch(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Ch(t,e,r),t=t.sibling;t!==null;)Ch(t,e,r),t=t.sibling}var Oe=null,Bt=!1;function Ir(t,e,r){for(r=r.child;r!==null;)py(t,e,r),r=r.sibling}function py(t,e,r){if(nr&&typeof nr.onCommitFiberUnmount=="function")try{nr.onCommitFiberUnmount(Ja,r)}catch{}switch(r.tag){case 5:We||si(r,e);case 6:var n=Oe,i=Bt;Oe=null,Ir(t,e,r),Oe=n,Bt=i,Oe!==null&&(Bt?(t=Oe,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Oe.removeChild(r.stateNode));break;case 18:Oe!==null&&(Bt?(t=Oe,r=r.stateNode,t.nodeType===8?jl(t.parentNode,r):t.nodeType===1&&jl(t,r),Ps(t)):jl(Oe,r.stateNode));break;case 4:n=Oe,i=Bt,Oe=r.stateNode.containerInfo,Bt=!0,Ir(t,e,r),Oe=n,Bt=i;break;case 0:case 11:case 14:case 15:if(!We&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Th(r,e,o),i=i.next}while(i!==n)}Ir(t,e,r);break;case 1:if(!We&&(si(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){we(r,e,a)}Ir(t,e,r);break;case 21:Ir(t,e,r);break;case 22:r.mode&1?(We=(n=We)||r.memoizedState!==null,Ir(t,e,r),We=n):Ir(t,e,r);break;default:Ir(t,e,r)}}function kf(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new px),e.forEach(function(n){var i=Sx.bind(null,t,n);r.has(n)||(r.add(n),n.then(i,i))})}}function Ct(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var i=r[n];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Oe=a.stateNode,Bt=!1;break e;case 3:Oe=a.stateNode.containerInfo,Bt=!0;break e;case 4:Oe=a.stateNode.containerInfo,Bt=!0;break e}a=a.return}if(Oe===null)throw Error(R(160));py(s,o,i),Oe=null,Bt=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){we(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)my(e,t),e=e.sibling}function my(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Ct(e,t),Yt(t),n&4){try{gs(3,t,t.return),al(3,t)}catch(v){we(t,t.return,v)}try{gs(5,t,t.return)}catch(v){we(t,t.return,v)}}break;case 1:Ct(e,t),Yt(t),n&512&&r!==null&&si(r,r.return);break;case 5:if(Ct(e,t),Yt(t),n&512&&r!==null&&si(r,r.return),t.flags&32){var i=t.stateNode;try{As(i,"")}catch(v){we(t,t.return,v)}}if(n&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=r!==null?r.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Fm(i,s),qu(a,o);var u=qu(a,s);for(o=0;o<l.length;o+=2){var h=l[o],c=l[o+1];h==="style"?zm(i,c):h==="dangerouslySetInnerHTML"?Um(i,c):h==="children"?As(i,c):Tc(i,h,c,u)}switch(a){case"input":ju(i,s);break;case"textarea":Om(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?ui(i,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?ui(i,!!s.multiple,s.defaultValue,!0):ui(i,!!s.multiple,s.multiple?[]:"",!1))}i[Bs]=s}catch(v){we(t,t.return,v)}}break;case 6:if(Ct(e,t),Yt(t),n&4){if(t.stateNode===null)throw Error(R(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){we(t,t.return,v)}}break;case 3:if(Ct(e,t),Yt(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ps(e.containerInfo)}catch(v){we(t,t.return,v)}break;case 4:Ct(e,t),Yt(t);break;case 13:Ct(e,t),Yt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(rd=Te())),n&4&&kf(t);break;case 22:if(h=r!==null&&r.memoizedState!==null,t.mode&1?(We=(u=We)||h,Ct(e,t),We=u):Ct(e,t),Yt(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(U=t,h=t.child;h!==null;){for(c=U=h;U!==null;){switch(d=U,f=d.child,d.tag){case 0:case 11:case 14:case 15:gs(4,d,d.return);break;case 1:si(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,r=d.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){we(n,r,v)}}break;case 5:si(d,d.return);break;case 22:if(d.memoizedState!==null){Nf(c);continue}}f!==null?(f.return=d,U=f):Nf(c)}h=h.sibling}e:for(h=null,c=t;;){if(c.tag===5){if(h===null){h=c;try{i=c.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Gm("display",o))}catch(v){we(t,t.return,v)}}}else if(c.tag===6){if(h===null)try{c.stateNode.nodeValue=u?"":c.memoizedProps}catch(v){we(t,t.return,v)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===t)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===t)break e;for(;c.sibling===null;){if(c.return===null||c.return===t)break e;h===c&&(h=null),c=c.return}h===c&&(h=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:Ct(e,t),Yt(t),n&4&&kf(t);break;case 21:break;default:Ct(e,t),Yt(t)}}function Yt(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(fy(r)){var n=r;break e}r=r.return}throw Error(R(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(As(i,""),n.flags&=-33);var s=Df(t);Ch(t,s,i);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Df(t);Ah(t,a,o);break;default:throw Error(R(161))}}catch(l){we(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function gx(t,e,r){U=t,gy(t)}function gy(t,e,r){for(var n=(t.mode&1)!==0;U!==null;){var i=U,s=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||_o;if(!o){var a=i.alternate,l=a!==null&&a.memoizedState!==null||We;a=_o;var u=We;if(_o=o,(We=l)&&!u)for(U=i;U!==null;)o=U,l=o.child,o.tag===22&&o.memoizedState!==null?Ff(i):l!==null?(l.return=o,U=l):Ff(i);for(;s!==null;)U=s,gy(s),s=s.sibling;U=i,_o=a,We=u}Bf(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,U=s):Bf(t)}}function Bf(t){for(;U!==null;){var e=U;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:We||al(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!We)if(r===null)n.componentDidMount();else{var i=e.elementType===e.type?r.memoizedProps:Dt(e.type,r.memoizedProps);n.componentDidUpdate(i,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&yf(e,s,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}yf(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var c=h.dehydrated;c!==null&&Ps(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(R(163))}We||e.flags&512&&Sh(e)}catch(d){we(e,e.return,d)}}if(e===t){U=null;break}if(r=e.sibling,r!==null){r.return=e.return,U=r;break}U=e.return}}function Nf(t){for(;U!==null;){var e=U;if(e===t){U=null;break}var r=e.sibling;if(r!==null){r.return=e.return,U=r;break}U=e.return}}function Ff(t){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{al(4,e)}catch(l){we(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(l){we(e,i,l)}}var s=e.return;try{Sh(e)}catch(l){we(e,s,l)}break;case 5:var o=e.return;try{Sh(e)}catch(l){we(e,o,l)}}}catch(l){we(e,e.return,l)}if(e===t){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var yx=Math.ceil,Ra=Cr.ReactCurrentDispatcher,ed=Cr.ReactCurrentOwner,Et=Cr.ReactCurrentBatchConfig,re=0,Ne=null,Ce=null,ze=0,ct=0,oi=rn(0),Re=0,Gs=null,bn=0,ll=0,td=0,ys=null,nt=null,rd=0,Ii=1/0,dr=null,Ma=!1,bh=null,Xr=null,xo=!1,Or=null,Da=0,vs=0,Ih=null,ta=-1,ra=0;function Je(){return re&6?Te():ta!==-1?ta:ta=Te()}function Wr(t){return t.mode&1?re&2&&ze!==0?ze&-ze:ex.transition!==null?(ra===0&&(ra=Jm()),ra):(t=ie,t!==0||(t=window.event,t=t===void 0?16:og(t.type)),t):1}function Gt(t,e,r,n){if(50<vs)throw vs=0,Ih=null,Error(R(185));Ys(t,r,n),(!(re&2)||t!==Ne)&&(t===Ne&&(!(re&2)&&(ll|=r),Re===4&&Br(t,ze)),at(t,n),r===1&&re===0&&!(e.mode&1)&&(Ii=Te()+500,il&&nn()))}function at(t,e){var r=t.callbackNode;e_(t,e);var n=ma(t,t===Ne?ze:0);if(n===0)r!==null&&Vd(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Vd(r),e===1)t.tag===0?J_(Of.bind(null,t)):Ag(Of.bind(null,t)),K_(function(){!(re&6)&&nn()}),r=null;else{switch(eg(n)){case 1:r=Ic;break;case 4:r=Qm;break;case 16:r=pa;break;case 536870912:r=Zm;break;default:r=pa}r=Sy(r,yy.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function yy(t,e){if(ta=-1,ra=0,re&6)throw Error(R(327));var r=t.callbackNode;if(pi()&&t.callbackNode!==r)return null;var n=ma(t,t===Ne?ze:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ka(t,n);else{e=n;var i=re;re|=2;var s=_y();(Ne!==t||ze!==e)&&(dr=null,Ii=Te()+500,_n(t,e));do try{xx();break}catch(a){vy(t,a)}while(1);zc(),Ra.current=s,re=i,Ce!==null?e=0:(Ne=null,ze=0,e=Re)}if(e!==0){if(e===2&&(i=th(t),i!==0&&(n=i,e=Ph(t,i))),e===1)throw r=Gs,_n(t,0),Br(t,n),at(t,Te()),r;if(e===6)Br(t,n);else{if(i=t.current.alternate,!(n&30)&&!vx(i)&&(e=ka(t,n),e===2&&(s=th(t),s!==0&&(n=s,e=Ph(t,s))),e===1))throw r=Gs,_n(t,0),Br(t,n),at(t,Te()),r;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(R(345));case 2:un(t,nt,dr);break;case 3:if(Br(t,n),(n&130023424)===n&&(e=rd+500-Te(),10<e)){if(ma(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){Je(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=uh(un.bind(null,t,nt,dr),e);break}un(t,nt,dr);break;case 4:if(Br(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Ut(n);s=1<<o,o=e[o],o>i&&(i=o),n&=~s}if(n=i,n=Te()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*yx(n/1960))-n,10<n){t.timeoutHandle=uh(un.bind(null,t,nt,dr),n);break}un(t,nt,dr);break;case 5:un(t,nt,dr);break;default:throw Error(R(329))}}}return at(t,Te()),t.callbackNode===r?yy.bind(null,t):null}function Ph(t,e){var r=ys;return t.current.memoizedState.isDehydrated&&(_n(t,e).flags|=256),t=ka(t,e),t!==2&&(e=nt,nt=r,e!==null&&Rh(e)),t}function Rh(t){nt===null?nt=t:nt.push.apply(nt,t)}function vx(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var i=r[n],s=i.getSnapshot;i=i.value;try{if(!Vt(s(),i))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Br(t,e){for(e&=~td,e&=~ll,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-Ut(e),n=1<<r;t[r]=-1,e&=~n}}function Of(t){if(re&6)throw Error(R(327));pi();var e=ma(t,0);if(!(e&1))return at(t,Te()),null;var r=ka(t,e);if(t.tag!==0&&r===2){var n=th(t);n!==0&&(e=n,r=Ph(t,n))}if(r===1)throw r=Gs,_n(t,0),Br(t,e),at(t,Te()),r;if(r===6)throw Error(R(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,un(t,nt,dr),at(t,Te()),null}function nd(t,e){var r=re;re|=1;try{return t(e)}finally{re=r,re===0&&(Ii=Te()+500,il&&nn())}}function In(t){Or!==null&&Or.tag===0&&!(re&6)&&pi();var e=re;re|=1;var r=Et.transition,n=ie;try{if(Et.transition=null,ie=1,t)return t()}finally{ie=n,Et.transition=r,re=e,!(re&6)&&nn()}}function id(){ct=oi.current,ue(oi)}function _n(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,Y_(r)),Ce!==null)for(r=Ce.return;r!==null;){var n=r;switch(Lc(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&xa();break;case 3:Ci(),ue(st),ue(qe),Wc();break;case 5:Xc(n);break;case 4:Ci();break;case 13:ue(me);break;case 19:ue(me);break;case 10:Hc(n.type._context);break;case 22:case 23:id()}r=r.return}if(Ne=t,Ce=t=Yr(t.current,null),ze=ct=e,Re=0,Gs=null,td=ll=bn=0,nt=ys=null,gn!==null){for(e=0;e<gn.length;e++)if(r=gn[e],n=r.interleaved,n!==null){r.interleaved=null;var i=n.next,s=r.pending;if(s!==null){var o=s.next;s.next=i,n.next=o}r.pending=n}gn=null}return t}function vy(t,e){do{var r=Ce;try{if(zc(),Zo.current=Pa,Ia){for(var n=ye.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Ia=!1}if(Cn=0,ke=Pe=ye=null,ms=!1,Os=0,ed.current=null,r===null||r.return===null){Re=1,Gs=e,Ce=null;break}e:{var s=t,o=r.return,a=r,l=e;if(e=ze,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,h=a,c=h.tag;if(!(h.mode&1)&&(c===0||c===11||c===15)){var d=h.alternate;d?(h.updateQueue=d.updateQueue,h.memoizedState=d.memoizedState,h.lanes=d.lanes):(h.updateQueue=null,h.memoizedState=null)}var f=Sf(o);if(f!==null){f.flags&=-257,Af(f,o,a,s,e),f.mode&1&&Tf(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var v=new Set;v.add(l),e.updateQueue=v}else p.add(l);break e}else{if(!(e&1)){Tf(s,u,e),sd();break e}l=Error(R(426))}}else if(ce&&a.mode&1){var x=Sf(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Af(x,o,a,s,e),Uc(bi(l,a));break e}}s=l=bi(l,a),Re!==4&&(Re=2),ys===null?ys=[s]:ys.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=ty(s,l,e);gf(s,y);break e;case 1:a=l;var g=s.type,m=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||m!==null&&typeof m.componentDidCatch=="function"&&(Xr===null||!Xr.has(m)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=ry(s,a,e);gf(s,_);break e}}s=s.return}while(s!==null)}wy(r)}catch(w){e=w,Ce===r&&r!==null&&(Ce=r=r.return);continue}break}while(1)}function _y(){var t=Ra.current;return Ra.current=Pa,t===null?Pa:t}function sd(){(Re===0||Re===3||Re===2)&&(Re=4),Ne===null||!(bn&268435455)&&!(ll&268435455)||Br(Ne,ze)}function ka(t,e){var r=re;re|=2;var n=_y();(Ne!==t||ze!==e)&&(dr=null,_n(t,e));do try{_x();break}catch(i){vy(t,i)}while(1);if(zc(),re=r,Ra.current=n,Ce!==null)throw Error(R(261));return Ne=null,ze=0,Re}function _x(){for(;Ce!==null;)xy(Ce)}function xx(){for(;Ce!==null&&!j0();)xy(Ce)}function xy(t){var e=Ty(t.alternate,t,ct);t.memoizedProps=t.pendingProps,e===null?wy(t):Ce=e,ed.current=null}function wy(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=fx(r,e),r!==null){r.flags&=32767,Ce=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Re=6,Ce=null;return}}else if(r=dx(r,e,ct),r!==null){Ce=r;return}if(e=e.sibling,e!==null){Ce=e;return}Ce=e=t}while(e!==null);Re===0&&(Re=5)}function un(t,e,r){var n=ie,i=Et.transition;try{Et.transition=null,ie=1,wx(t,e,r,n)}finally{Et.transition=i,ie=n}return null}function wx(t,e,r,n){do pi();while(Or!==null);if(re&6)throw Error(R(327));r=t.finishedWork;var i=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(R(177));t.callbackNode=null,t.callbackPriority=0;var s=r.lanes|r.childLanes;if(t_(t,s),t===Ne&&(Ce=Ne=null,ze=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||xo||(xo=!0,Sy(pa,function(){return pi(),null})),s=(r.flags&15990)!==0,r.subtreeFlags&15990||s){s=Et.transition,Et.transition=null;var o=ie;ie=1;var a=re;re|=4,ed.current=null,mx(t,r),my(r,t),z_(ah),ga=!!oh,ah=oh=null,t.current=r,gx(r),X0(),re=a,ie=o,Et.transition=s}else t.current=r;if(xo&&(xo=!1,Or=t,Da=i),s=t.pendingLanes,s===0&&(Xr=null),K0(r.stateNode),at(t,Te()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)i=e[r],n(i.value,{componentStack:i.stack,digest:i.digest});if(Ma)throw Ma=!1,t=bh,bh=null,t;return Da&1&&t.tag!==0&&pi(),s=t.pendingLanes,s&1?t===Ih?vs++:(vs=0,Ih=t):vs=0,nn(),null}function pi(){if(Or!==null){var t=eg(Da),e=Et.transition,r=ie;try{if(Et.transition=null,ie=16>t?16:t,Or===null)var n=!1;else{if(t=Or,Or=null,Da=0,re&6)throw Error(R(331));var i=re;for(re|=4,U=t.current;U!==null;){var s=U,o=s.child;if(U.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(U=u;U!==null;){var h=U;switch(h.tag){case 0:case 11:case 15:gs(8,h,s)}var c=h.child;if(c!==null)c.return=h,U=c;else for(;U!==null;){h=U;var d=h.sibling,f=h.return;if(dy(h),h===u){U=null;break}if(d!==null){d.return=f,U=d;break}U=f}}}var p=s.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}U=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,U=o;else e:for(;U!==null;){if(s=U,s.flags&2048)switch(s.tag){case 0:case 11:case 15:gs(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,U=y;break e}U=s.return}}var g=t.current;for(U=g;U!==null;){o=U;var m=o.child;if(o.subtreeFlags&2064&&m!==null)m.return=o,U=m;else e:for(o=g;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:al(9,a)}}catch(w){we(a,a.return,w)}if(a===o){U=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,U=_;break e}U=a.return}}if(re=i,nn(),nr&&typeof nr.onPostCommitFiberRoot=="function")try{nr.onPostCommitFiberRoot(Ja,t)}catch{}n=!0}return n}finally{ie=r,Et.transition=e}}return!1}function Lf(t,e,r){e=bi(r,e),e=ty(t,e,1),t=jr(t,e,1),e=Je(),t!==null&&(Ys(t,1,e),at(t,e))}function we(t,e,r){if(t.tag===3)Lf(t,t,r);else for(;e!==null;){if(e.tag===3){Lf(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Xr===null||!Xr.has(n))){t=bi(r,t),t=ry(e,t,1),e=jr(e,t,1),t=Je(),e!==null&&(Ys(e,1,t),at(e,t));break}}e=e.return}}function Ex(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=Je(),t.pingedLanes|=t.suspendedLanes&r,Ne===t&&(ze&r)===r&&(Re===4||Re===3&&(ze&130023424)===ze&&500>Te()-rd?_n(t,0):td|=r),at(t,e)}function Ey(t,e){e===0&&(t.mode&1?(e=uo,uo<<=1,!(uo&130023424)&&(uo=4194304)):e=1);var r=Je();t=Tr(t,e),t!==null&&(Ys(t,e,r),at(t,r))}function Tx(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),Ey(t,r)}function Sx(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(r=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(R(314))}n!==null&&n.delete(e),Ey(t,r)}var Ty;Ty=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||st.current)it=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return it=!1,cx(t,e,r);it=!!(t.flags&131072)}else it=!1,ce&&e.flags&1048576&&Cg(e,Ta,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;ea(t,e),t=e.pendingProps;var i=Ti(e,qe.current);fi(e,r),i=Kc(null,e,n,t,i,r);var s=qc();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ot(n)?(s=!0,wa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vc(e),i.updater=sl,e.stateNode=i,i._reactInternals=e,gh(e,n,t,r),e=_h(null,e,n,!0,s,r)):(e.tag=0,ce&&s&&Oc(e),Ze(null,e,i,r),e=e.child),e;case 16:n=e.elementType;e:{switch(ea(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=Cx(n),t=Dt(n,t),i){case 0:e=vh(null,e,n,t,r);break e;case 1:e=If(null,e,n,t,r);break e;case 11:e=Cf(null,e,n,t,r);break e;case 14:e=bf(null,e,n,Dt(n.type,t),r);break e}throw Error(R(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),vh(t,e,n,i,r);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),If(t,e,n,i,r);case 3:e:{if(oy(e),t===null)throw Error(R(387));n=e.pendingProps,s=e.memoizedState,i=s.element,Rg(t,e),Ca(e,n,null,r);var o=e.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=bi(Error(R(423)),e),e=Pf(t,e,n,r,i);break e}else if(n!==i){i=bi(Error(R(424)),e),e=Pf(t,e,n,r,i);break e}else for(dt=Vr(e.stateNode.containerInfo.firstChild),ft=e,ce=!0,Nt=null,r=Bg(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Si(),n===i){e=Sr(t,e,r);break e}Ze(t,e,n,r)}e=e.child}return e;case 5:return Ng(e),t===null&&fh(e),n=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,lh(n,i)?o=null:s!==null&&lh(n,s)&&(e.flags|=32),sy(t,e),Ze(t,e,o,r),e.child;case 6:return t===null&&fh(e),null;case 13:return ay(t,e,r);case 4:return jc(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Ai(e,null,n,r):Ze(t,e,n,r),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),Cf(t,e,n,i,r);case 7:return Ze(t,e,e.pendingProps,r),e.child;case 8:return Ze(t,e,e.pendingProps.children,r),e.child;case 12:return Ze(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ae(Sa,n._currentValue),n._currentValue=o,s!==null)if(Vt(s.value,o)){if(s.children===i.children&&!st.current){e=Sr(t,e,r);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=_r(-1,r&-r),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?l.next=l:(l.next=h.next,h.next=l),u.pending=l}}s.lanes|=r,l=s.alternate,l!==null&&(l.lanes|=r),ph(s.return,r,e),a.lanes|=r;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(R(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),ph(o,r,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ze(t,e,i.children,r),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,fi(e,r),i=Tt(i),n=n(i),e.flags|=1,Ze(t,e,n,r),e.child;case 14:return n=e.type,i=Dt(n,e.pendingProps),i=Dt(n.type,i),bf(t,e,n,i,r);case 15:return ny(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Dt(n,i),ea(t,e),e.tag=1,ot(n)?(t=!0,wa(e)):t=!1,fi(e,r),Dg(e,n,i),gh(e,n,i,r),_h(null,e,n,!0,t,r);case 19:return ly(t,e,r);case 22:return iy(t,e,r)}throw Error(R(156,e.tag))};function Sy(t,e){return qm(t,e)}function Ax(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _t(t,e,r,n){return new Ax(t,e,r,n)}function od(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Cx(t){if(typeof t=="function")return od(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Ac)return 11;if(t===Cc)return 14}return 2}function Yr(t,e){var r=t.alternate;return r===null?(r=_t(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function na(t,e,r,n,i,s){var o=2;if(n=t,typeof t=="function")od(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case qn:return xn(r.children,i,s,e);case Sc:o=8,i|=8;break;case Gu:return t=_t(12,r,e,i|2),t.elementType=Gu,t.lanes=s,t;case zu:return t=_t(13,r,e,i),t.elementType=zu,t.lanes=s,t;case Hu:return t=_t(19,r,e,i),t.elementType=Hu,t.lanes=s,t;case km:return ul(r,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Mm:o=10;break e;case Dm:o=9;break e;case Ac:o=11;break e;case Cc:o=14;break e;case Rr:o=16,n=null;break e}throw Error(R(130,t==null?t:typeof t,""))}return e=_t(o,r,e,i),e.elementType=t,e.type=n,e.lanes=s,e}function xn(t,e,r,n){return t=_t(7,t,n,e),t.lanes=r,t}function ul(t,e,r,n){return t=_t(22,t,n,e),t.elementType=km,t.lanes=r,t.stateNode={isHidden:!1},t}function Jl(t,e,r){return t=_t(6,t,null,e),t.lanes=r,t}function eu(t,e,r){return e=_t(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function bx(t,e,r,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bl(0),this.expirationTimes=Bl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bl(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ad(t,e,r,n,i,s,o,a,l){return t=new bx(t,e,r,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_t(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vc(s),t}function Ix(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Kn,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function Ay(t){if(!t)return Qr;t=t._reactInternals;e:{if(kn(t)!==t||t.tag!==1)throw Error(R(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ot(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(R(171))}if(t.tag===1){var r=t.type;if(ot(r))return Sg(t,r,e)}return e}function Cy(t,e,r,n,i,s,o,a,l){return t=ad(r,n,!0,t,i,s,o,a,l),t.context=Ay(null),r=t.current,n=Je(),i=Wr(r),s=_r(n,i),s.callback=e??null,jr(r,s,i),t.current.lanes=i,Ys(t,i,n),at(t,n),t}function hl(t,e,r,n){var i=e.current,s=Je(),o=Wr(i);return r=Ay(r),e.context===null?e.context=r:e.pendingContext=r,e=_r(s,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=jr(i,e,o),t!==null&&(Gt(t,i,o,s),Qo(t,i,o)),o}function Ba(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Uf(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function ld(t,e){Uf(t,e),(t=t.alternate)&&Uf(t,e)}function Px(){return null}var by=typeof reportError=="function"?reportError:function(t){console.error(t)};function ud(t){this._internalRoot=t}cl.prototype.render=ud.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(R(409));hl(t,e,null,null)};cl.prototype.unmount=ud.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;In(function(){hl(null,t,null,null)}),e[Er]=null}};function cl(t){this._internalRoot=t}cl.prototype.unstable_scheduleHydration=function(t){if(t){var e=ng();t={blockedOn:null,target:t,priority:e};for(var r=0;r<kr.length&&e!==0&&e<kr[r].priority;r++);kr.splice(r,0,t),r===0&&sg(t)}};function hd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function dl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gf(){}function Rx(t,e,r,n,i){if(i){if(typeof n=="function"){var s=n;n=function(){var u=Ba(o);s.call(u)}}var o=Cy(e,n,t,0,null,!1,!1,"",Gf);return t._reactRootContainer=o,t[Er]=o.current,Ds(t.nodeType===8?t.parentNode:t),In(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var a=n;n=function(){var u=Ba(l);a.call(u)}}var l=ad(t,0,!1,null,null,!1,!1,"",Gf);return t._reactRootContainer=l,t[Er]=l.current,Ds(t.nodeType===8?t.parentNode:t),In(function(){hl(e,l,r,n)}),l}function fl(t,e,r,n,i){var s=r._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var l=Ba(o);a.call(l)}}hl(e,o,t,i)}else o=Rx(r,e,t,i,n);return Ba(o)}tg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=ns(e.pendingLanes);r!==0&&(Pc(e,r|1),at(e,Te()),!(re&6)&&(Ii=Te()+500,nn()))}break;case 13:In(function(){var n=Tr(t,1);if(n!==null){var i=Je();Gt(n,t,1,i)}}),ld(t,1)}};Rc=function(t){if(t.tag===13){var e=Tr(t,134217728);if(e!==null){var r=Je();Gt(e,t,134217728,r)}ld(t,134217728)}};rg=function(t){if(t.tag===13){var e=Wr(t),r=Tr(t,e);if(r!==null){var n=Je();Gt(r,t,e,n)}ld(t,e)}};ng=function(){return ie};ig=function(t,e){var r=ie;try{return ie=t,e()}finally{ie=r}};Zu=function(t,e,r){switch(e){case"input":if(ju(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var i=nl(n);if(!i)throw Error(R(90));Nm(n),ju(n,i)}}}break;case"textarea":Om(t,r);break;case"select":e=r.value,e!=null&&ui(t,!!r.multiple,e,!1)}};Vm=nd;jm=In;var Mx={usingClientEntryPoint:!1,Events:[qs,ei,nl,Hm,$m,nd]},Yi={findFiberByHostInstance:mn,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},Dx={bundleType:Yi.bundleType,version:Yi.version,rendererPackageName:Yi.rendererPackageName,rendererConfig:Yi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Cr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ym(t),t===null?null:t.stateNode},findFiberByHostInstance:Yi.findFiberByHostInstance||Px,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wo.isDisabled&&wo.supportsFiber)try{Ja=wo.inject(Dx),nr=wo}catch{}}mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mx;mt.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!hd(e))throw Error(R(200));return Ix(t,e,null,r)};mt.createRoot=function(t,e){if(!hd(t))throw Error(R(299));var r=!1,n="",i=by;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ad(t,1,!1,null,null,r,!1,n,i),t[Er]=e.current,Ds(t.nodeType===8?t.parentNode:t),new ud(e)};mt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(R(188)):(t=Object.keys(t).join(","),Error(R(268,t)));return t=Ym(e),t=t===null?null:t.stateNode,t};mt.flushSync=function(t){return In(t)};mt.hydrate=function(t,e,r){if(!dl(e))throw Error(R(200));return fl(null,t,e,!0,r)};mt.hydrateRoot=function(t,e,r){if(!hd(t))throw Error(R(405));var n=r!=null&&r.hydratedSources||null,i=!1,s="",o=by;if(r!=null&&(r.unstable_strictMode===!0&&(i=!0),r.identifierPrefix!==void 0&&(s=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=Cy(e,null,t,1,r??null,i,!1,s,o),t[Er]=e.current,Ds(t),n)for(t=0;t<n.length;t++)r=n[t],i=r._getVersion,i=i(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,i]:e.mutableSourceEagerHydrationData.push(r,i);return new cl(e)};mt.render=function(t,e,r){if(!dl(e))throw Error(R(200));return fl(null,t,e,!1,r)};mt.unmountComponentAtNode=function(t){if(!dl(t))throw Error(R(40));return t._reactRootContainer?(In(function(){fl(null,null,t,!1,function(){t._reactRootContainer=null,t[Er]=null})}),!0):!1};mt.unstable_batchedUpdates=nd;mt.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!dl(r))throw Error(R(200));if(t==null||t._reactInternals===void 0)throw Error(R(38));return fl(t,e,r,!1,n)};mt.version="18.2.0-next-9e3b772b8-20220608";function Iy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Iy)}catch(t){console.error(t)}}Iy(),Cm.exports=mt;var kx=Cm.exports,zf=kx;Lu.createRoot=zf.createRoot,Lu.hydrateRoot=zf.hydrateRoot;var Bn=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(Bn||{}),Py=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(Py||{}),Mh=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Mh||{}),X=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(X||{}),rr=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(rr||{}),k=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(k||{}),mi=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(mi||{}),j=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(j||{}),Dh=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(Dh||{}),yr=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(yr||{}),Kr=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Kr||{}),ar=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(ar||{}),jt=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(jt||{}),Jt=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Jt||{}),cd=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(cd||{}),xt=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(xt||{}),Ie=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(Ie||{}),Ae=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(Ae||{}),sr=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(sr||{});const Bx={createCanvas:(t,e)=>{const r=document.createElement("canvas");return r.width=t,r.height=e,r},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},N={ADAPTER:Bx,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var tu=/iPhone/i,Hf=/iPod/i,$f=/iPad/i,Vf=/\biOS-universal(?:.+)Mac\b/i,ru=/\bAndroid(?:.+)Mobile\b/i,jf=/Android/i,Ln=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Eo=/Silk/i,ur=/Windows Phone/i,Xf=/\bWindows(?:.+)ARM\b/i,Wf=/BlackBerry/i,Yf=/BB10/i,Kf=/Opera Mini/i,qf=/\b(CriOS|Chrome)(?:.+)Mobile/i,Qf=/Mobile(?:.+)Firefox\b/i,Zf=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function Nx(t){return function(e){return e.test(t)}}function Jf(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var r=e.userAgent,n=r.split("[FBAN");typeof n[1]<"u"&&(r=n[0]),n=r.split("Twitter"),typeof n[1]<"u"&&(r=n[0]);var i=Nx(r),s={apple:{phone:i(tu)&&!i(ur),ipod:i(Hf),tablet:!i(tu)&&(i($f)||Zf(e))&&!i(ur),universal:i(Vf),device:(i(tu)||i(Hf)||i($f)||i(Vf)||Zf(e))&&!i(ur)},amazon:{phone:i(Ln),tablet:!i(Ln)&&i(Eo),device:i(Ln)||i(Eo)},android:{phone:!i(ur)&&i(Ln)||!i(ur)&&i(ru),tablet:!i(ur)&&!i(Ln)&&!i(ru)&&(i(Eo)||i(jf)),device:!i(ur)&&(i(Ln)||i(Eo)||i(ru)||i(jf))||i(/\bokhttp\b/i)},windows:{phone:i(ur),tablet:i(Xf),device:i(ur)||i(Xf)},other:{blackberry:i(Wf),blackberry10:i(Yf),opera:i(Kf),firefox:i(Qf),chrome:i(qf),device:i(Wf)||i(Yf)||i(Kf)||i(Qf)||i(qf)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Fx=Jf.default??Jf,vr=Fx(globalThis.navigator);N.RETINA_PREFIX=/@([0-9\.]+)x/;N.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var Ry={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(l,u,h){this.fn=l,this.context=u,this.once=h||!1}function s(l,u,h,c,d){if(typeof h!="function")throw new TypeError("The listener must be a function");var f=new i(h,c||l,d),p=r?r+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new n:delete l._events[u]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],h,c;if(this._eventsCount===0)return u;for(c in h=this._events)e.call(h,c)&&u.push(r?c.slice(1):c);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(h)):u},a.prototype.listeners=function(u){var h=r?r+u:u,c=this._events[h];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,p=new Array(f);d<f;d++)p[d]=c[d].fn;return p},a.prototype.listenerCount=function(u){var h=r?r+u:u,c=this._events[h];return c?c.fn?1:c.length:0},a.prototype.emit=function(u,h,c,d,f,p){var v=r?r+u:u;if(!this._events[v])return!1;var x=this._events[v],y=arguments.length,g,m;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),y){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,h),!0;case 3:return x.fn.call(x.context,h,c),!0;case 4:return x.fn.call(x.context,h,c,d),!0;case 5:return x.fn.call(x.context,h,c,d,f),!0;case 6:return x.fn.call(x.context,h,c,d,f,p),!0}for(m=1,g=new Array(y-1);m<y;m++)g[m-1]=arguments[m];x.fn.apply(x.context,g)}else{var _=x.length,w;for(m=0;m<_;m++)switch(x[m].once&&this.removeListener(u,x[m].fn,void 0,!0),y){case 1:x[m].fn.call(x[m].context);break;case 2:x[m].fn.call(x[m].context,h);break;case 3:x[m].fn.call(x[m].context,h,c);break;case 4:x[m].fn.call(x[m].context,h,c,d);break;default:if(!g)for(w=1,g=new Array(y-1);w<y;w++)g[w-1]=arguments[w];x[m].fn.apply(x[m].context,g)}}return!0},a.prototype.on=function(u,h,c){return s(this,u,h,c,!1)},a.prototype.once=function(u,h,c){return s(this,u,h,c,!0)},a.prototype.removeListener=function(u,h,c,d){var f=r?r+u:u;if(!this._events[f])return this;if(!h)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===h&&(!d||p.once)&&(!c||p.context===c)&&o(this,f);else{for(var v=0,x=[],y=p.length;v<y;v++)(p[v].fn!==h||d&&!p[v].once||c&&p[v].context!==c)&&x.push(p[v]);x.length?this._events[f]=x.length===1?x[0]:x:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var h;return u?(h=r?r+u:u,this._events[h]&&o(this,h)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=r,a.EventEmitter=a,t.exports=a})(Ry);var Ox=Ry.exports;const Zs=gc(Ox);var dd={exports:{}};dd.exports=pl;dd.exports.default=pl;function pl(t,e,r){r=r||2;var n=e&&e.length,i=n?e[0]*r:t.length,s=My(t,0,i,r,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,h,c,d,f;if(n&&(s=Hx(t,e,s,r)),t.length>80*r){a=u=t[0],l=h=t[1];for(var p=r;p<i;p+=r)c=t[p],d=t[p+1],c<a&&(a=c),d<l&&(l=d),c>u&&(u=c),d>h&&(h=d);f=Math.max(u-a,h-l),f=f!==0?32767/f:0}return zs(s,o,r,a,l,f,0),o}function My(t,e,r,n,i){var s,o;if(i===Nh(t,e,r,n)>0)for(s=e;s<r;s+=n)o=ep(s,t[s],t[s+1],o);else for(s=r-n;s>=e;s-=n)o=ep(s,t[s],t[s+1],o);return o&&ml(o,o.next)&&($s(o),o=o.next),o}function Pn(t,e){if(!t)return t;e||(e=t);var r=t,n;do if(n=!1,!r.steiner&&(ml(r,r.next)||ge(r.prev,r,r.next)===0)){if($s(r),r=e=r.prev,r===r.next)break;n=!0}else r=r.next;while(n||r!==e);return e}function zs(t,e,r,n,i,s,o){if(t){!o&&s&&Wx(t,n,i,s);for(var a=t,l,u;t.prev!==t.next;){if(l=t.prev,u=t.next,s?Ux(t,n,i,s):Lx(t)){e.push(l.i/r|0),e.push(t.i/r|0),e.push(u.i/r|0),$s(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=Gx(Pn(t),e,r),zs(t,e,r,n,i,s,2)):o===2&&zx(t,e,r,n,i,s):zs(Pn(t),e,r,n,i,s,1);break}}}}function Lx(t){var e=t.prev,r=t,n=t.next;if(ge(e,r,n)>=0)return!1;for(var i=e.x,s=r.x,o=n.x,a=e.y,l=r.y,u=n.y,h=i<s?i<o?i:o:s<o?s:o,c=a<l?a<u?a:u:l<u?l:u,d=i>s?i>o?i:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,p=n.next;p!==e;){if(p.x>=h&&p.x<=d&&p.y>=c&&p.y<=f&&ai(i,a,s,l,o,u,p.x,p.y)&&ge(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function Ux(t,e,r,n){var i=t.prev,s=t,o=t.next;if(ge(i,s,o)>=0)return!1;for(var a=i.x,l=s.x,u=o.x,h=i.y,c=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,p=h<c?h<d?h:d:c<d?c:d,v=a>l?a>u?a:u:l>u?l:u,x=h>c?h>d?h:d:c>d?c:d,y=kh(f,p,e,r,n),g=kh(v,x,e,r,n),m=t.prevZ,_=t.nextZ;m&&m.z>=y&&_&&_.z<=g;){if(m.x>=f&&m.x<=v&&m.y>=p&&m.y<=x&&m!==i&&m!==o&&ai(a,h,l,c,u,d,m.x,m.y)&&ge(m.prev,m,m.next)>=0||(m=m.prevZ,_.x>=f&&_.x<=v&&_.y>=p&&_.y<=x&&_!==i&&_!==o&&ai(a,h,l,c,u,d,_.x,_.y)&&ge(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;m&&m.z>=y;){if(m.x>=f&&m.x<=v&&m.y>=p&&m.y<=x&&m!==i&&m!==o&&ai(a,h,l,c,u,d,m.x,m.y)&&ge(m.prev,m,m.next)>=0)return!1;m=m.prevZ}for(;_&&_.z<=g;){if(_.x>=f&&_.x<=v&&_.y>=p&&_.y<=x&&_!==i&&_!==o&&ai(a,h,l,c,u,d,_.x,_.y)&&ge(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function Gx(t,e,r){var n=t;do{var i=n.prev,s=n.next.next;!ml(i,s)&&Dy(i,n,n.next,s)&&Hs(i,s)&&Hs(s,i)&&(e.push(i.i/r|0),e.push(n.i/r|0),e.push(s.i/r|0),$s(n),$s(n.next),n=t=s),n=n.next}while(n!==t);return Pn(n)}function zx(t,e,r,n,i,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&qx(o,a)){var l=ky(o,a);o=Pn(o,o.next),l=Pn(l,l.next),zs(o,e,r,n,i,s,0),zs(l,e,r,n,i,s,0);return}a=a.next}o=o.next}while(o!==t)}function Hx(t,e,r,n){var i=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*n,l=s<o-1?e[s+1]*n:t.length,u=My(t,a,l,n,!1),u===u.next&&(u.steiner=!0),i.push(Kx(u));for(i.sort($x),s=0;s<i.length;s++)r=Vx(i[s],r);return r}function $x(t,e){return t.x-e.x}function Vx(t,e){var r=jx(t,e);if(!r)return e;var n=ky(r,t);return Pn(n,n.next),Pn(r,r.next)}function jx(t,e){var r=e,n=t.x,i=t.y,s=-1/0,o;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var a=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s&&(s=a,o=r.x<r.next.x?r:r.next,a===n))return o}r=r.next}while(r!==e);if(!o)return null;var l=o,u=o.x,h=o.y,c=1/0,d;r=o;do n>=r.x&&r.x>=u&&n!==r.x&&ai(i<h?n:s,i,u,h,i<h?s:n,i,r.x,r.y)&&(d=Math.abs(i-r.y)/(n-r.x),Hs(r,t)&&(d<c||d===c&&(r.x>o.x||r.x===o.x&&Xx(o,r)))&&(o=r,c=d)),r=r.next;while(r!==l);return o}function Xx(t,e){return ge(t.prev,t,e.prev)<0&&ge(e.next,t,t.next)<0}function Wx(t,e,r,n){var i=t;do i.z===0&&(i.z=kh(i.x,i.y,e,r,n)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next;while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,Yx(i)}function Yx(t){var e,r,n,i,s,o,a,l,u=1;do{for(r=t,t=null,s=null,o=0;r;){for(o++,n=r,a=0,e=0;e<u&&(a++,n=n.nextZ,!!n);e++);for(l=u;a>0||l>0&&n;)a!==0&&(l===0||!n||r.z<=n.z)?(i=r,r=r.nextZ,a--):(i=n,n=n.nextZ,l--),s?s.nextZ=i:t=i,i.prevZ=s,s=i;r=n}s.nextZ=null,u*=2}while(o>1);return t}function kh(t,e,r,n,i){return t=(t-r)*i|0,e=(e-n)*i|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function Kx(t){var e=t,r=t;do(e.x<r.x||e.x===r.x&&e.y<r.y)&&(r=e),e=e.next;while(e!==t);return r}function ai(t,e,r,n,i,s,o,a){return(i-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(n-a)>=(r-o)*(e-a)&&(r-o)*(s-a)>=(i-o)*(n-a)}function qx(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Qx(t,e)&&(Hs(t,e)&&Hs(e,t)&&Zx(t,e)&&(ge(t.prev,t,e.prev)||ge(t,e.prev,e))||ml(t,e)&&ge(t.prev,t,t.next)>0&&ge(e.prev,e,e.next)>0)}function ge(t,e,r){return(e.y-t.y)*(r.x-e.x)-(e.x-t.x)*(r.y-e.y)}function ml(t,e){return t.x===e.x&&t.y===e.y}function Dy(t,e,r,n){var i=So(ge(t,e,r)),s=So(ge(t,e,n)),o=So(ge(r,n,t)),a=So(ge(r,n,e));return!!(i!==s&&o!==a||i===0&&To(t,r,e)||s===0&&To(t,n,e)||o===0&&To(r,t,n)||a===0&&To(r,e,n))}function To(t,e,r){return e.x<=Math.max(t.x,r.x)&&e.x>=Math.min(t.x,r.x)&&e.y<=Math.max(t.y,r.y)&&e.y>=Math.min(t.y,r.y)}function So(t){return t>0?1:t<0?-1:0}function Qx(t,e){var r=t;do{if(r.i!==t.i&&r.next.i!==t.i&&r.i!==e.i&&r.next.i!==e.i&&Dy(r,r.next,t,e))return!0;r=r.next}while(r!==t);return!1}function Hs(t,e){return ge(t.prev,t,t.next)<0?ge(t,e,t.next)>=0&&ge(t,t.prev,e)>=0:ge(t,e,t.prev)<0||ge(t,t.next,e)<0}function Zx(t,e){var r=t,n=!1,i=(t.x+e.x)/2,s=(t.y+e.y)/2;do r.y>s!=r.next.y>s&&r.next.y!==r.y&&i<(r.next.x-r.x)*(s-r.y)/(r.next.y-r.y)+r.x&&(n=!n),r=r.next;while(r!==t);return n}function ky(t,e){var r=new Bh(t.i,t.x,t.y),n=new Bh(e.i,e.x,e.y),i=t.next,s=e.prev;return t.next=e,e.prev=t,r.next=i,i.prev=r,n.next=r,r.prev=n,s.next=n,n.prev=s,n}function ep(t,e,r,n){var i=new Bh(t,e,r);return n?(i.next=n.next,i.prev=n,n.next.prev=i,n.next=i):(i.prev=i,i.next=i),i}function $s(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Bh(t,e,r){this.i=t,this.x=e,this.y=r,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}pl.deviation=function(t,e,r,n){var i=e&&e.length,s=i?e[0]*r:t.length,o=Math.abs(Nh(t,0,s,r));if(i)for(var a=0,l=e.length;a<l;a++){var u=e[a]*r,h=a<l-1?e[a+1]*r:t.length;o-=Math.abs(Nh(t,u,h,r))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*r,f=n[a+1]*r,p=n[a+2]*r;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function Nh(t,e,r,n){for(var i=0,s=e,o=r-n;s<r;s+=n)i+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return i}pl.flatten=function(t){for(var e=t[0][0].length,r={vertices:[],holes:[],dimensions:e},n=0,i=0;i<t.length;i++){for(var s=0;s<t[i].length;s++)for(var o=0;o<e;o++)r.vertices.push(t[i][s][o]);i>0&&(n+=t[i-1].length,r.holes.push(n))}return r};var Jx=dd.exports;const e1=gc(Jx);var Na={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */Na.exports;(function(t,e){(function(r){var n=e&&!e.nodeType&&e,i=t&&!t.nodeType&&t,s=typeof Il=="object"&&Il;(s.global===s||s.window===s||s.self===s)&&(r=s);var o,a=2147483647,l=36,u=1,h=26,c=38,d=700,f=72,p=128,v="-",x=/^xn--/,y=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,m={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-u,w=Math.floor,S=String.fromCharCode,T;function E(A){throw new RangeError(m[A])}function D(A,L){for(var V=A.length,te=[];V--;)te[V]=L(A[V]);return te}function I(A,L){var V=A.split("@"),te="";V.length>1&&(te=V[0]+"@",A=V[1]),A=A.replace(g,".");var ee=A.split("."),xe=D(ee,L).join(".");return te+xe}function M(A){for(var L=[],V=0,te=A.length,ee,xe;V<te;)ee=A.charCodeAt(V++),ee>=55296&&ee<=56319&&V<te?(xe=A.charCodeAt(V++),(xe&64512)==56320?L.push(((ee&1023)<<10)+(xe&1023)+65536):(L.push(ee),V--)):L.push(ee);return L}function B(A){return D(A,function(L){var V="";return L>65535&&(L-=65536,V+=S(L>>>10&1023|55296),L=56320|L&1023),V+=S(L),V}).join("")}function b(A){return A-48<10?A-22:A-65<26?A-65:A-97<26?A-97:l}function C(A,L){return A+22+75*(A<26)-((L!=0)<<5)}function W(A,L,V){var te=0;for(A=V?w(A/d):A>>1,A+=w(A/L);A>_*h>>1;te+=l)A=w(A/_);return w(te+(_+1)*A/(A+c))}function Y(A){var L=[],V=A.length,te,ee=0,xe=p,se=f,fe,$e,lt,Fe,he,Se,be,Xt,Wt;for(fe=A.lastIndexOf(v),fe<0&&(fe=0),$e=0;$e<fe;++$e)A.charCodeAt($e)>=128&&E("not-basic"),L.push(A.charCodeAt($e));for(lt=fe>0?fe+1:0;lt<V;){for(Fe=ee,he=1,Se=l;lt>=V&&E("invalid-input"),be=b(A.charCodeAt(lt++)),(be>=l||be>w((a-ee)/he))&&E("overflow"),ee+=be*he,Xt=Se<=se?u:Se>=se+h?h:Se-se,!(be<Xt);Se+=l)Wt=l-Xt,he>w(a/Wt)&&E("overflow"),he*=Wt;te=L.length+1,se=W(ee-Fe,te,Fe==0),w(ee/te)>a-xe&&E("overflow"),xe+=w(ee/te),ee%=te,L.splice(ee++,0,xe)}return B(L)}function O(A){var L,V,te,ee,xe,se,fe,$e,lt,Fe,he,Se=[],be,Xt,Wt,Gi;for(A=M(A),be=A.length,L=p,V=0,xe=f,se=0;se<be;++se)he=A[se],he<128&&Se.push(S(he));for(te=ee=Se.length,ee&&Se.push(v);te<be;){for(fe=a,se=0;se<be;++se)he=A[se],he>=L&&he<fe&&(fe=he);for(Xt=te+1,fe-L>w((a-V)/Xt)&&E("overflow"),V+=(fe-L)*Xt,L=fe,se=0;se<be;++se)if(he=A[se],he<L&&++V>a&&E("overflow"),he==L){for($e=V,lt=l;Fe=lt<=xe?u:lt>=xe+h?h:lt-xe,!($e<Fe);lt+=l)Gi=$e-Fe,Wt=l-Fe,Se.push(S(C(Fe+Gi%Wt,0))),$e=w(Gi/Wt);Se.push(S(C($e,0))),xe=W(V,Xt,te==ee),V=0,++te}++V,++L}return Se.join("")}function P(A){return I(A,function(L){return x.test(L)?Y(L.slice(4).toLowerCase()):L})}function G(A){return I(A,function(L){return y.test(L)?"xn--"+O(L):L})}if(o={version:"1.4.1",ucs2:{decode:M,encode:B},decode:Y,encode:O,toASCII:G,toUnicode:P},n&&i)if(t.exports==n)i.exports=o;else for(T in o)o.hasOwnProperty(T)&&(n[T]=o[T]);else r.punycode=o})(Il)})(Na,Na.exports);var t1=Na.exports,r1=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},r=Symbol("test"),n=Object(r);if(typeof r=="string"||Object.prototype.toString.call(r)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var i=42;e[r]=i;for(r in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var s=Object.getOwnPropertySymbols(e);if(s.length!==1||s[0]!==r||!Object.prototype.propertyIsEnumerable.call(e,r))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var o=Object.getOwnPropertyDescriptor(e,r);if(o.value!==i||o.enumerable!==!0)return!1}return!0},tp=typeof Symbol<"u"&&Symbol,n1=r1,i1=function(){return typeof tp!="function"||typeof Symbol!="function"||typeof tp("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:n1()},rp={foo:{}},s1=Object,o1=function(){return{__proto__:rp}.foo===rp.foo&&!({__proto__:null}instanceof s1)},a1="Function.prototype.bind called on incompatible ",nu=Array.prototype.slice,l1=Object.prototype.toString,u1="[object Function]",h1=function(e){var r=this;if(typeof r!="function"||l1.call(r)!==u1)throw new TypeError(a1+r);for(var n=nu.call(arguments,1),i,s=function(){if(this instanceof i){var h=r.apply(this,n.concat(nu.call(arguments)));return Object(h)===h?h:this}else return r.apply(e,n.concat(nu.call(arguments)))},o=Math.max(0,r.length-n.length),a=[],l=0;l<o;l++)a.push("$"+l);if(i=Function("binder","return function ("+a.join(",")+"){ return binder.apply(this,arguments); }")(s),r.prototype){var u=function(){};u.prototype=r.prototype,i.prototype=new u,u.prototype=null}return i},c1=h1,fd=Function.prototype.bind||c1,d1=fd,f1=d1.call(Function.call,Object.prototype.hasOwnProperty),Q,Pi=SyntaxError,By=Function,gi=TypeError,iu=function(t){try{return By('"use strict"; return ('+t+").constructor;")()}catch{}},wn=Object.getOwnPropertyDescriptor;if(wn)try{wn({},"")}catch{wn=null}var su=function(){throw new gi},p1=wn?function(){try{return arguments.callee,su}catch{try{return wn(arguments,"callee").get}catch{return su}}}():su,Un=i1(),m1=o1(),De=Object.getPrototypeOf||(m1?function(t){return t.__proto__}:null),Hn={},g1=typeof Uint8Array>"u"||!De?Q:De(Uint8Array),En={"%AggregateError%":typeof AggregateError>"u"?Q:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Q:ArrayBuffer,"%ArrayIteratorPrototype%":Un&&De?De([][Symbol.iterator]()):Q,"%AsyncFromSyncIteratorPrototype%":Q,"%AsyncFunction%":Hn,"%AsyncGenerator%":Hn,"%AsyncGeneratorFunction%":Hn,"%AsyncIteratorPrototype%":Hn,"%Atomics%":typeof Atomics>"u"?Q:Atomics,"%BigInt%":typeof BigInt>"u"?Q:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Q:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Q:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Q:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":Error,"%eval%":eval,"%EvalError%":EvalError,"%Float32Array%":typeof Float32Array>"u"?Q:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Q:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Q:FinalizationRegistry,"%Function%":By,"%GeneratorFunction%":Hn,"%Int8Array%":typeof Int8Array>"u"?Q:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Q:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Q:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":Un&&De?De(De([][Symbol.iterator]())):Q,"%JSON%":typeof JSON=="object"?JSON:Q,"%Map%":typeof Map>"u"?Q:Map,"%MapIteratorPrototype%":typeof Map>"u"||!Un||!De?Q:De(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Q:Promise,"%Proxy%":typeof Proxy>"u"?Q:Proxy,"%RangeError%":RangeError,"%ReferenceError%":ReferenceError,"%Reflect%":typeof Reflect>"u"?Q:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Q:Set,"%SetIteratorPrototype%":typeof Set>"u"||!Un||!De?Q:De(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Q:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":Un&&De?De(""[Symbol.iterator]()):Q,"%Symbol%":Un?Symbol:Q,"%SyntaxError%":Pi,"%ThrowTypeError%":p1,"%TypedArray%":g1,"%TypeError%":gi,"%Uint8Array%":typeof Uint8Array>"u"?Q:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Q:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Q:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Q:Uint32Array,"%URIError%":URIError,"%WeakMap%":typeof WeakMap>"u"?Q:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Q:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Q:WeakSet};if(De)try{null.error}catch(t){var y1=De(De(t));En["%Error.prototype%"]=y1}var v1=function t(e){var r;if(e==="%AsyncFunction%")r=iu("async function () {}");else if(e==="%GeneratorFunction%")r=iu("function* () {}");else if(e==="%AsyncGeneratorFunction%")r=iu("async function* () {}");else if(e==="%AsyncGenerator%"){var n=t("%AsyncGeneratorFunction%");n&&(r=n.prototype)}else if(e==="%AsyncIteratorPrototype%"){var i=t("%AsyncGenerator%");i&&De&&(r=De(i.prototype))}return En[e]=r,r},np={"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},Js=fd,Fa=f1,_1=Js.call(Function.call,Array.prototype.concat),x1=Js.call(Function.apply,Array.prototype.splice),ip=Js.call(Function.call,String.prototype.replace),Oa=Js.call(Function.call,String.prototype.slice),w1=Js.call(Function.call,RegExp.prototype.exec),E1=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,T1=/\\(\\)?/g,S1=function(e){var r=Oa(e,0,1),n=Oa(e,-1);if(r==="%"&&n!=="%")throw new Pi("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&r!=="%")throw new Pi("invalid intrinsic syntax, expected opening `%`");var i=[];return ip(e,E1,function(s,o,a,l){i[i.length]=a?ip(l,T1,"$1"):o||s}),i},A1=function(e,r){var n=e,i;if(Fa(np,n)&&(i=np[n],n="%"+i[0]+"%"),Fa(En,n)){var s=En[n];if(s===Hn&&(s=v1(n)),typeof s>"u"&&!r)throw new gi("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:i,name:n,value:s}}throw new Pi("intrinsic "+e+" does not exist!")},pd=function(e,r){if(typeof e!="string"||e.length===0)throw new gi("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof r!="boolean")throw new gi('"allowMissing" argument must be a boolean');if(w1(/^%?[^%]*%?$/,e)===null)throw new Pi("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=S1(e),i=n.length>0?n[0]:"",s=A1("%"+i+"%",r),o=s.name,a=s.value,l=!1,u=s.alias;u&&(i=u[0],x1(n,_1([0,1],u)));for(var h=1,c=!0;h<n.length;h+=1){var d=n[h],f=Oa(d,0,1),p=Oa(d,-1);if((f==='"'||f==="'"||f==="`"||p==='"'||p==="'"||p==="`")&&f!==p)throw new Pi("property names with quotes must have matching quotes");if((d==="constructor"||!c)&&(l=!0),i+="."+d,o="%"+i+"%",Fa(En,o))a=En[o];else if(a!=null){if(!(d in a)){if(!r)throw new gi("base intrinsic for "+e+" exists, but the property is not available.");return}if(wn&&h+1>=n.length){var v=wn(a,d);c=!!v,c&&"get"in v&&!("originalValue"in v.get)?a=v.get:a=a[d]}else c=Fa(a,d),a=a[d];c&&!l&&(En[o]=a)}}return a},Ny={exports:{}};(function(t){var e=fd,r=pd,n=r("%Function.prototype.apply%"),i=r("%Function.prototype.call%"),s=r("%Reflect.apply%",!0)||e.call(i,n),o=r("%Object.getOwnPropertyDescriptor%",!0),a=r("%Object.defineProperty%",!0),l=r("%Math.max%");if(a)try{a({},"a",{value:1})}catch{a=null}t.exports=function(c){var d=s(e,i,arguments);if(o&&a){var f=o(d,"length");f.configurable&&a(d,"length",{value:1+l(0,c.length-(arguments.length-1))})}return d};var u=function(){return s(e,n,arguments)};a?a(t.exports,"apply",{value:u}):t.exports.apply=u})(Ny);var C1=Ny.exports,Fy=pd,Oy=C1,b1=Oy(Fy("String.prototype.indexOf")),I1=function(e,r){var n=Fy(e,!!r);return typeof n=="function"&&b1(e,".prototype.")>-1?Oy(n):n};const P1={},R1=Object.freeze(Object.defineProperty({__proto__:null,default:P1},Symbol.toStringTag,{value:"Module"})),M1=a0(R1);var md=typeof Map=="function"&&Map.prototype,ou=Object.getOwnPropertyDescriptor&&md?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,La=md&&ou&&typeof ou.get=="function"?ou.get:null,sp=md&&Map.prototype.forEach,gd=typeof Set=="function"&&Set.prototype,au=Object.getOwnPropertyDescriptor&&gd?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,Ua=gd&&au&&typeof au.get=="function"?au.get:null,op=gd&&Set.prototype.forEach,D1=typeof WeakMap=="function"&&WeakMap.prototype,_s=D1?WeakMap.prototype.has:null,k1=typeof WeakSet=="function"&&WeakSet.prototype,xs=k1?WeakSet.prototype.has:null,B1=typeof WeakRef=="function"&&WeakRef.prototype,ap=B1?WeakRef.prototype.deref:null,N1=Boolean.prototype.valueOf,F1=Object.prototype.toString,O1=Function.prototype.toString,L1=String.prototype.match,yd=String.prototype.slice,Lr=String.prototype.replace,U1=String.prototype.toUpperCase,lp=String.prototype.toLowerCase,Ly=RegExp.prototype.test,up=Array.prototype.concat,er=Array.prototype.join,G1=Array.prototype.slice,hp=Math.floor,Fh=typeof BigInt=="function"?BigInt.prototype.valueOf:null,lu=Object.getOwnPropertySymbols,Oh=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="object",Qe=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===Ri||"symbol")?Symbol.toStringTag:null,Uy=Object.prototype.propertyIsEnumerable,cp=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(t){return t.__proto__}:null);function dp(t,e){if(t===1/0||t===-1/0||t!==t||t&&t>-1e3&&t<1e3||Ly.call(/e/,e))return e;var r=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof t=="number"){var n=t<0?-hp(-t):hp(t);if(n!==t){var i=String(n),s=yd.call(e,i.length+1);return Lr.call(i,r,"$&_")+"."+Lr.call(Lr.call(s,/([0-9]{3})/g,"$&_"),/_$/,"")}}return Lr.call(e,r,"$&_")}var Lh=M1,fp=Lh.custom,pp=zy(fp)?fp:null,z1=function t(e,r,n,i){var s=r||{};if(Dr(s,"quoteStyle")&&s.quoteStyle!=="single"&&s.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(Dr(s,"maxStringLength")&&(typeof s.maxStringLength=="number"?s.maxStringLength<0&&s.maxStringLength!==1/0:s.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var o=Dr(s,"customInspect")?s.customInspect:!0;if(typeof o!="boolean"&&o!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(Dr(s,"indent")&&s.indent!==null&&s.indent!=="	"&&!(parseInt(s.indent,10)===s.indent&&s.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(Dr(s,"numericSeparator")&&typeof s.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var a=s.numericSeparator;if(typeof e>"u")return"undefined";if(e===null)return"null";if(typeof e=="boolean")return e?"true":"false";if(typeof e=="string")return $y(e,s);if(typeof e=="number"){if(e===0)return 1/0/e>0?"0":"-0";var l=String(e);return a?dp(e,l):l}if(typeof e=="bigint"){var u=String(e)+"n";return a?dp(e,u):u}var h=typeof s.depth>"u"?5:s.depth;if(typeof n>"u"&&(n=0),n>=h&&h>0&&typeof e=="object")return Uh(e)?"[Array]":"[Object]";var c=sw(s,n);if(typeof i>"u")i=[];else if(Hy(i,e)>=0)return"[Circular]";function d(b,C,W){if(C&&(i=G1.call(i),i.push(C)),W){var Y={depth:s.depth};return Dr(s,"quoteStyle")&&(Y.quoteStyle=s.quoteStyle),t(b,Y,n+1,i)}return t(b,s,n+1,i)}if(typeof e=="function"&&!mp(e)){var f=q1(e),p=Ao(e,d);return"[Function"+(f?": "+f:" (anonymous)")+"]"+(p.length>0?" { "+er.call(p,", ")+" }":"")}if(zy(e)){var v=Ri?Lr.call(String(e),/^(Symbol\(.*\))_[^)]*$/,"$1"):Oh.call(e);return typeof e=="object"&&!Ri?Ki(v):v}if(rw(e)){for(var x="<"+lp.call(String(e.nodeName)),y=e.attributes||[],g=0;g<y.length;g++)x+=" "+y[g].name+"="+Gy(H1(y[g].value),"double",s);return x+=">",e.childNodes&&e.childNodes.length&&(x+="..."),x+="</"+lp.call(String(e.nodeName))+">",x}if(Uh(e)){if(e.length===0)return"[]";var m=Ao(e,d);return c&&!iw(m)?"["+Gh(m,c)+"]":"[ "+er.call(m,", ")+" ]"}if(V1(e)){var _=Ao(e,d);return!("cause"in Error.prototype)&&"cause"in e&&!Uy.call(e,"cause")?"{ ["+String(e)+"] "+er.call(up.call("[cause]: "+d(e.cause),_),", ")+" }":_.length===0?"["+String(e)+"]":"{ ["+String(e)+"] "+er.call(_,", ")+" }"}if(typeof e=="object"&&o){if(pp&&typeof e[pp]=="function"&&Lh)return Lh(e,{depth:h-n});if(o!=="symbol"&&typeof e.inspect=="function")return e.inspect()}if(Q1(e)){var w=[];return sp&&sp.call(e,function(b,C){w.push(d(C,e,!0)+" => "+d(b,e))}),gp("Map",La.call(e),w,c)}if(ew(e)){var S=[];return op&&op.call(e,function(b){S.push(d(b,e))}),gp("Set",Ua.call(e),S,c)}if(Z1(e))return uu("WeakMap");if(tw(e))return uu("WeakSet");if(J1(e))return uu("WeakRef");if(X1(e))return Ki(d(Number(e)));if(Y1(e))return Ki(d(Fh.call(e)));if(W1(e))return Ki(N1.call(e));if(j1(e))return Ki(d(String(e)));if(!$1(e)&&!mp(e)){var T=Ao(e,d),E=cp?cp(e)===Object.prototype:e instanceof Object||e.constructor===Object,D=e instanceof Object?"":"null prototype",I=!E&&Qe&&Object(e)===e&&Qe in e?yd.call(sn(e),8,-1):D?"Object":"",M=E||typeof e.constructor!="function"?"":e.constructor.name?e.constructor.name+" ":"",B=M+(I||D?"["+er.call(up.call([],I||[],D||[]),": ")+"] ":"");return T.length===0?B+"{}":c?B+"{"+Gh(T,c)+"}":B+"{ "+er.call(T,", ")+" }"}return String(e)};function Gy(t,e,r){var n=(r.quoteStyle||e)==="double"?'"':"'";return n+t+n}function H1(t){return Lr.call(String(t),/"/g,"&quot;")}function Uh(t){return sn(t)==="[object Array]"&&(!Qe||!(typeof t=="object"&&Qe in t))}function $1(t){return sn(t)==="[object Date]"&&(!Qe||!(typeof t=="object"&&Qe in t))}function mp(t){return sn(t)==="[object RegExp]"&&(!Qe||!(typeof t=="object"&&Qe in t))}function V1(t){return sn(t)==="[object Error]"&&(!Qe||!(typeof t=="object"&&Qe in t))}function j1(t){return sn(t)==="[object String]"&&(!Qe||!(typeof t=="object"&&Qe in t))}function X1(t){return sn(t)==="[object Number]"&&(!Qe||!(typeof t=="object"&&Qe in t))}function W1(t){return sn(t)==="[object Boolean]"&&(!Qe||!(typeof t=="object"&&Qe in t))}function zy(t){if(Ri)return t&&typeof t=="object"&&t instanceof Symbol;if(typeof t=="symbol")return!0;if(!t||typeof t!="object"||!Oh)return!1;try{return Oh.call(t),!0}catch{}return!1}function Y1(t){if(!t||typeof t!="object"||!Fh)return!1;try{return Fh.call(t),!0}catch{}return!1}var K1=Object.prototype.hasOwnProperty||function(t){return t in this};function Dr(t,e){return K1.call(t,e)}function sn(t){return F1.call(t)}function q1(t){if(t.name)return t.name;var e=L1.call(O1.call(t),/^function\s*([\w$]+)/);return e?e[1]:null}function Hy(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}function Q1(t){if(!La||!t||typeof t!="object")return!1;try{La.call(t);try{Ua.call(t)}catch{return!0}return t instanceof Map}catch{}return!1}function Z1(t){if(!_s||!t||typeof t!="object")return!1;try{_s.call(t,_s);try{xs.call(t,xs)}catch{return!0}return t instanceof WeakMap}catch{}return!1}function J1(t){if(!ap||!t||typeof t!="object")return!1;try{return ap.call(t),!0}catch{}return!1}function ew(t){if(!Ua||!t||typeof t!="object")return!1;try{Ua.call(t);try{La.call(t)}catch{return!0}return t instanceof Set}catch{}return!1}function tw(t){if(!xs||!t||typeof t!="object")return!1;try{xs.call(t,xs);try{_s.call(t,_s)}catch{return!0}return t instanceof WeakSet}catch{}return!1}function rw(t){return!t||typeof t!="object"?!1:typeof HTMLElement<"u"&&t instanceof HTMLElement?!0:typeof t.nodeName=="string"&&typeof t.getAttribute=="function"}function $y(t,e){if(t.length>e.maxStringLength){var r=t.length-e.maxStringLength,n="... "+r+" more character"+(r>1?"s":"");return $y(yd.call(t,0,e.maxStringLength),e)+n}var i=Lr.call(Lr.call(t,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,nw);return Gy(i,"single",e)}function nw(t){var e=t.charCodeAt(0),r={8:"b",9:"t",10:"n",12:"f",13:"r"}[e];return r?"\\"+r:"\\x"+(e<16?"0":"")+U1.call(e.toString(16))}function Ki(t){return"Object("+t+")"}function uu(t){return t+" { ? }"}function gp(t,e,r,n){var i=n?Gh(r,n):er.call(r,", ");return t+" ("+e+") {"+i+"}"}function iw(t){for(var e=0;e<t.length;e++)if(Hy(t[e],`
`)>=0)return!1;return!0}function sw(t,e){var r;if(t.indent==="	")r="	";else if(typeof t.indent=="number"&&t.indent>0)r=er.call(Array(t.indent+1)," ");else return null;return{base:r,prev:er.call(Array(e+1),r)}}function Gh(t,e){if(t.length===0)return"";var r=`
`+e.prev+e.base;return r+er.call(t,","+r)+`
`+e.prev}function Ao(t,e){var r=Uh(t),n=[];if(r){n.length=t.length;for(var i=0;i<t.length;i++)n[i]=Dr(t,i)?e(t[i],t):""}var s=typeof lu=="function"?lu(t):[],o;if(Ri){o={};for(var a=0;a<s.length;a++)o["$"+s[a]]=s[a]}for(var l in t)Dr(t,l)&&(r&&String(Number(l))===l&&l<t.length||Ri&&o["$"+l]instanceof Symbol||(Ly.call(/[^\w$]/,l)?n.push(e(l,t)+": "+e(t[l],t)):n.push(l+": "+e(t[l],t))));if(typeof lu=="function")for(var u=0;u<s.length;u++)Uy.call(t,s[u])&&n.push("["+e(s[u])+"]: "+e(t[s[u]],t));return n}var vd=pd,Oi=I1,ow=z1,aw=vd("%TypeError%"),Co=vd("%WeakMap%",!0),bo=vd("%Map%",!0),lw=Oi("WeakMap.prototype.get",!0),uw=Oi("WeakMap.prototype.set",!0),hw=Oi("WeakMap.prototype.has",!0),cw=Oi("Map.prototype.get",!0),dw=Oi("Map.prototype.set",!0),fw=Oi("Map.prototype.has",!0),_d=function(t,e){for(var r=t,n;(n=r.next)!==null;r=n)if(n.key===e)return r.next=n.next,n.next=t.next,t.next=n,n},pw=function(t,e){var r=_d(t,e);return r&&r.value},mw=function(t,e,r){var n=_d(t,e);n?n.value=r:t.next={key:e,next:t.next,value:r}},gw=function(t,e){return!!_d(t,e)},yw=function(){var e,r,n,i={assert:function(s){if(!i.has(s))throw new aw("Side channel does not contain "+ow(s))},get:function(s){if(Co&&s&&(typeof s=="object"||typeof s=="function")){if(e)return lw(e,s)}else if(bo){if(r)return cw(r,s)}else if(n)return pw(n,s)},has:function(s){if(Co&&s&&(typeof s=="object"||typeof s=="function")){if(e)return hw(e,s)}else if(bo){if(r)return fw(r,s)}else if(n)return gw(n,s);return!1},set:function(s,o){Co&&s&&(typeof s=="object"||typeof s=="function")?(e||(e=new Co),uw(e,s,o)):bo?(r||(r=new bo),dw(r,s,o)):(n||(n={key:{},next:null}),mw(n,s,o))}};return i},vw=String.prototype.replace,_w=/%20/g,hu={RFC1738:"RFC1738",RFC3986:"RFC3986"},xd={default:hu.RFC3986,formatters:{RFC1738:function(t){return vw.call(t,_w,"+")},RFC3986:function(t){return String(t)}},RFC1738:hu.RFC1738,RFC3986:hu.RFC3986},xw=xd,cu=Object.prototype.hasOwnProperty,pn=Array.isArray,Kt=function(){for(var t=[],e=0;e<256;++e)t.push("%"+((e<16?"0":"")+e.toString(16)).toUpperCase());return t}(),ww=function(e){for(;e.length>1;){var r=e.pop(),n=r.obj[r.prop];if(pn(n)){for(var i=[],s=0;s<n.length;++s)typeof n[s]<"u"&&i.push(n[s]);r.obj[r.prop]=i}}},Vy=function(e,r){for(var n=r&&r.plainObjects?Object.create(null):{},i=0;i<e.length;++i)typeof e[i]<"u"&&(n[i]=e[i]);return n},Ew=function t(e,r,n){if(!r)return e;if(typeof r!="object"){if(pn(e))e.push(r);else if(e&&typeof e=="object")(n&&(n.plainObjects||n.allowPrototypes)||!cu.call(Object.prototype,r))&&(e[r]=!0);else return[e,r];return e}if(!e||typeof e!="object")return[e].concat(r);var i=e;return pn(e)&&!pn(r)&&(i=Vy(e,n)),pn(e)&&pn(r)?(r.forEach(function(s,o){if(cu.call(e,o)){var a=e[o];a&&typeof a=="object"&&s&&typeof s=="object"?e[o]=t(a,s,n):e.push(s)}else e[o]=s}),e):Object.keys(r).reduce(function(s,o){var a=r[o];return cu.call(s,o)?s[o]=t(s[o],a,n):s[o]=a,s},i)},Tw=function(e,r){return Object.keys(r).reduce(function(n,i){return n[i]=r[i],n},e)},Sw=function(t,e,r){var n=t.replace(/\+/g," ");if(r==="iso-8859-1")return n.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(n)}catch{return n}},Aw=function(e,r,n,i,s){if(e.length===0)return e;var o=e;if(typeof e=="symbol"?o=Symbol.prototype.toString.call(e):typeof e!="string"&&(o=String(e)),n==="iso-8859-1")return escape(o).replace(/%u[0-9a-f]{4}/gi,function(h){return"%26%23"+parseInt(h.slice(2),16)+"%3B"});for(var a="",l=0;l<o.length;++l){var u=o.charCodeAt(l);if(u===45||u===46||u===95||u===126||u>=48&&u<=57||u>=65&&u<=90||u>=97&&u<=122||s===xw.RFC1738&&(u===40||u===41)){a+=o.charAt(l);continue}if(u<128){a=a+Kt[u];continue}if(u<2048){a=a+(Kt[192|u>>6]+Kt[128|u&63]);continue}if(u<55296||u>=57344){a=a+(Kt[224|u>>12]+Kt[128|u>>6&63]+Kt[128|u&63]);continue}l+=1,u=65536+((u&1023)<<10|o.charCodeAt(l)&1023),a+=Kt[240|u>>18]+Kt[128|u>>12&63]+Kt[128|u>>6&63]+Kt[128|u&63]}return a},Cw=function(e){for(var r=[{obj:{o:e},prop:"o"}],n=[],i=0;i<r.length;++i)for(var s=r[i],o=s.obj[s.prop],a=Object.keys(o),l=0;l<a.length;++l){var u=a[l],h=o[u];typeof h=="object"&&h!==null&&n.indexOf(h)===-1&&(r.push({obj:o,prop:u}),n.push(h))}return ww(r),e},bw=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},Iw=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},Pw=function(e,r){return[].concat(e,r)},Rw=function(e,r){if(pn(e)){for(var n=[],i=0;i<e.length;i+=1)n.push(r(e[i]));return n}return r(e)},jy={arrayToObject:Vy,assign:Tw,combine:Pw,compact:Cw,decode:Sw,encode:Aw,isBuffer:Iw,isRegExp:bw,maybeMap:Rw,merge:Ew},Xy=yw,ia=jy,ws=xd,Mw=Object.prototype.hasOwnProperty,yp={brackets:function(e){return e+"[]"},comma:"comma",indices:function(e,r){return e+"["+r+"]"},repeat:function(e){return e}},pr=Array.isArray,Dw=Array.prototype.push,Wy=function(t,e){Dw.apply(t,pr(e)?e:[e])},kw=Date.prototype.toISOString,vp=ws.default,Xe={addQueryPrefix:!1,allowDots:!1,charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encoder:ia.encode,encodeValuesOnly:!1,format:vp,formatter:ws.formatters[vp],indices:!1,serializeDate:function(e){return kw.call(e)},skipNulls:!1,strictNullHandling:!1},Bw=function(e){return typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="symbol"||typeof e=="bigint"},du={},Nw=function t(e,r,n,i,s,o,a,l,u,h,c,d,f,p,v,x){for(var y=e,g=x,m=0,_=!1;(g=g.get(du))!==void 0&&!_;){var w=g.get(e);if(m+=1,typeof w<"u"){if(w===m)throw new RangeError("Cyclic object value");_=!0}typeof g.get(du)>"u"&&(m=0)}if(typeof l=="function"?y=l(r,y):y instanceof Date?y=c(y):n==="comma"&&pr(y)&&(y=ia.maybeMap(y,function(Y){return Y instanceof Date?c(Y):Y})),y===null){if(s)return a&&!p?a(r,Xe.encoder,v,"key",d):r;y=""}if(Bw(y)||ia.isBuffer(y)){if(a){var S=p?r:a(r,Xe.encoder,v,"key",d);return[f(S)+"="+f(a(y,Xe.encoder,v,"value",d))]}return[f(r)+"="+f(String(y))]}var T=[];if(typeof y>"u")return T;var E;if(n==="comma"&&pr(y))p&&a&&(y=ia.maybeMap(y,a)),E=[{value:y.length>0?y.join(",")||null:void 0}];else if(pr(l))E=l;else{var D=Object.keys(y);E=u?D.sort(u):D}for(var I=i&&pr(y)&&y.length===1?r+"[]":r,M=0;M<E.length;++M){var B=E[M],b=typeof B=="object"&&typeof B.value<"u"?B.value:y[B];if(!(o&&b===null)){var C=pr(y)?typeof n=="function"?n(I,B):I:I+(h?"."+B:"["+B+"]");x.set(e,m);var W=Xy();W.set(du,x),Wy(T,t(b,C,n,i,s,o,n==="comma"&&p&&pr(y)?null:a,l,u,h,c,d,f,p,v,W))}}return T},Fw=function(e){if(!e)return Xe;if(e.encoder!==null&&typeof e.encoder<"u"&&typeof e.encoder!="function")throw new TypeError("Encoder has to be a function.");var r=e.charset||Xe.charset;if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var n=ws.default;if(typeof e.format<"u"){if(!Mw.call(ws.formatters,e.format))throw new TypeError("Unknown format option provided.");n=e.format}var i=ws.formatters[n],s=Xe.filter;return(typeof e.filter=="function"||pr(e.filter))&&(s=e.filter),{addQueryPrefix:typeof e.addQueryPrefix=="boolean"?e.addQueryPrefix:Xe.addQueryPrefix,allowDots:typeof e.allowDots>"u"?Xe.allowDots:!!e.allowDots,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Xe.charsetSentinel,delimiter:typeof e.delimiter>"u"?Xe.delimiter:e.delimiter,encode:typeof e.encode=="boolean"?e.encode:Xe.encode,encoder:typeof e.encoder=="function"?e.encoder:Xe.encoder,encodeValuesOnly:typeof e.encodeValuesOnly=="boolean"?e.encodeValuesOnly:Xe.encodeValuesOnly,filter:s,format:n,formatter:i,serializeDate:typeof e.serializeDate=="function"?e.serializeDate:Xe.serializeDate,skipNulls:typeof e.skipNulls=="boolean"?e.skipNulls:Xe.skipNulls,sort:typeof e.sort=="function"?e.sort:null,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Xe.strictNullHandling}},Ow=function(t,e){var r=t,n=Fw(e),i,s;typeof n.filter=="function"?(s=n.filter,r=s("",r)):pr(n.filter)&&(s=n.filter,i=s);var o=[];if(typeof r!="object"||r===null)return"";var a;e&&e.arrayFormat in yp?a=e.arrayFormat:e&&"indices"in e?a=e.indices?"indices":"repeat":a="indices";var l=yp[a];if(e&&"commaRoundTrip"in e&&typeof e.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var u=l==="comma"&&e&&e.commaRoundTrip;i||(i=Object.keys(r)),n.sort&&i.sort(n.sort);for(var h=Xy(),c=0;c<i.length;++c){var d=i[c];n.skipNulls&&r[d]===null||Wy(o,Nw(r[d],d,l,u,n.strictNullHandling,n.skipNulls,n.encode?n.encoder:null,n.filter,n.sort,n.allowDots,n.serializeDate,n.format,n.formatter,n.encodeValuesOnly,n.charset,h))}var f=o.join(n.delimiter),p=n.addQueryPrefix===!0?"?":"";return n.charsetSentinel&&(n.charset==="iso-8859-1"?p+="utf8=%26%2310003%3B&":p+="utf8=%E2%9C%93&"),f.length>0?p+f:""},Mi=jy,zh=Object.prototype.hasOwnProperty,Lw=Array.isArray,Me={allowDots:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decoder:Mi.decode,delimiter:"&",depth:5,ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},Uw=function(t){return t.replace(/&#(\d+);/g,function(e,r){return String.fromCharCode(parseInt(r,10))})},Yy=function(t,e){return t&&typeof t=="string"&&e.comma&&t.indexOf(",")>-1?t.split(","):t},Gw="utf8=%26%2310003%3B",zw="utf8=%E2%9C%93",Hw=function(e,r){var n={__proto__:null},i=r.ignoreQueryPrefix?e.replace(/^\?/,""):e,s=r.parameterLimit===1/0?void 0:r.parameterLimit,o=i.split(r.delimiter,s),a=-1,l,u=r.charset;if(r.charsetSentinel)for(l=0;l<o.length;++l)o[l].indexOf("utf8=")===0&&(o[l]===zw?u="utf-8":o[l]===Gw&&(u="iso-8859-1"),a=l,l=o.length);for(l=0;l<o.length;++l)if(l!==a){var h=o[l],c=h.indexOf("]="),d=c===-1?h.indexOf("="):c+1,f,p;d===-1?(f=r.decoder(h,Me.decoder,u,"key"),p=r.strictNullHandling?null:""):(f=r.decoder(h.slice(0,d),Me.decoder,u,"key"),p=Mi.maybeMap(Yy(h.slice(d+1),r),function(v){return r.decoder(v,Me.decoder,u,"value")})),p&&r.interpretNumericEntities&&u==="iso-8859-1"&&(p=Uw(p)),h.indexOf("[]=")>-1&&(p=Lw(p)?[p]:p),zh.call(n,f)?n[f]=Mi.combine(n[f],p):n[f]=p}return n},$w=function(t,e,r,n){for(var i=n?e:Yy(e,r),s=t.length-1;s>=0;--s){var o,a=t[s];if(a==="[]"&&r.parseArrays)o=[].concat(i);else{o=r.plainObjects?Object.create(null):{};var l=a.charAt(0)==="["&&a.charAt(a.length-1)==="]"?a.slice(1,-1):a,u=parseInt(l,10);!r.parseArrays&&l===""?o={0:i}:!isNaN(u)&&a!==l&&String(u)===l&&u>=0&&r.parseArrays&&u<=r.arrayLimit?(o=[],o[u]=i):l!=="__proto__"&&(o[l]=i)}i=o}return i},Vw=function(e,r,n,i){if(e){var s=n.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/,a=/(\[[^[\]]*])/g,l=n.depth>0&&o.exec(s),u=l?s.slice(0,l.index):s,h=[];if(u){if(!n.plainObjects&&zh.call(Object.prototype,u)&&!n.allowPrototypes)return;h.push(u)}for(var c=0;n.depth>0&&(l=a.exec(s))!==null&&c<n.depth;){if(c+=1,!n.plainObjects&&zh.call(Object.prototype,l[1].slice(1,-1))&&!n.allowPrototypes)return;h.push(l[1])}return l&&h.push("["+s.slice(l.index)+"]"),$w(h,r,n,i)}},jw=function(e){if(!e)return Me;if(e.decoder!==null&&e.decoder!==void 0&&typeof e.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof e.charset<"u"&&e.charset!=="utf-8"&&e.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var r=typeof e.charset>"u"?Me.charset:e.charset;return{allowDots:typeof e.allowDots>"u"?Me.allowDots:!!e.allowDots,allowPrototypes:typeof e.allowPrototypes=="boolean"?e.allowPrototypes:Me.allowPrototypes,allowSparse:typeof e.allowSparse=="boolean"?e.allowSparse:Me.allowSparse,arrayLimit:typeof e.arrayLimit=="number"?e.arrayLimit:Me.arrayLimit,charset:r,charsetSentinel:typeof e.charsetSentinel=="boolean"?e.charsetSentinel:Me.charsetSentinel,comma:typeof e.comma=="boolean"?e.comma:Me.comma,decoder:typeof e.decoder=="function"?e.decoder:Me.decoder,delimiter:typeof e.delimiter=="string"||Mi.isRegExp(e.delimiter)?e.delimiter:Me.delimiter,depth:typeof e.depth=="number"||e.depth===!1?+e.depth:Me.depth,ignoreQueryPrefix:e.ignoreQueryPrefix===!0,interpretNumericEntities:typeof e.interpretNumericEntities=="boolean"?e.interpretNumericEntities:Me.interpretNumericEntities,parameterLimit:typeof e.parameterLimit=="number"?e.parameterLimit:Me.parameterLimit,parseArrays:e.parseArrays!==!1,plainObjects:typeof e.plainObjects=="boolean"?e.plainObjects:Me.plainObjects,strictNullHandling:typeof e.strictNullHandling=="boolean"?e.strictNullHandling:Me.strictNullHandling}},Xw=function(t,e){var r=jw(e);if(t===""||t===null||typeof t>"u")return r.plainObjects?Object.create(null):{};for(var n=typeof t=="string"?Hw(t,r):t,i=r.plainObjects?Object.create(null):{},s=Object.keys(n),o=0;o<s.length;++o){var a=s[o],l=Vw(a,n[a],r,typeof t=="string");i=Mi.merge(i,l,r)}return r.allowSparse===!0?i:Mi.compact(i)},Ww=Ow,Yw=Xw,Kw=xd,qw={formats:Kw,parse:Yw,stringify:Ww},Qw=t1;function zt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var Zw=/^([a-z0-9.+-]+:)/i,Jw=/:[0-9]*$/,eE=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,tE=["<",">",'"',"`"," ","\r",`
`,"	"],rE=["{","}","|","\\","^","`"].concat(tE),Hh=["'"].concat(rE),_p=["%","/","?",";","#"].concat(Hh),xp=["/","?","#"],nE=255,wp=/^[+a-z0-9A-Z_-]{0,63}$/,iE=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,sE={javascript:!0,"javascript:":!0},$h={javascript:!0,"javascript:":!0},yi={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Vh=qw;function gl(t,e,r){if(t&&typeof t=="object"&&t instanceof zt)return t;var n=new zt;return n.parse(t,e,r),n}zt.prototype.parse=function(t,e,r){if(typeof t!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var n=t.indexOf("?"),i=n!==-1&&n<t.indexOf("#")?"?":"#",s=t.split(i),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(i);var a=t;if(a=a.trim(),!r&&t.split("#").length===1){var l=eE.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=Vh.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=Zw.exec(a);if(u){u=u[0];var h=u.toLowerCase();this.protocol=h,a=a.substr(u.length)}if(r||u||a.match(/^\/\/[^@/]+@[^@/]+/)){var c=a.substr(0,2)==="//";c&&!(u&&$h[u])&&(a=a.substr(2),this.slashes=!0)}if(!$h[u]&&(c||u&&!yi[u])){for(var d=-1,f=0;f<xp.length;f++){var p=a.indexOf(xp[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var v,x;d===-1?x=a.lastIndexOf("@"):x=a.lastIndexOf("@",d),x!==-1&&(v=a.slice(0,x),a=a.slice(x+1),this.auth=decodeURIComponent(v)),d=-1;for(var f=0;f<_p.length;f++){var p=a.indexOf(_p[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var y=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!y)for(var g=this.hostname.split(/\./),f=0,m=g.length;f<m;f++){var _=g[f];if(_&&!_.match(wp)){for(var w="",S=0,T=_.length;S<T;S++)_.charCodeAt(S)>127?w+="x":w+=_[S];if(!w.match(wp)){var E=g.slice(0,f),D=g.slice(f+1),I=_.match(iE);I&&(E.push(I[1]),D.unshift(I[2])),D.length&&(a="/"+D.join(".")+a),this.hostname=E.join(".");break}}}this.hostname.length>nE?this.hostname="":this.hostname=this.hostname.toLowerCase(),y||(this.hostname=Qw.toASCII(this.hostname));var M=this.port?":"+this.port:"",B=this.hostname||"";this.host=B+M,this.href+=this.host,y&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!sE[h])for(var f=0,m=Hh.length;f<m;f++){var b=Hh[f];if(a.indexOf(b)!==-1){var C=encodeURIComponent(b);C===b&&(C=escape(b)),a=a.split(b).join(C)}}var W=a.indexOf("#");W!==-1&&(this.hash=a.substr(W),a=a.slice(0,W));var Y=a.indexOf("?");if(Y!==-1?(this.search=a.substr(Y),this.query=a.substr(Y+1),e&&(this.query=Vh.parse(this.query)),a=a.slice(0,Y)):e&&(this.search="",this.query={}),a&&(this.pathname=a),yi[h]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var M=this.pathname||"",O=this.search||"";this.path=M+O}return this.href=this.format(),this};function oE(t){return typeof t=="string"&&(t=gl(t)),t instanceof zt?t.format():zt.prototype.format.call(t)}zt.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",r=this.pathname||"",n=this.hash||"",i=!1,s="";this.host?i=t+this.host:this.hostname&&(i=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(s=Vh.stringify(this.query,{arrayFormat:"repeat",encodeValuesOnly:!0,addQueryPrefix:!1}));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||yi[e])&&i!==!1?(i="//"+(i||""),r&&r.charAt(0)!=="/"&&(r="/"+r)):i||(i=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),r=r.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+i+r+o+n};function aE(t,e){return gl(t,!1,!0).resolve(e)}zt.prototype.resolve=function(t){return this.resolveObject(gl(t,!1,!0)).format()};zt.prototype.resolveObject=function(t){if(typeof t=="string"){var e=new zt;e.parse(t,!1,!0),t=e}for(var r=new zt,n=Object.keys(this),i=0;i<n.length;i++){var s=n[i];r[s]=this[s]}if(r.hash=t.hash,t.href==="")return r.href=r.format(),r;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(r[l]=t[l])}return yi[r.protocol]&&r.hostname&&!r.pathname&&(r.pathname="/",r.path=r.pathname),r.href=r.format(),r}if(t.protocol&&t.protocol!==r.protocol){if(!yi[t.protocol]){for(var u=Object.keys(t),h=0;h<u.length;h++){var c=u[h];r[c]=t[c]}return r.href=r.format(),r}if(r.protocol=t.protocol,!t.host&&!$h[t.protocol]){for(var m=(t.pathname||"").split("/");m.length&&!(t.host=m.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),m[0]!==""&&m.unshift(""),m.length<2&&m.unshift(""),r.pathname=m.join("/")}else r.pathname=t.pathname;if(r.search=t.search,r.query=t.query,r.host=t.host||"",r.auth=t.auth,r.hostname=t.hostname||t.host,r.port=t.port,r.pathname||r.search){var d=r.pathname||"",f=r.search||"";r.path=d+f}return r.slashes=r.slashes||t.slashes,r.href=r.format(),r}var p=r.pathname&&r.pathname.charAt(0)==="/",v=t.host||t.pathname&&t.pathname.charAt(0)==="/",x=v||p||r.host&&t.pathname,y=x,g=r.pathname&&r.pathname.split("/")||[],m=t.pathname&&t.pathname.split("/")||[],_=r.protocol&&!yi[r.protocol];if(_&&(r.hostname="",r.port=null,r.host&&(g[0]===""?g[0]=r.host:g.unshift(r.host)),r.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(m[0]===""?m[0]=t.host:m.unshift(t.host)),t.host=null),x=x&&(m[0]===""||g[0]==="")),v)r.host=t.host||t.host===""?t.host:r.host,r.hostname=t.hostname||t.hostname===""?t.hostname:r.hostname,r.search=t.search,r.query=t.query,g=m;else if(m.length)g||(g=[]),g.pop(),g=g.concat(m),r.search=t.search,r.query=t.query;else if(t.search!=null){if(_){r.host=g.shift(),r.hostname=r.host;var w=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return r.search=t.search,r.query=t.query,(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!g.length)return r.pathname=null,r.search?r.path="/"+r.search:r.path=null,r.href=r.format(),r;for(var S=g.slice(-1)[0],T=(r.host||t.host||g.length>1)&&(S==="."||S==="..")||S==="",E=0,D=g.length;D>=0;D--)S=g[D],S==="."?g.splice(D,1):S===".."?(g.splice(D,1),E++):E&&(g.splice(D,1),E--);if(!x&&!y)for(;E--;E)g.unshift("..");x&&g[0]!==""&&(!g[0]||g[0].charAt(0)!=="/")&&g.unshift(""),T&&g.join("/").substr(-1)!=="/"&&g.push("");var I=g[0]===""||g[0]&&g[0].charAt(0)==="/";if(_){r.hostname=I?"":g.length?g.shift():"",r.host=r.hostname;var w=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;w&&(r.auth=w.shift(),r.hostname=w.shift(),r.host=r.hostname)}return x=x||r.host&&g.length,x&&!I&&g.unshift(""),g.length>0?r.pathname=g.join("/"):(r.pathname=null,r.path=null),(r.pathname!==null||r.search!==null)&&(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=t.auth||r.auth,r.slashes=r.slashes||t.slashes,r.href=r.format(),r};zt.prototype.parseHost=function(){var t=this.host,e=Jw.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};var lE=gl,uE=aE,hE=oE;const cE={parse:lE,format:hE,resolve:uE};function bt(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function qi(t){return t.split("?")[0].split("#")[0]}function dE(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function fE(t,e,r){return t.replace(new RegExp(dE(e),"g"),r)}function pE(t,e){let r="",n=0,i=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(i===a-1||s===1))if(i!==a-1&&s===2){if(r.length<2||n!==2||r.charCodeAt(r.length-1)!==46||r.charCodeAt(r.length-2)!==46){if(r.length>2){const l=r.lastIndexOf("/");if(l!==r.length-1){l===-1?(r="",n=0):(r=r.slice(0,l),n=r.length-1-r.lastIndexOf("/")),i=a,s=0;continue}}else if(r.length===2||r.length===1){r="",n=0,i=a,s=0;continue}}e&&(r.length>0?r+="/..":r="..",n=2)}else r.length>0?r+=`/${t.slice(i+1,a)}`:r=t.slice(i+1,a),n=a-i-1;i=a,s=0}else o===46&&s!==-1?++s:s=-1}return r}const Ke={toPosix(t){return fE(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){bt(t),t=this.toPosix(t);let e="";const r=/^file:\/\/\//.exec(t),n=/^[^/:]+:\/\//.exec(t),i=/^[^/:]+:\//.exec(t);if(r||n||i){const s=(r==null?void 0:r[0])||(n==null?void 0:n[0])||(i==null?void 0:i[0]);e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,r){if(this.isDataUrl(t))return t;const n=qi(this.toPosix(e??N.ADAPTER.getBaseUrl())),i=qi(this.toPosix(r??this.rootname(n)));return bt(t),t=this.toPosix(t),t.startsWith("/")?Ke.join(i,t.slice(1)):this.isAbsolute(t)?t:this.join(n,t)},normalize(t){if(t=this.toPosix(t),bt(t),t.length===0)return".";let e="";const r=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const n=t.endsWith("/");return t=pE(t,!1),t.length>0&&n&&(t+="/"),r?`/${t}`:e+t},isAbsolute(t){return bt(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let r=0;r<t.length;++r){const n=t[r];if(bt(n),n.length>0)if(e===void 0)e=n;else{const i=t[r-1]??"";this.extname(i)?e+=`/../${n}`:e+=`/${n}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(bt(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const r=e===47;let n=-1,i=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!i){n=a;break}}else i=!1;return n===-1?r?"/":this.isUrl(o)?s+t:s:r&&n===1?"//":s+t.slice(0,n)},rootname(t){bt(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const r=t.indexOf("/",e.length);r!==-1?e=t.slice(0,r):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){bt(t),e&&bt(e),t=qi(this.toPosix(t));let r=0,n=-1,i=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!i){r=s+1;break}}else a===-1&&(i=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return r===n?n=a:n===-1&&(n=t.length),t.slice(r,n)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!i){r=s+1;break}}else n===-1&&(i=!1,n=s+1);return n===-1?"":t.slice(r,n)},extname(t){bt(t),t=qi(this.toPosix(t));let e=-1,r=0,n=-1,i=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!i){r=o+1;break}continue}n===-1&&(i=!1,n=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||n===-1||s===0||s===1&&e===n-1&&e===r+1?"":t.slice(e,n)},parse(t){bt(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=qi(this.toPosix(t));let r=t.charCodeAt(0);const n=this.isAbsolute(t);let i;e.root=this.rootname(t),n||this.hasProtocol(t)?i=1:i=0;let s=-1,o=0,a=-1,l=!0,u=t.length-1,h=0;for(;u>=i;--u){if(r=t.charCodeAt(u),r===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),r===46?s===-1?s=u:h!==1&&(h=1):s!==-1&&(h=-1)}return s===-1||a===-1||h===0||h===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&n?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"},Ep={};function Z(t,e,r=3){if(Ep[e])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(n=n.split(`
`).splice(r).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(n))),Ep[e]=!0}let fu;function mE(){return typeof fu>"u"&&(fu=function(){var r;const e={stencil:!0,failIfMajorPerformanceCaveat:N.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!N.ADAPTER.getWebGLRenderingContext())return!1;const n=N.ADAPTER.createCanvas();let i=n.getContext("webgl",e)||n.getContext("experimental-webgl",e);const s=!!((r=i==null?void 0:i.getContextAttributes())!=null&&r.stencil);if(i){const o=i.getExtension("WEBGL_lose_context");o&&o.loseContext()}return i=null,s}catch{return!1}}()),fu}var gE={grad:.9,turn:360,rad:360/(2*Math.PI)},hr=function(t){return typeof t=="string"?t.length>0:typeof t=="number"},Be=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=Math.pow(10,e)),Math.round(r*t)/r+0},wt=function(t,e,r){return e===void 0&&(e=0),r===void 0&&(r=1),t>r?r:t>e?t:e},Ky=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},Tp=function(t){return{r:wt(t.r,0,255),g:wt(t.g,0,255),b:wt(t.b,0,255),a:wt(t.a)}},pu=function(t){return{r:Be(t.r),g:Be(t.g),b:Be(t.b),a:Be(t.a,3)}},yE=/^#([0-9a-f]{3,8})$/i,Io=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},qy=function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=Math.max(e,r,n),o=s-Math.min(e,r,n),a=o?s===e?(r-n)/o:s===r?2+(n-e)/o:4+(e-r)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:i}},Qy=function(t){var e=t.h,r=t.s,n=t.v,i=t.a;e=e/360*6,r/=100,n/=100;var s=Math.floor(e),o=n*(1-r),a=n*(1-(e-s)*r),l=n*(1-(1-e+s)*r),u=s%6;return{r:255*[n,a,o,o,l,n][u],g:255*[l,n,n,a,o,o][u],b:255*[o,o,l,n,n,a][u],a:i}},Sp=function(t){return{h:Ky(t.h),s:wt(t.s,0,100),l:wt(t.l,0,100),a:wt(t.a)}},Ap=function(t){return{h:Be(t.h),s:Be(t.s),l:Be(t.l),a:Be(t.a,3)}},Cp=function(t){return Qy((r=(e=t).s,{h:e.h,s:(r*=((n=e.l)<50?n:100-n)/100)>0?2*r/(n+r)*100:0,v:n+r,a:e.a}));var e,r,n},Es=function(t){return{h:(e=qy(t)).h,s:(i=(200-(r=e.s))*(n=e.v)/100)>0&&i<200?r*n/100/(i<=100?i:200-i)*100:0,l:i/2,a:e.a};var e,r,n,i},vE=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_E=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,xE=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,wE=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,jh={string:[[function(t){var e=yE.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:t.length===4?Be(parseInt(t[3]+t[3],16)/255,2):1}:t.length===6||t.length===8?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:t.length===8?Be(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=xE.exec(t)||wE.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:Tp({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:e[7]===void 0?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=vE.exec(t)||_E.exec(t);if(!e)return null;var r,n,i=Sp({h:(r=e[1],n=e[2],n===void 0&&(n="deg"),Number(r)*(gE[n]||1)),s:Number(e[3]),l:Number(e[4]),a:e[5]===void 0?1:Number(e[5])/(e[6]?100:1)});return Cp(i)},"hsl"]],object:[[function(t){var e=t.r,r=t.g,n=t.b,i=t.a,s=i===void 0?1:i;return hr(e)&&hr(r)&&hr(n)?Tp({r:Number(e),g:Number(r),b:Number(n),a:Number(s)}):null},"rgb"],[function(t){var e=t.h,r=t.s,n=t.l,i=t.a,s=i===void 0?1:i;if(!hr(e)||!hr(r)||!hr(n))return null;var o=Sp({h:Number(e),s:Number(r),l:Number(n),a:Number(s)});return Cp(o)},"hsl"],[function(t){var e=t.h,r=t.s,n=t.v,i=t.a,s=i===void 0?1:i;if(!hr(e)||!hr(r)||!hr(n))return null;var o=function(a){return{h:Ky(a.h),s:wt(a.s,0,100),v:wt(a.v,0,100),a:wt(a.a)}}({h:Number(e),s:Number(r),v:Number(n),a:Number(s)});return Qy(o)},"hsv"]]},bp=function(t,e){for(var r=0;r<e.length;r++){var n=e[r][0](t);if(n)return[n,e[r][1]]}return[null,void 0]},EE=function(t){return typeof t=="string"?bp(t.trim(),jh.string):typeof t=="object"&&t!==null?bp(t,jh.object):[null,void 0]},mu=function(t,e){var r=Es(t);return{h:r.h,s:wt(r.s+100*e,0,100),l:r.l,a:r.a}},gu=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},Ip=function(t,e){var r=Es(t);return{h:r.h,s:r.s,l:wt(r.l+100*e,0,100),a:r.a}},Xh=function(){function t(e){this.parsed=EE(e)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return this.parsed!==null},t.prototype.brightness=function(){return Be(gu(this.rgba),2)},t.prototype.isDark=function(){return gu(this.rgba)<.5},t.prototype.isLight=function(){return gu(this.rgba)>=.5},t.prototype.toHex=function(){return e=pu(this.rgba),r=e.r,n=e.g,i=e.b,o=(s=e.a)<1?Io(Be(255*s)):"","#"+Io(r)+Io(n)+Io(i)+o;var e,r,n,i,s,o},t.prototype.toRgb=function(){return pu(this.rgba)},t.prototype.toRgbString=function(){return e=pu(this.rgba),r=e.r,n=e.g,i=e.b,(s=e.a)<1?"rgba("+r+", "+n+", "+i+", "+s+")":"rgb("+r+", "+n+", "+i+")";var e,r,n,i,s},t.prototype.toHsl=function(){return Ap(Es(this.rgba))},t.prototype.toHslString=function(){return e=Ap(Es(this.rgba)),r=e.h,n=e.s,i=e.l,(s=e.a)<1?"hsla("+r+", "+n+"%, "+i+"%, "+s+")":"hsl("+r+", "+n+"%, "+i+"%)";var e,r,n,i,s},t.prototype.toHsv=function(){return e=qy(this.rgba),{h:Be(e.h),s:Be(e.s),v:Be(e.v),a:Be(e.a,3)};var e},t.prototype.invert=function(){return qt({r:255-(e=this.rgba).r,g:255-e.g,b:255-e.b,a:e.a});var e},t.prototype.saturate=function(e){return e===void 0&&(e=.1),qt(mu(this.rgba,e))},t.prototype.desaturate=function(e){return e===void 0&&(e=.1),qt(mu(this.rgba,-e))},t.prototype.grayscale=function(){return qt(mu(this.rgba,-1))},t.prototype.lighten=function(e){return e===void 0&&(e=.1),qt(Ip(this.rgba,e))},t.prototype.darken=function(e){return e===void 0&&(e=.1),qt(Ip(this.rgba,-e))},t.prototype.rotate=function(e){return e===void 0&&(e=15),this.hue(this.hue()+e)},t.prototype.alpha=function(e){return typeof e=="number"?qt({r:(r=this.rgba).r,g:r.g,b:r.b,a:e}):Be(this.rgba.a,3);var r},t.prototype.hue=function(e){var r=Es(this.rgba);return typeof e=="number"?qt({h:e,s:r.s,l:r.l,a:r.a}):Be(r.h)},t.prototype.isEqual=function(e){return this.toHex()===qt(e).toHex()},t}(),qt=function(t){return t instanceof Xh?t:new Xh(t)},Pp=[],TE=function(t){t.forEach(function(e){Pp.indexOf(e)<0&&(e(Xh,jh),Pp.push(e))})};function SE(t,e){var r={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},n={};for(var i in r)n[r[i]]=i;var s={};t.prototype.toName=function(o){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var a,l,u=n[this.toHex()];if(u)return u;if(o!=null&&o.closest){var h=this.toRgb(),c=1/0,d="black";if(!s.length)for(var f in r)s[f]=new t(r[f]).toRgb();for(var p in r){var v=(a=h,l=s[p],Math.pow(a.r-l.r,2)+Math.pow(a.g-l.g,2)+Math.pow(a.b-l.b,2));v<c&&(c=v,d=p)}return d}},e.string.push([function(o){var a=o.toLowerCase(),l=a==="transparent"?"#0000":r[a];return l?new t(l).toRgb():null},"name"])}TE([SE]);const vi=class{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(t){if(t instanceof vi)this._value=this.cloneSource(t._value),this._int=t._int,this._components.set(t._components);else{if(t===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,t))&&(this.normalize(t),this._value=this.cloneSource(t))}}get value(){return this._value}cloneSource(t){return typeof t=="string"||typeof t=="number"||t instanceof Number||t===null?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):typeof t=="object"&&t!==null?{...t}:t}isSourceEqual(t,e){const r=typeof t;if(r!==typeof e)return!1;if(r==="number"||r==="string"||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length!==e.length?!1:t.every((i,s)=>i===e[s]);if(t!==null&&e!==null){const i=Object.keys(t),s=Object.keys(e);return i.length!==s.length?!1:i.every(o=>t[o]===e[o])}return t===e}toRgba(){const[t,e,r,n]=this._components;return{r:t,g:e,b:r,a:n}}toRgb(){const[t,e,r]=this._components;return{r:t,g:e,b:r}}toRgbaString(){const[t,e,r]=this.toUint8RgbArray();return`rgba(${t},${e},${r},${this.alpha})`}toUint8RgbArray(t){const[e,r,n]=this._components;return t=t??[],t[0]=Math.round(e*255),t[1]=Math.round(r*255),t[2]=Math.round(n*255),t}toRgbArray(t){t=t??[];const[e,r,n]=this._components;return t[0]=e,t[1]=r,t[2]=n,t}toNumber(){return this._int}toLittleEndianNumber(){const t=this._int;return(t>>16)+(t&65280)+((t&255)<<16)}multiply(t){const[e,r,n,i]=vi.temp.setValue(t)._components;return this._components[0]*=e,this._components[1]*=r,this._components[2]*=n,this._components[3]*=i,this.refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this.refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(t===1)return(255<<24)+this._int;if(t===0)return e?0:this._int;let r=this._int>>16&255,n=this._int>>8&255,i=this._int&255;return e&&(r=r*t+.5|0,n=n*t+.5|0,i=i*t+.5|0),(t*255<<24)+(r<<16)+(n<<8)+i}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const e=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-e.length)+e}setAlpha(t){return this._components[3]=this._clamp(t),this}round(t){const[e,r,n]=this._components;return this._components[0]=Math.round(e*t)/t,this._components[1]=Math.round(r*t)/t,this._components[2]=Math.round(n*t)/t,this.refreshInt(),this._value=null,this}toArray(t){t=t??[];const[e,r,n,i]=this._components;return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}normalize(t){let e,r,n,i;if((typeof t=="number"||t instanceof Number)&&t>=0&&t<=16777215){const s=t;e=(s>>16&255)/255,r=(s>>8&255)/255,n=(s&255)/255,i=1}else if((Array.isArray(t)||t instanceof Float32Array)&&t.length>=3&&t.length<=4)t=this._clamp(t),[e,r,n,i=1]=t;else if((t instanceof Uint8Array||t instanceof Uint8ClampedArray)&&t.length>=3&&t.length<=4)t=this._clamp(t,0,255),[e,r,n,i=255]=t,e/=255,r/=255,n/=255,i/=255;else if(typeof t=="string"||typeof t=="object"){if(typeof t=="string"){const o=vi.HEX_PATTERN.exec(t);o&&(t=`#${o[2]}`)}const s=qt(t);s.isValid()&&({r:e,g:r,b:n,a:i}=s.rgba,e/=255,r/=255,n/=255)}if(e!==void 0)this._components[0]=e,this._components[1]=r,this._components[2]=n,this._components[3]=i,this.refreshInt();else throw new Error(`Unable to convert color ${t}`)}refreshInt(){this._clamp(this._components);const[t,e,r]=this._components;this._int=(t*255<<16)+(e*255<<8)+(r*255|0)}_clamp(t,e=0,r=1){return typeof t=="number"?Math.min(Math.max(t,e),r):(t.forEach((n,i)=>{t[i]=Math.min(Math.max(n,e),r)}),t)}};let oe=vi;oe.shared=new vi;oe.temp=new vi;oe.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;function AE(t){return Z("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),oe.shared.setValue(t).toHex()}function CE(t){return Z("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),oe.shared.setValue(t).toNumber()}function bE(){const t=[],e=[];for(let n=0;n<32;n++)t[n]=n,e[n]=n;t[X.NORMAL_NPM]=X.NORMAL,t[X.ADD_NPM]=X.ADD,t[X.SCREEN_NPM]=X.SCREEN,e[X.NORMAL]=X.NORMAL_NPM,e[X.ADD]=X.ADD_NPM,e[X.SCREEN]=X.SCREEN_NPM;const r=[];return r.push(e),r.push(t),r}const Zy=bE();function Jy(t,e){return Zy[e?1:0][t]}function IE(t,e=null){const r=t*6;if(e=e||new Uint16Array(r),e.length!==r)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${r}`);for(let n=0,i=0;n<r;n+=6,i+=4)e[n+0]=i+0,e[n+1]=i+1,e[n+2]=i+2,e[n+3]=i+0,e[n+4]=i+2,e[n+5]=i+3;return e}function ev(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function Ga(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function Rp(t){return!(t&t-1)&&!!t}function Mp(t){let e=(t>65535?1:0)<<4;t>>>=e;let r=(t>255?1:0)<<3;return t>>>=r,e|=r,r=(t>15?1:0)<<2,t>>>=r,e|=r,r=(t>3?1:0)<<1,t>>>=r,e|=r,e|t>>1}function _i(t,e,r){const n=t.length;let i;if(e>=n||r===0)return;r=e+r>n?n-e:r;const s=n-r;for(i=e;i<s;++i)t[i]=t[i+r];t.length=s}function Ur(t){return t===0?0:t<0?-1:1}let PE=0;function Rn(){return++PE}const tv=class{constructor(t,e,r,n){this.left=t,this.top=e,this.right=r,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let Wh=tv;Wh.EMPTY=new tv(0,0,0,0);const Dp={},Qt=Object.create(null),Pr=Object.create(null);class RE{constructor(e,r,n){this._canvas=N.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||N.RESOLUTION,this.resize(e,r)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,r){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(r*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function kp(t,e,r){for(let n=0,i=4*r*e;n<e;++n,i+=4)if(t[i+3]!==0)return!1;return!0}function Bp(t,e,r,n,i){const s=4*e;for(let o=n,a=n*s+4*r;o<=i;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function ME(t){const{width:e,height:r}=t,n=t.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const s=n.getImageData(0,0,e,r).data;let o=0,a=0,l=e-1,u=r-1;for(;a<r&&kp(s,e,a);)++a;if(a===r)return Wh.EMPTY;for(;kp(s,e,u);)--u;for(;Bp(s,e,o,a,u);)++o;for(;Bp(s,e,l,a,u);)--l;return++l,++u,new Wh(o,a,l,u)}function DE(t){const e=ME(t),{width:r,height:n}=e;let i=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");i=s.getImageData(e.left,e.top,r,n)}return{width:r,height:n,data:i}}let Po;function kE(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,Po||(Po=document.createElement("a")),Po.href=t;const r=cE.parse(Po.href),n=!r.port&&e.port===""||r.port===e.port;return r.hostname!==e.hostname||!n||r.protocol!==e.protocol?"anonymous":""}function Zr(t,e=1){var n;const r=(n=N.RETINA_PREFIX)==null?void 0:n.exec(t);return r?parseFloat(r[1]):e}var F=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(F||{});const Yh=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},Np=(t,e)=>Yh(t).priority??e,$={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(Yh).forEach(e=>{e.type.forEach(r=>{var n,i;return(i=(n=this._removeHandlers)[r])==null?void 0:i.call(n,e)})}),this},add(...t){return t.map(Yh).forEach(e=>{e.type.forEach(r=>{const n=this._addHandlers,i=this._queue;n[r]?n[r](e):(i[r]=i[r]||[],i[r].push(e))})}),this},handle(t,e,r){const n=this._addHandlers,i=this._removeHandlers;if(n[t]||i[t])throw new Error(`Extension type ${t} already has a handler`);n[t]=e,i[t]=r;const s=this._queue;return s[t]&&(s[t].forEach(o=>e(o)),delete s[t]),this},handleByMap(t,e){return this.handle(t,r=>{e[r.name]=r.ref},r=>{delete e[r.name]})},handleByList(t,e,r=-1){return this.handle(t,n=>{e.includes(n.ref)||(e.push(n.ref),e.sort((i,s)=>Np(s,r)-Np(i,r)))},n=>{const i=e.indexOf(n.ref);i!==-1&&e.splice(i,1)})}};class Kh{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const BE=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function NE(t){let e="";for(let r=0;r<t;++r)r>0&&(e+=`
else `),r<t-1&&(e+=`if(test == ${r}.0){}`);return e}function FE(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const r=e.createShader(e.FRAGMENT_SHADER);for(;;){const n=BE.replace(/%forloop%/gi,NE(t));if(e.shaderSource(r,n),e.compileShader(r),!e.getShaderParameter(r,e.COMPILE_STATUS))t=t/2|0;else break}return t}const yu=0,vu=1,_u=2,xu=3,wu=4,Eu=5;class br{constructor(){this.data=0,this.blendMode=X.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<yu)}set blend(e){!!(this.data&1<<yu)!==e&&(this.data^=1<<yu)}get offsets(){return!!(this.data&1<<vu)}set offsets(e){!!(this.data&1<<vu)!==e&&(this.data^=1<<vu)}get culling(){return!!(this.data&1<<_u)}set culling(e){!!(this.data&1<<_u)!==e&&(this.data^=1<<_u)}get depthTest(){return!!(this.data&1<<xu)}set depthTest(e){!!(this.data&1<<xu)!==e&&(this.data^=1<<xu)}get depthMask(){return!!(this.data&1<<Eu)}set depthMask(e){!!(this.data&1<<Eu)!==e&&(this.data^=1<<Eu)}get clockwiseFrontFace(){return!!(this.data&1<<wu)}set clockwiseFrontFace(e){!!(this.data&1<<wu)!==e&&(this.data^=1<<wu)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==X.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new br;return e.depthTest=!1,e.blend=!0,e}}const qh=[];function rv(t,e){if(!t)return null;let r="";if(typeof t=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);n&&(r=n[1].toLowerCase())}for(let n=qh.length-1;n>=0;--n){const i=qh[n];if(i.test&&i.test(t,r))return new i(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ht{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,r,n,i,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:h}=this;this._aliasCount++;for(let c=0,d=h.length;c<d;c++)h[c][u](e,r,n,i,s,o,a,l);return h===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const r=this.items.indexOf(e);return r!==-1&&(this.ensureNonAliasedItems(),this.items.splice(r,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ht.prototype,{dispatch:{value:Ht.prototype.emit},run:{value:Ht.prototype.emit}});class Vs{constructor(e=0,r=0){this._width=e,this._height=r,this.destroyed=!1,this.internal=!1,this.onResize=new Ht("setRealSize"),this.onUpdate=new Ht("update"),this.onError=new Ht("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,r){(e!==this._width||r!==this._height)&&(this._width=e,this._height=r,this.onResize.emit(e,r))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,r,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,r){return!1}}class eo extends Vs{constructor(e,r){const{width:n,height:i}=r||{};if(!n||!i)throw new Error("BufferResource width or height invalid");super(n,i),this.data=e}upload(e,r,n){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===jt.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const OE={scaleMode:yr.NEAREST,format:k.RGBA,alphaMode:jt.NPM},$n=class extends Zs{constructor(t=null,e=null){super(),e=Object.assign({},$n.defaultOptions,e);const{alphaMode:r,mipmap:n,anisotropicLevel:i,scaleMode:s,width:o,height:a,wrapMode:l,format:u,type:h,target:c,resolution:d,resourceOptions:f}=e;t&&!(t instanceof Vs)&&(t=rv(t,f),t.internal=!0),this.resolution=d||N.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=i,this._wrapMode=l,this._scaleMode=s,this.format=u,this.type=h,this.target=c,this.alphaMode=r,this.uid=Rn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let r;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,r=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,r=!0),r&&this.dirtyStyleId++,this}setSize(t,e,r){return r=r||this.resolution,this.setRealSize(t*r,e*r,r)}setRealSize(t,e,r){return this.resolution=r||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Rp(this.realWidth)&&Rp(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete Pr[this.cacheId],delete Qt[this.cacheId],this.cacheId=null),this.dispose(),$n.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,r=N.STRICT_TEXTURE_CACHE){const n=typeof t=="string";let i=null;if(n)i=t;else{if(!t._pixiId){const o=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${o}_${Rn()}`}i=t._pixiId}let s=Pr[i];if(n&&r&&!s)throw new Error(`The cacheId "${i}" does not exist in BaseTextureCache.`);return s||(s=new $n(t,e),s.cacheId=i,$n.addToCache(s,i)),s}static fromBuffer(t,e,r,n){t=t||new Float32Array(e*r*4);const i=new eo(t,{width:e,height:r}),s=t instanceof Float32Array?j.FLOAT:j.UNSIGNED_BYTE;return new $n(i,Object.assign({},OE,{type:s},n))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),Pr[e]&&Pr[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),Pr[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=Pr[t];if(e){const r=e.textureCacheIds.indexOf(t);return r>-1&&e.textureCacheIds.splice(r,1),delete Pr[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete Pr[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let K=$n;K.defaultOptions={mipmap:ar.POW2,anisotropicLevel:0,scaleMode:yr.LINEAR,wrapMode:Kr.CLAMP,alphaMode:jt.UNPACK,target:mi.TEXTURE_2D,format:k.RGBA,type:j.UNSIGNED_BYTE};K._globalBatch=0;class Qh{constructor(){this.texArray=null,this.blend=0,this.type=rr.TRIANGLES,this.start=0,this.size=0,this.data=null}}let LE=0;class Ee{constructor(e,r=!0,n=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=r,this.id=LE++,this.disposeRunner=new Ht("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?sr.ELEMENT_ARRAY_BUFFER:sr.ARRAY_BUFFER}get index(){return this.type===sr.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new Ee(e)}}class za{constructor(e,r=0,n=!1,i=j.FLOAT,s,o,a,l=1){this.buffer=e,this.size=r,this.normalized=n,this.type=i,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,r,n,i,s){return new za(e,r,n,i,s)}}const UE={Float32Array,Uint32Array,Int32Array,Uint8Array};function GE(t,e){let r=0,n=0;const i={};for(let l=0;l<t.length;l++)n+=e[l],r+=t[l].length;const s=new ArrayBuffer(r*4);let o=null,a=0;for(let l=0;l<t.length;l++){const u=e[l],h=t[l],c=ev(h);i[c]||(i[c]=new UE[c](s)),o=i[c];for(let d=0;d<h.length;d++){const f=(d/u|0)*n+a,p=d%u;o[f+p]=h[d]}a+=u}return new Float32Array(s)}const Fp={5126:4,5123:2,5121:1};let zE=0;const HE={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Jr{constructor(e=[],r={}){this.buffers=e,this.indexBuffer=null,this.attributes=r,this.glVertexArrayObjects={},this.id=zE++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ht("disposeGeometry"),this.refCount=0}addAttribute(e,r,n=0,i=!1,s,o,a,l=!1){if(!r)throw new Error("You must pass a buffer when creating an attribute");r instanceof Ee||(r instanceof Array&&(r=new Float32Array(r)),r=new Ee(r));const u=e.split("|");if(u.length>1){for(let c=0;c<u.length;c++)this.addAttribute(u[c],r,n,i,s);return this}let h=this.buffers.indexOf(r);return h===-1&&(this.buffers.push(r),h=this.buffers.length-1),this.attributes[e]=new za(h,n,i,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Ee||(e instanceof Array&&(e=new Uint16Array(e)),e=new Ee(e)),e.type=sr.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],r=[],n=new Ee;let i;for(i in this.attributes){const s=this.attributes[i],o=this.buffers[s.buffer];e.push(o.data),r.push(s.size*Fp[s.type]/4),s.buffer=0}for(n.data=GE(e,r),i=0;i<this.buffers.length;i++)this.buffers[i]!==this.indexBuffer&&this.buffers[i].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const r=this.attributes[e];return this.buffers[r.buffer].data.length/(r.stride/4||r.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Jr;for(let r=0;r<this.buffers.length;r++)e.buffers[r]=new Ee(this.buffers[r].data.slice(0));for(const r in this.attributes){const n=this.attributes[r];e.attributes[r]=new za(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=sr.ELEMENT_ARRAY_BUFFER),e}static merge(e){const r=new Jr,n=[],i=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l]=i[l]||0,i[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new HE[ev(o.buffers[a].data)](i[a]),r.buffers[a]=new Ee(n[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(r.attributes=o.attributes,o.indexBuffer){r.indexBuffer=r.buffers[o.buffers.indexOf(o.indexBuffer)],r.indexBuffer.type=sr.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,h=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){h=c;break}for(const c in o.attributes){const d=o.attributes[c];(d.buffer|0)===h&&(l+=d.size*Fp[d.type]/4)}for(let c=0;c<e.length;c++){const d=e[c].indexBuffer.data;for(let f=0;f<d.length;f++)r.indexBuffer.data[f+u]+=a;a+=e[c].buffers[h].data.length/l,u+=d.length}}return r}}class nv extends Jr{constructor(e=!1){super(),this._buffer=new Ee(null,e,!1),this._indexBuffer=new Ee(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,j.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,j.FLOAT).addAttribute("aColor",this._buffer,4,!0,j.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,j.FLOAT).addIndex(this._indexBuffer)}}const Ha=Math.PI*2,$E=180/Math.PI,VE=Math.PI/180;var Ue=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(Ue||{});class ne{constructor(e=0,r=0){this.x=0,this.y=0,this.x=e,this.y=r}clone(){return new ne(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,r=e){return this.x=e,this.y=r,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const Ro=[new ne,new ne,new ne,new ne];class q{constructor(e=0,r=0,n=0,i=0){this.x=Number(e),this.y=Number(r),this.width=Number(n),this.height=Number(i),this.type=Ue.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new q(0,0,0,0)}clone(){return new q(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,r){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&r>=this.y&&r<this.y+this.height}intersects(e,r){if(!r){const E=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=E)return!1;const I=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>I}const n=this.left,i=this.right,s=this.top,o=this.bottom;if(i<=n||o<=s)return!1;const a=Ro[0].set(e.left,e.top),l=Ro[1].set(e.left,e.bottom),u=Ro[2].set(e.right,e.top),h=Ro[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(r.a*r.d-r.b*r.c);if(c===0||(r.apply(a,a),r.apply(l,l),r.apply(u,u),r.apply(h,h),Math.max(a.x,l.x,u.x,h.x)<=n||Math.min(a.x,l.x,u.x,h.x)>=i||Math.max(a.y,l.y,u.y,h.y)<=s||Math.min(a.y,l.y,u.y,h.y)>=o))return!1;const d=c*(l.y-a.y),f=c*(a.x-l.x),p=d*n+f*s,v=d*i+f*s,x=d*n+f*o,y=d*i+f*o;if(Math.max(p,v,x,y)<=d*a.x+f*a.y||Math.min(p,v,x,y)>=d*h.x+f*h.y)return!1;const g=c*(a.y-u.y),m=c*(u.x-a.x),_=g*n+m*s,w=g*i+m*s,S=g*n+m*o,T=g*i+m*o;return!(Math.max(_,w,S,T)<=g*a.x+m*a.y||Math.min(_,w,S,T)>=g*h.x+m*h.y)}pad(e=0,r=e){return this.x-=e,this.y-=r,this.width+=e*2,this.height+=r*2,this}fit(e){const r=Math.max(this.x,e.x),n=Math.min(this.x+this.width,e.x+e.width),i=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=r,this.width=Math.max(n-r,0),this.y=i,this.height=Math.max(s-i,0),this}ceil(e=1,r=.001){const n=Math.ceil((this.x+this.width-r)*e)/e,i=Math.ceil((this.y+this.height-r)*e)/e;return this.x=Math.floor((this.x+r)*e)/e,this.y=Math.floor((this.y+r)*e)/e,this.width=n-this.x,this.height=i-this.y,this}enlarge(e){const r=Math.min(this.x,e.x),n=Math.max(this.x+this.width,e.x+e.width),i=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=r,this.width=n-r,this.y=i,this.height=s-i,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class wd{constructor(e=0,r=0,n=0){this.x=e,this.y=r,this.radius=n,this.type=Ue.CIRC}clone(){return new wd(this.x,this.y,this.radius)}contains(e,r){if(this.radius<=0)return!1;const n=this.radius*this.radius;let i=this.x-e,s=this.y-r;return i*=i,s*=s,i+s<=n}getBounds(){return new q(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class Ed{constructor(e=0,r=0,n=0,i=0){this.x=e,this.y=r,this.width=n,this.height=i,this.type=Ue.ELIP}clone(){return new Ed(this.x,this.y,this.width,this.height)}contains(e,r){if(this.width<=0||this.height<=0)return!1;let n=(e-this.x)/this.width,i=(r-this.y)/this.height;return n*=n,i*=i,n+i<=1}getBounds(){return new q(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class xi{constructor(...e){let r=Array.isArray(e[0])?e[0]:e;if(typeof r[0]!="number"){const n=[];for(let i=0,s=r.length;i<s;i++)n.push(r[i].x,r[i].y);r=n}this.points=r,this.type=Ue.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),r=new xi(e);return r.closeStroke=this.closeStroke,r}contains(e,r){let n=!1;const i=this.points.length/2;for(let s=0,o=i-1;s<i;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],h=this.points[o*2+1];l>r!=h>r&&e<(u-a)*((r-l)/(h-l))+a&&(n=!n)}return n}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,r)=>`${e}, ${r}`,"")}]`}}class Td{constructor(e=0,r=0,n=0,i=0,s=20){this.x=e,this.y=r,this.width=n,this.height=i,this.radius=s,this.type=Ue.RREC}clone(){return new Td(this.x,this.y,this.width,this.height,this.radius)}contains(e,r){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&r>=this.y&&r<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(r>=this.y+n&&r<=this.y+this.height-n||e>=this.x+n&&e<=this.x+this.width-n)return!0;let i=e-(this.x+n),s=r-(this.y+n);const o=n*n;if(i*i+s*s<=o||(i=e-(this.x+this.width-n),i*i+s*s<=o)||(s=r-(this.y+this.height-n),i*i+s*s<=o)||(i=e-(this.x+n),i*i+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class de{constructor(e=1,r=0,n=0,i=1,s=0,o=0){this.array=null,this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,r,n,i,s,o){return this.a=e,this.b=r,this.c=n,this.d=i,this.tx=s,this.ty=o,this}toArray(e,r){this.array||(this.array=new Float32Array(9));const n=r||this.array;return e?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(e,r){r=r||new ne;const n=e.x,i=e.y;return r.x=this.a*n+this.c*i+this.tx,r.y=this.b*n+this.d*i+this.ty,r}applyInverse(e,r){r=r||new ne;const n=1/(this.a*this.d+this.c*-this.b),i=e.x,s=e.y;return r.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,r.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,r}translate(e,r){return this.tx+=e,this.ty+=r,this}scale(e,r){return this.a*=e,this.d*=r,this.c*=e,this.b*=r,this.tx*=e,this.ty*=r,this}rotate(e){const r=Math.cos(e),n=Math.sin(e),i=this.a,s=this.c,o=this.tx;return this.a=i*r-this.b*n,this.b=i*n+this.b*r,this.c=s*r-this.d*n,this.d=s*n+this.d*r,this.tx=o*r-this.ty*n,this.ty=o*n+this.ty*r,this}append(e){const r=this.a,n=this.b,i=this.c,s=this.d;return this.a=e.a*r+e.b*i,this.b=e.a*n+e.b*s,this.c=e.c*r+e.d*i,this.d=e.c*n+e.d*s,this.tx=e.tx*r+e.ty*i+this.tx,this.ty=e.tx*n+e.ty*s+this.ty,this}setTransform(e,r,n,i,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(n*this.a+i*this.c),this.ty=r-(n*this.b+i*this.d),this}prepend(e){const r=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const n=this.a,i=this.c;this.a=n*e.a+this.b*e.c,this.b=n*e.b+this.b*e.d,this.c=i*e.a+this.d*e.c,this.d=i*e.b+this.d*e.d}return this.tx=r*e.a+this.ty*e.c+e.tx,this.ty=r*e.b+this.ty*e.d+e.ty,this}decompose(e){const r=this.a,n=this.b,i=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-i,s),l=Math.atan2(n,r),u=Math.abs(a+l);return u<1e-5||Math.abs(Ha-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(r*r+n*n),e.scale.y=Math.sqrt(i*i+s*s),e.position.x=this.tx+(o.x*r+o.y*i),e.position.y=this.ty+(o.x*n+o.y*s),e}invert(){const e=this.a,r=this.b,n=this.c,i=this.d,s=this.tx,o=e*i-r*n;return this.a=i/o,this.b=-r/o,this.c=-n/o,this.d=e/o,this.tx=(n*this.ty-i*s)/o,this.ty=-(e*this.ty-r*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new de;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new de}static get TEMP_MATRIX(){return new de}}const hn=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],cn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],dn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],fn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Zh=[],iv=[],Mo=Math.sign;function jE(){for(let t=0;t<16;t++){const e=[];Zh.push(e);for(let r=0;r<16;r++){const n=Mo(hn[t]*hn[r]+dn[t]*cn[r]),i=Mo(cn[t]*hn[r]+fn[t]*cn[r]),s=Mo(hn[t]*dn[r]+dn[t]*fn[r]),o=Mo(cn[t]*dn[r]+fn[t]*fn[r]);for(let a=0;a<16;a++)if(hn[a]===n&&cn[a]===i&&dn[a]===s&&fn[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new de;e.set(hn[t],cn[t],dn[t],fn[t],0,0),iv.push(e)}}jE();const pe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>hn[t],uY:t=>cn[t],vX:t=>dn[t],vY:t=>fn[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>Zh[t][e],sub:(t,e)=>Zh[t][pe.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?pe.S:pe.N:Math.abs(e)*2<=Math.abs(t)?t>0?pe.E:pe.W:e>0?t>0?pe.SE:pe.SW:t>0?pe.NE:pe.NW,matrixAppendRotationInv:(t,e,r=0,n=0)=>{const i=iv[pe.inv(e)];i.tx=r,i.ty=n,t.append(i)}};class Gr{constructor(e,r,n=0,i=0){this._x=n,this._y=i,this.cb=e,this.scope=r}clone(e=this.cb,r=this.scope){return new Gr(e,r,this._x,this._y)}set(e=0,r=e){return(this._x!==e||this._y!==r)&&(this._x=e,this._y=r,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=0 y=0 scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}const sv=class{constructor(){this.worldTransform=new de,this.localTransform=new de,this.position=new Gr(this.onChange,this,0,0),this.scale=new Gr(this.onChange,this,1,1),this.pivot=new Gr(this.onChange,this,0,0),this.skew=new Gr(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const r=t.worldTransform,n=this.worldTransform;n.a=e.a*r.a+e.b*r.c,n.b=e.a*r.b+e.b*r.d,n.c=e.c*r.a+e.d*r.c,n.d=e.c*r.b+e.d*r.d,n.tx=e.tx*r.a+e.ty*r.c+r.tx,n.ty=e.tx*r.b+e.ty*r.d+r.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let Sd=sv;Sd.IDENTITY=new sv;var XE=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,WE=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function Op(t,e,r){const n=t.createShader(e);return t.shaderSource(n,r),t.compileShader(n),n}function Tu(t){const e=new Array(t);for(let r=0;r<e.length;r++)e[r]=!1;return e}function ov(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return Tu(2*e);case"bvec3":return Tu(3*e);case"bvec4":return Tu(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const wi=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${t}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(t,e)=>t.type==="vec3"&&t.size===1&&!t.isArray&&e.red!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${t}"].location, v.red, v.green, v.blue)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],YE={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},KE={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function qE(t,e){var n;const r=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const i in t.uniforms){const s=e[i];if(!s){(n=t.uniforms[i])!=null&&n.group&&(t.uniforms[i].ubo?r.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${i}, '${i}');
                    `):r.push(`
                        renderer.shader.syncUniformGroup(uv.${i}, syncData);
                    `));continue}const o=t.uniforms[i];let a=!1;for(let l=0;l<wi.length;l++)if(wi[l].test(s,o)){r.push(wi[l].code(i,o)),a=!0;break}if(!a){const u=(s.size===1&&!s.isArray?YE:KE)[s.type].replace("location",`ud["${i}"].location`);r.push(`
            cu = ud["${i}"];
            cv = cu.value;
            v = uv["${i}"];
            ${u};`)}}return new Function("ud","uv","renderer","syncData",r.join(`
`))}const av={};let Gn=av;function QE(){if(Gn===av||Gn!=null&&Gn.isContextLost()){const t=N.ADAPTER.createCanvas();let e;N.PREFER_ENV>=Bn.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Gn=e}return Gn}let Do;function ZE(){if(!Do){Do=xt.MEDIUM;const t=QE();t&&t.getShaderPrecisionFormat&&(Do=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?xt.HIGH:xt.MEDIUM)}return Do}function Lp(t,e){const r=t.getShaderSource(e).split(`
`).map((u,h)=>`${h}: ${u}`),n=t.getShaderInfoLog(e),i=n.split(`
`),s={},o=i.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{r[u-1]=`%c${r[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=r.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function JE(t,e,r,n){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(r,t.COMPILE_STATUS)||Lp(t,r),t.getShaderParameter(n,t.COMPILE_STATUS)||Lp(t,n),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const eT={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function lv(t){return eT[t]}let ko=null;const Up={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function uv(t,e){if(!ko){const r=Object.keys(Up);ko={};for(let n=0;n<r.length;++n){const i=r[n];ko[t[i]]=Up[i]}}return ko[e]}function Gp(t,e,r){if(t.substring(0,9)!=="precision"){let n=e;return e===xt.HIGH&&r!==xt.HIGH&&(n=xt.MEDIUM),`precision ${n} float;
${t}`}else if(r!==xt.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let Qi;function tT(){if(typeof Qi=="boolean")return Qi;try{Qi=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Qi=!1}return Qi}let rT=0;const Bo={},Vn=class{constructor(t,e,r="pixi-shader",n={}){this.extra={},this.id=rT++,this.vertexSrc=t||Vn.defaultVertexSrc,this.fragmentSrc=e||Vn.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(r=r.replace(/\s+/g,"-"),Bo[r]?(Bo[r]++,r+=`-${Bo[r]}`):Bo[r]=1,this.vertexSrc=`#define SHADER_NAME ${r}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${r}
${this.fragmentSrc}`,this.vertexSrc=Gp(this.vertexSrc,Vn.defaultVertexPrecision,xt.HIGH),this.fragmentSrc=Gp(this.fragmentSrc,Vn.defaultFragmentPrecision,ZE())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return WE}static get defaultFragmentSrc(){return XE}static from(t,e,r){const n=t+e;let i=Dp[n];return i||(Dp[n]=i=new Vn(t,e,r)),i}};let Lt=Vn;Lt.defaultVertexPrecision=xt.HIGH;Lt.defaultFragmentPrecision=vr.apple.device?xt.HIGH:xt.MEDIUM;let nT=0;class $t{constructor(e,r,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=nT++,this.static=!!r,this.ubo=!!n,e instanceof Ee?(this.buffer=e,this.buffer.type=sr.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Ee(new Float32Array(1)),this.buffer.type=sr.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,r,n){if(!this.ubo)this.uniforms[e]=new $t(r,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,r,n){return new $t(e,r,n)}static uboFrom(e,r){return new $t(e,r??!0,!0)}}class or{constructor(e,r){this.uniformBindCount=0,this.program=e,r?r instanceof $t?this.uniformGroup=r:this.uniformGroup=new $t(r):this.uniformGroup=new $t({}),this.disposeRunner=new Ht("disposeShader")}checkUniformExists(e,r){if(r.uniforms[e])return!0;for(const n in r.uniforms){const i=r.uniforms[n];if(i.group&&this.checkUniformExists(e,i))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,r,n){const i=Lt.from(e,r);return new or(i,n)}}class iT{constructor(e,r){if(this.vertexSrc=e,this.fragTemplate=r,this.programCache={},this.defaultGroupCache={},!r.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!r.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const n=new Int32Array(e);for(let s=0;s<e;s++)n[s]=s;this.defaultGroupCache[e]=$t.from({uSamplers:n},!0);let i=this.fragTemplate;i=i.replace(/%count%/gi,`${e}`),i=i.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new Lt(this.vertexSrc,i)}const r={tint:new Float32Array([1,1,1,1]),translationMatrix:new de,default:this.defaultGroupCache[e]};return new or(this.programCache[e],r)}generateSampleSrc(e){let r="";r+=`
`,r+=`
`;for(let n=0;n<e;n++)n>0&&(r+=`
else `),n<e-1&&(r+=`if(vTextureId < ${n}.5)`),r+=`
{`,r+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,r+=`
}`;return r+=`
`,r+=`
`,r}}class Jh{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function sT(){return!vr.apple.device}function oT(t){let e=!0;const r=N.ADAPTER.getNavigator();if(vr.tablet||vr.phone){if(vr.apple.device){const n=r.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(e=!1)}if(vr.android.device){const n=r.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(e=!1)}}return e?t:4}class yl{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var aT=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,lT=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Pt=class extends yl{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=nv,this.vertexSize=6,this.state=br.for2d(),this.size=Pt.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??oT(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??sT(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return Z("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return lT}static get defaultFragmentTemplate(){return aT}setShaderGenerator({vertex:t=Pt.defaultVertexSrc,fragment:e=Pt.defaultFragmentTemplate}={}){this.shaderGenerator=new iT(t,e)}contextChange(){const t=this.renderer.gl;N.PREFER_ENV===Bn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),Pt.defaultMaxTextures),this.maxTextures=FE(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=Pt,r=this.size/4,n=Math.floor(r/this.maxTextures)+1;for(;t.length<r;)t.push(new Qh);for(;e.length<n;)e.push(new Jh);for(let i=0;i<this.maxTextures;i++)this._tempBoundTextures[i]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,r=Pt._textureArrayPool,n=this.renderer.batch,i=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++K._globalBatch,a=0,l=r[0],u=0;n.copyBoundTextures(i,e);for(let h=0;h<this._bufferSize;++h){const c=t[h];t[h]=null,c._batchEnabled!==o&&(l.count>=e&&(n.boundArray(l,i,o,e),this.buildDrawCalls(l,u,h),u=h,l=r[++a],++o),c._batchEnabled=o,c.touched=s,l.elements[l.count++]=c)}l.count>0&&(n.boundArray(l,i,o,e),this.buildDrawCalls(l,u,this._bufferSize),++a,++o);for(let h=0;h<i.length;h++)i[h]=null;K._globalBatch=o}buildDrawCalls(t,e,r){const{_bufferedElements:n,_attributeBuffer:i,_indexBuffer:s,vertexSize:o}=this,a=Pt._drawCallPool;let l=this._dcIndex,u=this._aIndex,h=this._iIndex,c=a[l];c.start=this._iIndex,c.texArray=t;for(let d=e;d<r;++d){const f=n[d],p=f._texture.baseTexture,v=Zy[p.alphaMode?1:0][f.blendMode];n[d]=null,e<d&&c.blend!==v&&(c.size=h-c.start,e=d,c=a[++l],c.texArray=t,c.start=h),this.packInterleavedGeometry(f,i,s,u,h),u+=f.vertexData.length/2*o,h+=f.indices.length,c.blend=v}e<r&&(c.size=h-c.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=h}bindAndClearTexArray(t){const e=this.renderer.texture;for(let r=0;r<t.count;r++)e.bind(t.elements[r],t.ids[r]),t.elements[r]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:r}=this;Pt.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(r),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:r}=this.renderer,n=Pt._drawCallPool;let i=null;for(let s=0;s<t;s++){const{texArray:o,type:a,size:l,start:u,blend:h}=n[s];i!==o&&(i=o,this.bindAndClearTexArray(o)),this.state.blendMode=h,r.set(this.state),e.drawElements(a,l,e.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Pt.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=Ga(Math.ceil(t/8)),r=Mp(e),n=e*8;this._aBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._aBuffers[n];return i||(this._aBuffers[n]=i=new Kh(n*this.vertexSize*4)),i}getIndexBuffer(t){const e=Ga(Math.ceil(t/12)),r=Mp(e),n=e*12;this._iBuffers.length<=r&&(this._iBuffers.length=r+1);let i=this._iBuffers[r];return i||(this._iBuffers[r]=i=new Uint16Array(n)),i}packInterleavedGeometry(t,e,r,n,i){const{uint32View:s,float32View:o}=e,a=n/this.vertexSize,l=t.uvs,u=t.indices,h=t.vertexData,c=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),f=oe.shared.setValue(t._tintRGB).toPremultiplied(d,t._texture.baseTexture.alphaMode>0);for(let p=0;p<h.length;p+=2)o[n++]=h[p],o[n++]=h[p+1],o[n++]=l[p],o[n++]=l[p+1],s[n++]=f,o[n++]=c;for(let p=0;p<u.length;p++)r[i++]=a+u[p]}};let Ft=Pt;Ft.defaultBatchSize=4096;Ft.extension={name:"batch",type:F.RendererPlugin};Ft._drawCallPool=[];Ft._textureArrayPool=[];$.add(Ft);var uT=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,hT=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const ss=class extends or{constructor(t,e,r){const n=Lt.from(t||ss.defaultVertexSrc,e||ss.defaultFragmentSrc);super(n,r),this.padding=0,this.resolution=ss.defaultResolution,this.multisample=ss.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new br}apply(t,e,r,n,i){t.applyFilter(this,e,r,n)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return hT}static get defaultFragmentSrc(){return uT}};let Ge=ss;Ge.defaultResolution=1;Ge.defaultMultisample=Ae.NONE;class vl{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new oe(0),this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender;const{backgroundColor:r,background:n,backgroundAlpha:i}=e,s=n??r;s!==void 0&&(this.color=s),this.alpha=i}get color(){return this._backgroundColor.value}set color(e){this._backgroundColor.setValue(e)}get alpha(){return this._backgroundColor.alpha}set alpha(e){this._backgroundColor.setAlpha(e)}get backgroundColor(){return this._backgroundColor}destroy(){}}vl.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};vl.extension={type:[F.RendererSystem,F.CanvasRendererSystem],name:"background"};$.add(vl);class hv{constructor(e){this.renderer=e,this.emptyRenderer=new yl(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,r){const{boundTextures:n}=this.renderer.texture;for(let i=r-1;i>=0;--i)e[i]=n[i]||null,e[i]&&(e[i]._batchLocation=i)}boundArray(e,r,n,i){const{elements:s,ids:o,count:a}=e;let l=0;for(let u=0;u<a;u++){const h=s[u],c=h._batchLocation;if(c>=0&&c<i&&r[c]===h){o[u]=c;continue}for(;l<i;){const d=r[l];if(d&&d._batchEnabled===n&&d._batchLocation===l){l++;continue}o[u]=l,h._batchLocation=l,r[l]=h;break}}}destroy(){this.renderer=null}}hv.extension={type:F.RendererSystem,name:"batch"};$.add(hv);let zp=0;class _l{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=zp++}init(e){if(e.context)this.initFromContext(e.context);else{const r=this.renderer.background.alpha<1,n=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:r,premultipliedAlpha:n,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=zp++,this.renderer.runners.contextChange.emit(e);const r=this.renderer.view;r.addEventListener!==void 0&&(r.addEventListener("webglcontextlost",this.handleContextLost,!1),r.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const r=this.createContext(this.renderer.view,e);this.initFromContext(r)}createContext(e,r){let n;if(N.PREFER_ENV>=Bn.WEBGL2&&(n=e.getContext("webgl2",r)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=e.getContext("webgl",r)||e.getContext("experimental-webgl",r),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,r={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,r,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,r,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const r=e.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),r&&!r.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=n||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=i,i||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}_l.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"};_l.extension={type:F.RendererSystem,name:"context"};$.add(_l);class cT extends eo{upload(e,r,n){const i=e.gl;i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===jt.UNPACK);const s=r.realWidth,o=r.realHeight;return n.width===s&&n.height===o?i.texSubImage2D(r.target,0,0,0,s,o,r.format,n.type,this.data):(n.width=s,n.height=o,i.texImage2D(r.target,0,n.internalFormat,s,o,0,r.format,n.type,this.data)),!0}}class ec{constructor(e,r){this.width=Math.round(e||100),this.height=Math.round(r||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ht("disposeFramebuffer"),this.multisample=Ae.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,r){return this.colorTextures[e]=r||new K(null,{scaleMode:yr.NEAREST,resolution:1,mipmap:ar.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new K(new cT(null,{width:this.width,height:this.height}),{scaleMode:yr.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:ar.OFF,format:k.DEPTH_COMPONENT,type:j.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,r){if(e=Math.round(e),r=Math.round(r),!(e===this.width&&r===this.height)){this.width=e,this.height=r,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const i=this.colorTextures[n],s=i.resolution;i.setSize(e/s,r/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(e/n,r/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class cv extends K{constructor(e={}){if(typeof e=="number"){const r=arguments[0],n=arguments[1],i=arguments[2],s=arguments[3];e={width:r,height:n,scaleMode:i,resolution:s}}e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=Ae.NONE),super(null,e),this.mipmap=ar.OFF,this.valid=!0,this._clear=new oe([0,0,0,0]),this.framebuffer=new ec(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(e){this._clear.setValue(e)}get clearColor(){return this._clear.value}get clear(){return this._clear}resize(e,r){this.framebuffer.resize(e*this.resolution,r*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class en extends Vs{constructor(e){const r=e,n=r.naturalWidth||r.videoWidth||r.width,i=r.naturalHeight||r.videoHeight||r.height;super(n,i),this.source=e,this.noSubImage=!1}static crossOrigin(e,r,n){n===void 0&&!r.startsWith("data:")?e.crossOrigin=kE(r):n!==!1&&(e.crossOrigin=typeof n=="string"?n:"anonymous")}upload(e,r,n,i){const s=e.gl,o=r.realWidth,a=r.realHeight;if(i=i||this.source,typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement){if(!i.complete||i.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&i instanceof HTMLVideoElement&&i.readyState<=1&&i.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r.alphaMode===jt.UNPACK),!this.noSubImage&&r.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,r.format,n.type,i):(n.width=o,n.height=a,s.texImage2D(r.target,0,n.internalFormat,r.format,n.type,i)),!0}update(){if(this.destroyed)return;const e=this.source,r=e.naturalWidth||e.videoWidth||e.width,n=e.naturalHeight||e.videoHeight||e.height;this.resize(r,n),super.update()}dispose(){this.source=null}}class dv extends en{constructor(e,r){if(r=r||{},typeof e=="string"){const n=new Image;en.crossOrigin(n,e,r.crossorigin),n.src=e,e=n}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(r.createBitmap??N.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this.bitmap=null,this._load=null,r.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((r,n)=>{const i=this.source;this.url=i.src;const s=()=>{this.destroyed||(i.onload=null,i.onerror=null,this.resize(i.width,i.height),this._load=null,this.createBitmap?r(this.process()):r(this))};i.complete&&i.src?s():(i.onload=s,i.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const r=globalThis.createImageBitmap,n=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:n?"cors":"no-cors"}).then(i=>i.blob()).then(i=>r(i,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===jt.UNPACK?"premultiply":"none"})).then(i=>this.destroyed?Promise.reject():(this.bitmap=i,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,r,n){if(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,r,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,r,n,this.bitmap),!this.preserveBitmap){let i=!0;const s=r._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==r.dirtyId){i=!1;break}}i&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class fv{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,r,n){const i=r.width,s=r.height;if(n){const o=e.width/2/i,a=e.height/2/s,l=e.x/i+o,u=e.y/s+a;n=pe.add(n,pe.NW),this.x0=l+o*pe.uX(n),this.y0=u+a*pe.uY(n),n=pe.add(n,2),this.x1=l+o*pe.uX(n),this.y1=u+a*pe.uY(n),n=pe.add(n,2),this.x2=l+o*pe.uX(n),this.y2=u+a*pe.uY(n),n=pe.add(n,2),this.x3=l+o*pe.uX(n),this.y3=u+a*pe.uY(n)}else this.x0=e.x/i,this.y0=e.y/s,this.x1=(e.x+e.width)/i,this.y1=e.y/s,this.x2=(e.x+e.width)/i,this.y2=(e.y+e.height)/s,this.x3=e.x/i,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Hp=new fv;function No(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class H extends Zs{constructor(e,r,n,i,s,o,a){if(super(),this.noFrame=!1,r||(this.noFrame=!0,r=new q(0,0,1,1)),e instanceof H&&(e=e.baseTexture),this.baseTexture=e,this._frame=r,this.trim=i,this.valid=!1,this._uvs=Hp,this.uvMatrix=null,this.orig=n||r,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new ne(o.x,o.y):new ne(0,0),this.defaultBorders=a,this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=r:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:r}=this.baseTexture;r!=null&&r.url&&Qt[r.url]&&H.removeFromCache(r.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,H.removeFromCache(this),this.textureCacheIds=null}clone(){var i;const e=this._frame.clone(),r=this._frame===this.orig?e:this.orig.clone(),n=new H(this.baseTexture,!this.noFrame&&e,r,(i=this.trim)==null?void 0:i.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(n._frame=e),n}updateUvs(){this._uvs===Hp&&(this._uvs=new fv),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,r={},n=N.STRICT_TEXTURE_CACHE){const i=typeof e=="string";let s=null;if(i)s=e;else if(e instanceof K){if(!e.cacheId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${Rn()}`,K.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(r==null?void 0:r.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${Rn()}`}s=e._pixiId}let o=Qt[s];if(i&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof K)?(r.resolution||(r.resolution=Zr(e)),o=new H(new K(e,r)),o.baseTexture.cacheId=s,K.addToCache(o.baseTexture,s),H.addToCache(o,s)):!o&&e instanceof K&&(o=new H(e),H.addToCache(o,s)),o}static fromURL(e,r){const n=Object.assign({autoLoad:!1},r==null?void 0:r.resourceOptions),i=H.from(e,Object.assign({resourceOptions:n},r),!1),s=i.baseTexture.resource;return i.baseTexture.valid?Promise.resolve(i):s.load().then(()=>Promise.resolve(i))}static fromBuffer(e,r,n,i){return new H(K.fromBuffer(e,r,n,i))}static fromLoader(e,r,n,i){const s=new K(e,Object.assign({scaleMode:K.defaultOptions.scaleMode,resolution:Zr(r)},i)),{resource:o}=s;o instanceof dv&&(o.url=r);const a=new H(s);return n||(n=r),K.addToCache(a.baseTexture,n),H.addToCache(a,n),n!==r&&(K.addToCache(a.baseTexture,r),H.addToCache(a,r)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,r){r&&(e.textureCacheIds.includes(r)||e.textureCacheIds.push(r),Qt[r]&&Qt[r]!==e&&console.warn(`Texture added to the cache with an id [${r}] that already had an entry`),Qt[r]=e)}static removeFromCache(e){if(typeof e=="string"){const r=Qt[e];if(r){const n=r.textureCacheIds.indexOf(e);return n>-1&&r.textureCacheIds.splice(n,1),delete Qt[e],r}}else if(e!=null&&e.textureCacheIds){for(let r=0;r<e.textureCacheIds.length;++r)Qt[e.textureCacheIds[r]]===e&&delete Qt[e.textureCacheIds[r]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:r,y:n,width:i,height:s}=e,o=r+i>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${r} + ${i} = ${r+i} > ${this.baseTexture.width}`,h=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${h}`)}this.valid=i&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return H._EMPTY||(H._EMPTY=new H(new K),No(H._EMPTY),No(H._EMPTY.baseTexture)),H._EMPTY}static get WHITE(){if(!H._WHITE){const e=N.ADAPTER.createCanvas(16,16),r=e.getContext("2d");e.width=16,e.height=16,r.fillStyle="white",r.fillRect(0,0,16,16),H._WHITE=new H(K.from(e)),No(H._WHITE),No(H._WHITE.baseTexture)}return H._WHITE}}class Nn extends H{constructor(e,r){super(e,r),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,r,n=!0){const i=this.baseTexture.resolution,s=Math.round(e*i)/i,o=Math.round(r*i)/i;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:r}=this;r.resolution!==e&&(r.setResolution(e),this.resize(r.width,r.height,!1))}static create(e){return new Nn(new cv(e))}}class pv{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,r,n=Ae.NONE){const i=new cv(Object.assign({width:e,height:r,resolution:1,multisample:n},this.textureOptions));return new Nn(i)}getOptimalTexture(e,r,n=1,i=Ae.NONE){let s;e=Math.ceil(e*n-1e-6),r=Math.ceil(r*n-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||r!==this._pixelsHeight?(e=Ga(e),r=Ga(r),s=((e&65535)<<16|r&65535)>>>0,i>1&&(s+=i*4294967296)):s=i>1?-i:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,r,i)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(e,r,n){const i=this.getOptimalTexture(e.width,e.height,r||e.resolution,n||Ae.NONE);return i.filterFrame=e.filterFrame,i}returnTexture(e){const r=e.filterPoolKey;e.filterFrame=null,this.texturePool[r].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const r in this.texturePool){const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const r in this.texturePool){if(!(Number(r)<0))continue;const n=this.texturePool[r];if(n)for(let i=0;i<n.length;i++)n[i].destroy(!0);this.texturePool[r]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}pv.SCREEN_KEY=-1;class dT extends Jr{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class mv extends Jr{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Ee(this.vertices),this.uvBuffer=new Ee(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,r){let n=0,i=0;return this.uvs[0]=n,this.uvs[1]=i,this.uvs[2]=n+r.width/e.width,this.uvs[3]=i,this.uvs[4]=n+r.width/e.width,this.uvs[5]=i+r.height/e.height,this.uvs[6]=n,this.uvs[7]=i+r.height/e.height,n=r.x,i=r.y,this.vertices[0]=n,this.vertices[1]=i,this.vertices[2]=n+r.width,this.vertices[3]=i,this.vertices[4]=n+r.width,this.vertices[5]=i+r.height,this.vertices[6]=n,this.vertices[7]=i+r.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class fT{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Ae.NONE,this.sourceFrame=new q,this.destinationFrame=new q,this.bindingSourceFrame=new q,this.bindingDestinationFrame=new q,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const Fo=[new ne,new ne,new ne,new ne],Su=new de;class gv{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new pv,this.statePool=[],this.quad=new dT,this.quadUv=new mv,this.tempRect=new q,this.activeState={},this.globalUniforms=new $t({outputFrame:new q,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,r){const n=this.renderer,i=this.defaultFilterStack,s=this.statePool.pop()||new fT,o=this.renderer.renderTexture;let a=r[0].resolution,l=r[0].multisample,u=r[0].padding,h=r[0].autoFit,c=r[0].legacy??!0;for(let p=1;p<r.length;p++){const v=r[p];a=Math.min(a,v.resolution),l=Math.min(l,v.multisample),u=this.useMaxPadding?Math.max(u,v.padding):u+v.padding,h=h&&v.autoFit,c=c||(v.legacy??!0)}i.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),i.push(s),s.resolution=a,s.multisample=l,s.legacy=c,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(u);const d=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(Su.copyFrom(n.projection.transform).invert(),d),h?(s.sourceFrame.fit(d),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(d)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,l),s.filters=r,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=s.sourceFrame.width,f.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,f),n.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,r=e.pop(),n=r.filters;this.activeState=r;const i=this.globalUniforms.uniforms;i.outputFrame=r.sourceFrame,i.resolution=r.resolution;const s=i.inputSize,o=i.inputPixel,a=i.inputClamp;if(s[0]=r.destinationFrame.width,s[1]=r.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*r.resolution),o[1]=Math.round(s[1]*r.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=r.sourceFrame.width*s[2]-.5*o[2],a[3]=r.sourceFrame.height*s[3]-.5*o[3],r.legacy){const u=i.filterArea;u[0]=r.destinationFrame.width,u[1]=r.destinationFrame.height,u[2]=r.sourceFrame.x,u[3]=r.sourceFrame.y,i.filterClamp=i.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,r.renderTexture,l.renderTexture,Jt.BLEND,r),this.returnFilterTexture(r.renderTexture);else{let u=r.renderTexture,h=this.getOptimalFilterTexture(u.width,u.height,r.resolution);h.filterFrame=u.filterFrame;let c=0;for(c=0;c<n.length-1;++c){c===1&&r.multisample>1&&(h=this.getOptimalFilterTexture(u.width,u.height,r.resolution),h.filterFrame=u.filterFrame),n[c].apply(this,u,h,Jt.CLEAR,r);const d=u;u=h,h=d}n[c].apply(this,u,l.renderTexture,Jt.BLEND,r),c>1&&r.multisample>1&&this.returnFilterTexture(r.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(h)}r.clear(),this.statePool.push(r)}bindAndClear(e,r=Jt.CLEAR){const{renderTexture:n,state:i}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e!=null&&e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,n.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=i.stateId&1||this.forceClear;(r===Jt.CLEAR||r===Jt.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,r,n,i){const s=this.renderer;s.state.set(e.state),this.bindAndClear(n,i),e.uniforms.uSampler=r,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(r._frame,r.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(rr.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(rr.TRIANGLE_STRIP))}calculateSpriteMatrix(e,r){const{sourceFrame:n,destinationFrame:i}=this.activeState,{orig:s}=r._texture,o=e.set(i.width,0,0,i.height,n.x,n.y),a=r.worldTransform.copyTo(de.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(r.anchor.x,r.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,r,n=1,i=Ae.NONE){return this.texturePool.getOptimalTexture(e,r,n,i)}getFilterTexture(e,r,n){if(typeof e=="number"){const s=e;e=r,r=s}e=e||this.activeState.renderTexture;const i=this.texturePool.getOptimalTexture(e.width,e.height,r||e.resolution,n||Ae.NONE);return i.filterFrame=e.filterFrame,i}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,r){const n=Fo[0],i=Fo[1],s=Fo[2],o=Fo[3];n.set(r.left,r.top),i.set(r.left,r.bottom),s.set(r.right,r.top),o.set(r.right,r.bottom),e.apply(n,n),e.apply(i,i),e.apply(s,s),e.apply(o,o);const a=Math.min(n.x,i.x,s.x,o.x),l=Math.min(n.y,i.y,s.y,o.y),u=Math.max(n.x,i.x,s.x,o.x),h=Math.max(n.y,i.y,s.y,o.y);r.x=a,r.y=l,r.width=u-a,r.height=h-l}roundFrame(e,r,n,i,s){if(!(e.width<=0||e.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?Su.copyFrom(s):Su.identity(),s.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.transformAABB(s,e),e.ceil(r),this.transformAABB(s.invert(),e)}}}gv.extension={type:F.RendererSystem,name:"filter"};$.add(gv);class pT{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Ae.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const mT=new q;class yv{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new ec(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new q,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let r=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;N.PREFER_ENV===Bn.WEBGL_LEGACY&&(r=null,n=null),r?e.drawBuffers=i=>r.drawBuffersWEBGL(i):(this.hasMRT=!1,e.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,r,n=0){const{gl:i}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,i.bindFramebuffer(i.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=n),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,n)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),r){const o=r.width>>n,a=r.height>>n,l=o/r.width;this.setViewport(r.x*l,r.y*l,o,a)}else{const o=e.width>>n,a=e.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,i.bindFramebuffer(i.FRAMEBUFFER,null)),r?this.setViewport(r.x,r.y,r.width,r.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,r,n,i){const s=this.viewport;e=Math.round(e),r=Math.round(r),n=Math.round(n),i=Math.round(i),(s.width!==n||s.height!==i||s.x!==e||s.y!==r)&&(s.x=e,s.y=r,s.width=n,s.height=i,this.gl.viewport(e,r,n,i))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,r,n,i,s=Mh.COLOR|Mh.DEPTH){const{gl:o}=this;o.clearColor(e,r,n,i),o.clear(s)}initFramebuffer(e){const{gl:r}=this,n=new pT(r.createFramebuffer());return n.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(e),e.disposeRunner.add(this),n}resizeFramebuffer(e){const{gl:r}=this,n=e.glFramebuffers[this.CONTEXT_UID];n.stencil&&(r.bindRenderbuffer(r.RENDERBUFFER,n.stencil),n.msaaBuffer?r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,r.DEPTH24_STENCIL8,e.width,e.height):r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_STENCIL,e.width,e.height));const i=e.colorTextures;let s=i.length;r.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=i[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(r.bindRenderbuffer(r.RENDERBUFFER,n.msaaBuffer),r.renderbufferStorageMultisample(r.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,r){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),i.multisample>1&&this.canMultisampleFramebuffer(e)?i.msaaBuffer=i.msaaBuffer||n.createRenderbuffer():i.msaaBuffer&&(n.deleteRenderbuffer(i.msaaBuffer),i.msaaBuffer=null,i.blitFramebuffer&&(i.blitFramebuffer.dispose(),i.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],h=u.parentTextureArray||u;this.renderer.texture.bind(h,0),l===0&&i.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,h._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,i.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,u.target,h._glTextures[this.CONTEXT_UID].texture,r),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const u=e.depthTexture;this.renderer.texture.bind(u,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,r)}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(i.stencil=i.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,i.stencil)):i.stencil&&(n.deleteRenderbuffer(i.stencil),i.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:r}=this;let n=Ae.NONE;if(e<=1||r===null)return n;for(let i=0;i<r.length;i++)if(r[i]<=e){n=r[i];break}return n===1&&(n=Ae.NONE),n}blit(e,r,n){const{current:i,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!i)return;const l=i.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const h=i.colorTextures[0];if(!h)return;l.blitFramebuffer||(l.blitFramebuffer=new ec(i.width,i.height),l.blitFramebuffer.addColorTexture(0,h)),e=l.blitFramebuffer,e.colorTextures[0]!==h&&(e.colorTextures[0]=h,e.dirtyId++,e.dirtyFormat++),(e.width!==i.width||e.height!==i.height)&&(e.width=i.width,e.height=i.height,e.dirtyId++,e.dirtySize++)}r||(r=mT,r.width=i.width,r.height=i.height),n||(n=r);const u=r.width===n.width&&r.height===n.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(r.left,r.top,r.right,r.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR),o.bindFramebuffer(o.READ_FRAMEBUFFER,e.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(e,r){const n=e.glFramebuffers[this.CONTEXT_UID],i=this.gl;if(!n)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),r||(i.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&i.deleteRenderbuffer(n.msaaBuffer),n.stencil&&i.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&this.disposeFramebuffer(n.blitFramebuffer,r)}disposeAll(e){const r=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<r.length;n++)this.disposeFramebuffer(r[n],e)}forceStencil(){const e=this.current;if(!e)return;const r=e.glFramebuffers[this.CONTEXT_UID];if(!r||r.stencil)return;e.stencil=!0;const n=e.width,i=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),r.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,r.multisample,s.DEPTH24_STENCIL8,n,i):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,i),r.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new q}destroy(){this.renderer=null}}yv.extension={type:F.RendererSystem,name:"framebuffer"};$.add(yv);const Au={5126:4,5123:2,5121:1};class vv{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,r=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,r.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;N.PREFER_ENV===Bn.WEBGL_LEGACY&&(n=null),n?(e.createVertexArray=()=>n.createVertexArrayOES(),e.bindVertexArray=i=>n.bindVertexArrayOES(i),e.deleteVertexArray=i=>n.deleteVertexArrayOES(i)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(r.webGLVersion!==2){const n=e.getExtension("ANGLE_instanced_arrays");n?(e.vertexAttribDivisor=(i,s)=>n.vertexAttribDivisorANGLE(i,s),e.drawElementsInstanced=(i,s,o,a,l)=>n.drawElementsInstancedANGLE(i,s,o,a,l),e.drawArraysInstanced=(i,s,o,a)=>n.drawArraysInstancedANGLE(i,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=r.webGLVersion===2||!!r.extensions.uint32ElementIndex}bind(e,r){r=r||this.renderer.shader.shader;const{gl:n}=this;let i=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;i||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=i={},s=!0);const o=i[r.program.id]||this.initGeometryVao(e,r,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(e,r.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,r=this.renderer.buffer;for(let n=0;n<e.buffers.length;n++){const i=e.buffers[n];r.update(i)}}checkCompatibility(e,r){const n=e.attributes,i=r.attributeData;for(const s in i)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,r){const n=e.attributes,i=r.attributeData,s=["g",e.id];for(const o in n)i[o]&&s.push(o,i[o].location);return s.join("-")}initGeometryVao(e,r,n=!0){const i=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=r.program;a.glPrograms[s]||this.renderer.shader.generateProgram(r),this.checkCompatibility(e,a);const l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];let h=u[l];if(h)return u[a.id]=h,h;const c=e.buffers,d=e.attributes,f={},p={};for(const v in c)f[v]=0,p[v]=0;for(const v in d)!d[v].size&&a.attributeData[v]?d[v].size=a.attributeData[v].size:d[v].size||console.warn(`PIXI Geometry attribute '${v}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[v].buffer]+=d[v].size*Au[d[v].type];for(const v in d){const x=d[v],y=x.size;x.stride===void 0&&(f[x.buffer]===y*Au[x.type]?x.stride=0:x.stride=f[x.buffer]),x.start===void 0&&(x.start=p[x.buffer],p[x.buffer]+=y*Au[x.type])}h=i.createVertexArray(),i.bindVertexArray(h);for(let v=0;v<c.length;v++){const x=c[v];o.bind(x),n&&x._glBuffers[s].refCount++}return this.activateVao(e,a),u[a.id]=h,u[l]=h,i.bindVertexArray(null),o.unbind(sr.ARRAY_BUFFER),h}disposeGeometry(e,r){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const n=e.glVertexArrayObjects[this.CONTEXT_UID],i=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!n){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!r&&o.dispose(s[l],r))}if(!r){for(const l in n)if(l[0]==="g"){const u=n[l];this._activeVao===u&&this.unbind(),i.deleteVertexArray(u)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const r=Object.keys(this.managedGeometries);for(let n=0;n<r.length;n++)this.disposeGeometry(this.managedGeometries[r[n]],e)}activateVao(e,r){const n=this.gl,i=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const u in a){const h=a[u],c=o[h.buffer],d=c._glBuffers[i];if(r.attributeData[u]){l!==d&&(s.bind(c),l=d);const f=r.attributeData[u].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,h.size,h.type||n.FLOAT,h.normalized,h.stride,h.start),h.instance)if(this.hasInstance)n.vertexAttribDivisor(f,h.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,r,n,i){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,r||o.indexBuffer.data.length,l,(n||0)*a,i||1):s.drawElements(e,r||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,n,r||o.getSize(),i||1):s.drawArrays(e,n,r||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}vv.extension={type:F.RendererSystem,name:"geometry"};$.add(vv);const $p=new de;class _v{constructor(e,r){this._texture=e,this.mapCoord=new de,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof r>"u"?.5:r,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,r){r===void 0&&(r=e);const n=this.mapCoord;for(let i=0;i<e.length;i+=2){const s=e[i],o=e[i+1];r[i]=s*n.a+o*n.c+n.tx,r[i+1]=s*n.b+o*n.d+n.ty}return r}update(e){const r=this._texture;if(!r||!r.valid||!e&&this._textureID===r._updateID)return!1;this._textureID=r._updateID,this._updateID++;const n=r._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const i=r.orig,s=r.trim;s&&($p.set(i.width/s.width,0,0,i.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append($p));const o=r.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(r._frame.x+l+u)/o.width,a[1]=(r._frame.y+l+u)/o.height,a[2]=(r._frame.x+r._frame.width-l+u)/o.width,a[3]=(r._frame.y+r._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=r._frame.width===o.width&&r._frame.height===o.height&&r.rotate===0,!0}}var gT=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,yT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class vT extends Ge{constructor(e,r,n){let i=null;typeof e!="string"&&r===void 0&&n===void 0&&(i=e,e=void 0,r=void 0,n=void 0),super(e||yT,r||gT,n),this.maskSprite=i,this.maskMatrix=new de}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,r,n,i){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new _v(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,r,n,i))}}class _T{constructor(e=null){this.type=Ie.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Ge.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Ie.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class xv{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,r){let n=r;if(!n.isMaskData){const s=this.maskDataPool.pop()||new _T;s.pooled=!0,s.maskObject=r,n=s}const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(i),n._colorMask=i?i._colorMask:15,n.autoDetect&&this.detect(n),n._target=e,n.type!==Ie.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Ie.SCISSOR:this.renderer.scissor.push(n);break;case Ie.STENCIL:this.renderer.stencil.push(n);break;case Ie.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Ie.COLOR:this.pushColorMask(n);break}n.type===Ie.SPRITE&&this.maskStack.push(n)}pop(e){const r=this.maskStack.pop();if(!(!r||r._target!==e)){if(r.enabled)switch(r.type){case Ie.SCISSOR:this.renderer.scissor.pop(r);break;case Ie.STENCIL:this.renderer.stencil.pop(r.maskObject);break;case Ie.SPRITE:this.popSpriteMask(r);break;case Ie.COLOR:this.popColorMask(r);break}if(r.reset(),r.pooled&&this.maskDataPool.push(r),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Ie.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(e){const r=e.maskObject;r?r.isSprite?e.type=Ie.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Ie.SCISSOR:e.type=Ie.STENCIL:e.type=Ie.COLOR}pushSpriteMask(e){const{maskObject:r}=e,n=e._target;let i=e._filters;i||(i=this.alphaMaskPool[this.alphaMaskIndex],i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new vT]));const s=this.renderer,o=s.renderTexture;let a,l;if(o.current){const h=o.current;a=e.resolution||h.resolution,l=e.multisample??h.multisample}else a=e.resolution||s.resolution,l=e.multisample??s.multisample;i[0].resolution=a,i[0].multisample=l,i[0].maskSprite=r;const u=n.filterArea;n.filterArea=r.getBounds(!0),s.filter.push(n,i),n.filterArea=u,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const r=e._colorMask,n=e._colorMask=r&e.colorMask;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(e){const r=e._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==r&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}xv.extension={type:F.RendererSystem,name:"mask"};$.add(xv);class wv{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:r}=this.renderer,n=this.getStackLength();this.maskStack=e;const i=this.getStackLength();i!==n&&(i===0?r.disable(this.glConst):(r.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Vp=new de,jp=[],sa=class extends wv{constructor(t){super(t),this.glConst=N.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:r}=t,{renderer:n}=this,i=n.renderTexture,s=r.getBounds(!0,jp.pop()??new q);this.roundFrameToPixels(s,i.current?i.current.resolution:n.resolution,i.sourceFrame,i.destinationFrame,n.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:r,c:n,d:i}=t;return(Math.abs(r)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(i)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||sa.isMatrixRotated(e.worldTransform)||sa.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const r=t._scissorRectLocal;return r.width>0&&r.height>0}roundFrameToPixels(t,e,r,n,i){sa.isMatrixRotated(i)||(i=i?Vp.copyFrom(i):Vp.identity(),i.translate(-r.x,-r.y).scale(n.width/r.width,n.height/r.height).translate(n.x,n.y),this.renderer.filter.transformAABB(i,t),t.fit(n),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&jp.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let Ev=sa;Ev.extension={type:F.RendererSystem,name:"scissor"};$.add(Ev);class Tv extends wv{constructor(e){super(e),this.glConst=N.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const r=e.maskObject,{gl:n}=this.renderer,i=e._stencilCounter;i===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,i,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),r.renderable=!0,r.render(this.renderer),this.renderer.batch.flush(),r.renderable=!1,s!==0&&(e._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const r=this.renderer.gl;if(this.getStackLength()===0)r.disable(r.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,i=n?n._colorMask:15;i!==0&&(n._colorMask=0,r.colorMask(!1,!1,!1,!1)),r.stencilOp(r.KEEP,r.KEEP,r.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,i!==0&&(n._colorMask=i,r.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}Tv.extension={type:F.RendererSystem,name:"stencil"};$.add(Tv);class Sv{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return Z("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return Z("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return Z("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(){const e=this.rendererPlugins;for(const r in e)this.plugins[r]=new e[r](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}Sv.extension={type:[F.RendererSystem,F.CanvasRendererSystem],name:"_plugin"};$.add(Sv);class Av{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new de,this.transform=null}update(e,r,n,i){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=r||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,i),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,r,n,i){const s=this.projectionMatrix,o=i?-1:1;s.identity(),s.a=1/r.width*2,s.d=o*(1/r.height*2),s.tx=-1-r.x*s.a,s.ty=-o-r.y*s.d}setTransform(e){}destroy(){this.renderer=null}}Av.extension={type:F.RendererSystem,name:"projection"};$.add(Av);const xT=new Sd;class Cv{constructor(e){this.renderer=e,this._tempMatrix=new de}generateTexture(e,r){const{region:n,...i}=r||{},s=n||e.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=Nn.create({width:s.width,height:s.height,...i});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=e.transform;return e.transform=xT,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}Cv.extension={type:[F.RendererSystem,F.CanvasRendererSystem],name:"textureGenerator"};$.add(Cv);const on=new q,Zi=new q;class bv{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new q,this.destinationFrame=new q,this.viewportFrame=new q}contextChange(){var r;const e=(r=this.renderer)==null?void 0:r.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(e&&e.alpha&&e.premultipliedAlpha)}bind(e=null,r,n){const i=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,r||(on.width=e.frame.width,on.height=e.frame.height,r=on),n||(Zi.x=e.frame.x,Zi.y=e.frame.y,Zi.width=r.width,Zi.height=r.height,n=Zi),o=s.framebuffer):(a=i.resolution,r||(on.width=i._view.screen.width,on.height=i._view.screen.height,r=on),n||(n=on,n.width=r.width,n.height=r.height));const l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,e||(l.y=i.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,r,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(r),this.destinationFrame.copyFrom(n)}clear(e,r){const n=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,i=oe.shared.setValue(e||n);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&i.premultiply(i.alpha);const s=this.destinationFrame,o=this.current?this.current.baseTexture:this.renderer._view.screen,a=s.width!==o.width||s.height!==o.height;if(a){let{x:l,y:u,width:h,height:c}=this.viewportFrame;l=Math.round(l),u=Math.round(u),h=Math.round(h),c=Math.round(c),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(l,u,h,c)}this.renderer.framebuffer.clear(i.red,i.green,i.blue,i.alpha,r),a&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}bv.extension={type:F.RendererSystem,name:"renderTexture"};$.add(bv);class wT{constructor(e,r){this.program=e,this.uniformData=r,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function ET(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const s=e.getActiveAttrib(t,i);if(s.name.startsWith("gl_"))continue;const o=uv(e,s.type),a={type:o,name:s.name,size:lv(o),location:e.getAttribLocation(t,s.name)};r[s.name]=a}return r}function TT(t,e){const r={},n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let i=0;i<n;i++){const s=e.getActiveUniform(t,i),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=uv(e,s.type);r[o]={name:o,index:i,type:l,size:s.size,isArray:a,value:ov(l,s.size)}}return r}function ST(t,e){var l;const r=Op(t,t.VERTEX_SHADER,e.vertexSrc),n=Op(t,t.FRAGMENT_SHADER,e.fragmentSrc),i=t.createProgram();t.attachShader(i,r),t.attachShader(i,n);const s=(l=e.extra)==null?void 0:l.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(i,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(i),t.getProgramParameter(i,t.LINK_STATUS)||JE(t,i,r,n),e.attributeData=ET(i,t),e.uniformData=TT(i,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const u=Object.keys(e.attributeData);u.sort((h,c)=>h>c?1:-1);for(let h=0;h<u.length;h++)e.attributeData[u[h]].location=h,t.bindAttribLocation(i,h,u[h]);t.linkProgram(i)}t.deleteShader(r),t.deleteShader(n);const o={};for(const u in e.uniformData){const h=e.uniformData[u];o[u]={location:t.getUniformLocation(i,u),value:ov(h.type,h.size)}}return new wT(i,o)}function AT(t,e,r,n,i){r.buffer.update(i)}const CT={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},Iv={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function bT(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let r=0,n=0,i=0;for(let s=0;s<e.length;s++){const o=e[s];if(r=Iv[o.data.type],o.data.size>1&&(r=Math.max(r,16)*o.data.size),o.dataLen=r,n%r!==0&&n<16){const a=n%r%16;n+=a,i+=a}n+r>16?(i=Math.ceil(i/16)*16,o.offset=i,i+=r,n=r):(o.offset=i,n+=r,i+=r)}return i=Math.ceil(i/16)*16,{uboElements:e,size:i}}function IT(t,e){const r=[];for(const n in t)e[n]&&r.push(e[n]);return r.sort((n,i)=>n.index-i.index),r}function PT(t,e){if(!t.autoManage)return{size:0,syncFunc:AT};const r=IT(t.uniforms,e),{uboElements:n,size:i}=bT(r),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],l=t.uniforms[a.data.name],u=a.data.name;let h=!1;for(let c=0;c<wi.length;c++){const d=wi[c];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,wi[c].codeUbo(a.data.name,l)),h=!0;break}}if(!h)if(a.data.size>1){const c=lv(a.data.type),d=Math.max(Iv[a.data.type]/16,1),f=c/d,p=(4-f%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const c=CT[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:i,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let RT=0;const Oo={textureCount:0,uboCount:0};class Pv{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=RT++}systemCheck(){if(!tT())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,r){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const n=e.program,i=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==n&&(this.program=n,this.gl.useProgram(i.program)),r||(Oo.textureCount=0,Oo.uboCount=0,this.syncUniformGroup(e.uniformGroup,Oo)),i}setUniforms(e){const r=this.shader.program,n=r.glPrograms[this.renderer.CONTEXT_UID];r.syncUniforms(n.uniformData,e,this.renderer)}syncUniformGroup(e,r){const n=this.getGlProgram();(!e.static||e.dirtyId!==n.uniformDirtyGroups[e.id])&&(n.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,n,r))}syncUniforms(e,r,n){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(r.uniformData,e.uniforms,this.renderer,n)}createSyncGroups(e){const r=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[r]||(this.cache[r]=qE(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[r],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,r){const n=this.getGlProgram();if(!e.static||e.dirtyId!==0||!n.uniformGroups[e.id]){e.dirtyId=0;const i=n.uniformGroups[e.id]||this.createSyncBufferGroup(e,n,r);e.buffer.update(),i(n.uniformData,e.uniforms,this.renderer,Oo,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,n.uniformBufferBindings[r])}createSyncBufferGroup(e,r,n){const{gl:i}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(r.program,n);r.uniformBufferBindings[n]=this.shader.uniformBindCount,i.uniformBlockBinding(r.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=PT(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return r.uniformGroups[e.id]=a.syncFunc,r.uniformGroups[e.id]}getSignature(e,r,n){const i=e.uniforms,s=[`${n}-`];for(const o in i)s.push(o),r[o]&&s.push(r[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const r=this.gl,n=e.program,i=ST(r,n);return n.glPrograms[this.renderer.CONTEXT_UID]=i,i}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Pv.extension={type:F.RendererSystem,name:"shader"};$.add(Pv);class xl{constructor(e){this.renderer=e}run(e){const{renderer:r}=this;r.runners.init.emit(r.options),e.hello&&console.log(`PixiJS 7.2.4 - ${r.rendererLogId} - https://pixijs.com`),r.resize(r.screen.width,r.screen.height)}destroy(){}}xl.defaultOptions={hello:!1};xl.extension={type:[F.RendererSystem,F.CanvasRendererSystem],name:"startup"};$.add(xl);function MT(t,e=[]){return e[X.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.ADD]=[t.ONE,t.ONE],e[X.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.NONE]=[0,0],e[X.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[X.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[X.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[X.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[X.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[X.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[X.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[X.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[X.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[X.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[X.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const DT=0,kT=1,BT=2,NT=3,FT=4,OT=5,tc=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=X.NONE,this._blendEq=!1,this.map=[],this.map[DT]=this.setBlend,this.map[kT]=this.setOffset,this.map[BT]=this.setCullFace,this.map[NT]=this.setDepthTest,this.map[FT]=this.setFrontFace,this.map[OT]=this.setDepthMask,this.checks=[],this.defaultState=new br,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=MT(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,r=0;for(;e;)e&1&&this.map[r].call(this,!!(t.data&1<<r)),e=e>>1,r++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(tc.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(tc.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],r=this.gl;e.length===2?r.blendFunc(e[0],e[1]):r.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,r.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,r.blendEquationSeparate(r.FUNC_ADD,r.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const r=this.checks.indexOf(t);e&&r===-1?this.checks.push(t):!e&&r!==-1&&this.checks.splice(r,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let Rv=tc;Rv.extension={type:F.RendererSystem,name:"state"};$.add(Rv);class LT extends Zs{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const r=(e.priority??[]).filter(i=>e.systems[i]),n=[...r,...Object.keys(e.systems).filter(i=>!r.includes(i))];for(const i of n)this.addSystem(e.systems[i],i)}addRunners(...e){e.forEach(r=>{this.runners[r]=new Ht(r)})}addSystem(e,r){const n=new e(this);if(this[r])throw new Error(`Whoops! The name "${r}" is already in use`);this[r]=n,this._systemsHash[r]=n;for(const i in this.runners)this.runners[i].add(n);return this}emitWithCustomOptions(e,r){const n=Object.keys(this._systemsHash);e.items.forEach(i=>{const s=n.find(o=>this._systemsHash[o]===i);i[e.name](r[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const oa=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=oa.defaultMaxIdle,this.checkCountMax=oa.defaultCheckCountMax,this.mode=oa.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==cd.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let r=!1;for(let n=0;n<e.length;n++){const i=e[n];!i.framebuffer&&this.count-i.touched>this.maxIdle&&(t.destroyTexture(i,!0),e[n]=null,r=!0)}if(r){let n=0;for(let i=0;i<e.length;i++)e[i]!==null&&(e[n++]=e[i]);e.length=n}}unload(t){const e=this.renderer.texture,r=t._texture;r&&!r.framebuffer&&e.destroyTexture(r);for(let n=t.children.length-1;n>=0;n--)this.unload(t.children[n])}destroy(){this.renderer=null}};let Ot=oa;Ot.defaultMode=cd.AUTO;Ot.defaultMaxIdle=60*60;Ot.defaultCheckCountMax=60*10;Ot.extension={type:F.RendererSystem,name:"textureGC"};$.add(Ot);class Cu{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=j.UNSIGNED_BYTE,this.internalFormat=k.RGBA,this.samplerType=0}}function UT(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[j.UNSIGNED_BYTE]:{[k.RGBA]:t.RGBA8,[k.RGB]:t.RGB8,[k.RG]:t.RG8,[k.RED]:t.R8,[k.RGBA_INTEGER]:t.RGBA8UI,[k.RGB_INTEGER]:t.RGB8UI,[k.RG_INTEGER]:t.RG8UI,[k.RED_INTEGER]:t.R8UI,[k.ALPHA]:t.ALPHA,[k.LUMINANCE]:t.LUMINANCE,[k.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[j.BYTE]:{[k.RGBA]:t.RGBA8_SNORM,[k.RGB]:t.RGB8_SNORM,[k.RG]:t.RG8_SNORM,[k.RED]:t.R8_SNORM,[k.RGBA_INTEGER]:t.RGBA8I,[k.RGB_INTEGER]:t.RGB8I,[k.RG_INTEGER]:t.RG8I,[k.RED_INTEGER]:t.R8I},[j.UNSIGNED_SHORT]:{[k.RGBA_INTEGER]:t.RGBA16UI,[k.RGB_INTEGER]:t.RGB16UI,[k.RG_INTEGER]:t.RG16UI,[k.RED_INTEGER]:t.R16UI,[k.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[j.SHORT]:{[k.RGBA_INTEGER]:t.RGBA16I,[k.RGB_INTEGER]:t.RGB16I,[k.RG_INTEGER]:t.RG16I,[k.RED_INTEGER]:t.R16I},[j.UNSIGNED_INT]:{[k.RGBA_INTEGER]:t.RGBA32UI,[k.RGB_INTEGER]:t.RGB32UI,[k.RG_INTEGER]:t.RG32UI,[k.RED_INTEGER]:t.R32UI,[k.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[j.INT]:{[k.RGBA_INTEGER]:t.RGBA32I,[k.RGB_INTEGER]:t.RGB32I,[k.RG_INTEGER]:t.RG32I,[k.RED_INTEGER]:t.R32I},[j.FLOAT]:{[k.RGBA]:t.RGBA32F,[k.RGB]:t.RGB32F,[k.RG]:t.RG32F,[k.RED]:t.R32F,[k.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[j.HALF_FLOAT]:{[k.RGBA]:t.RGBA16F,[k.RGB]:t.RGB16F,[k.RG]:t.RG16F,[k.RED]:t.R16F},[j.UNSIGNED_SHORT_5_6_5]:{[k.RGB]:t.RGB565},[j.UNSIGNED_SHORT_4_4_4_4]:{[k.RGBA]:t.RGBA4},[j.UNSIGNED_SHORT_5_5_5_1]:{[k.RGBA]:t.RGB5_A1},[j.UNSIGNED_INT_2_10_10_10_REV]:{[k.RGBA]:t.RGB10_A2,[k.RGBA_INTEGER]:t.RGB10_A2UI},[j.UNSIGNED_INT_10F_11F_11F_REV]:{[k.RGB]:t.R11F_G11F_B10F},[j.UNSIGNED_INT_5_9_9_9_REV]:{[k.RGB]:t.RGB9_E5},[j.UNSIGNED_INT_24_8]:{[k.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[j.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[k.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[j.UNSIGNED_BYTE]:{[k.RGBA]:t.RGBA,[k.RGB]:t.RGB,[k.ALPHA]:t.ALPHA,[k.LUMINANCE]:t.LUMINANCE,[k.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[j.UNSIGNED_SHORT_5_6_5]:{[k.RGB]:t.RGB},[j.UNSIGNED_SHORT_4_4_4_4]:{[k.RGBA]:t.RGBA},[j.UNSIGNED_SHORT_5_5_5_1]:{[k.RGBA]:t.RGBA}},e}class Mv{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new K,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=UT(e);const r=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=r;for(let i=0;i<r;i++)this.boundTextures[i]=null;this.emptyTextures={};const n=new Cu(e.createTexture());e.bindTexture(e.TEXTURE_2D,n.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=n,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new Cu(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let i=0;i<6;i++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+i,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let i=0;i<this.boundTextures.length;i++)this.bind(null,i)}bind(e,r=0){const{gl:n}=this;if(e=e==null?void 0:e.castToBaseTexture(),e!=null&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const i=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[r]!==e&&(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(e.target,i.texture)),i.dirtyId!==e.dirtyId?(this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),this.updateTexture(e)):i.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[r]=e}else this.currentLocation!==r&&(this.currentLocation=r,n.activeTexture(n.TEXTURE0+r)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[r]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:r,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let i=0;i<n.length;i++)n[i]===this.unknownTexture&&this.bind(null,i)}for(let i=0;i<n.length;i++)n[i]===e&&(this.currentLocation!==i&&(r.activeTexture(r.TEXTURE0+i),this.currentLocation=i),r.bindTexture(e.target,this.emptyTextures[e.target].texture),n[i]=null)}ensureSamplerType(e){const{boundTextures:r,hasIntegerTextures:n,CONTEXT_UID:i}=this;if(n)for(let s=e-1;s>=0;--s){const o=r[s];o&&o._glTextures[i].samplerType!==Dh.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const r=new Cu(this.gl.createTexture());return r.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=r,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),r}initTextureType(e,r){var n;r.internalFormat=((n=this.internalFormats[e.type])==null?void 0:n[e.format])??e.format,this.webGLVersion===2&&e.type===j.HALF_FLOAT?r.type=this.gl.HALF_FLOAT:r.type=e.type}updateTexture(e){var i;const r=e._glTextures[this.CONTEXT_UID];if(!r)return;const n=this.renderer;if(this.initTextureType(e,r),(i=e.resource)!=null&&i.upload(n,e,r))r.samplerType!==Dh.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=n.gl;(r.width!==s||r.height!==o||r.dirtyId<0)&&(r.width=s,r.height=o,a.texImage2D(e.target,0,r.internalFormat,s,o,0,e.format,r.type,null))}e.dirtyStyleId!==r.dirtyStyleId&&this.updateTextureStyle(e),r.dirtyId=e.dirtyId}destroyTexture(e,r){const{gl:n}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),n.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!r)){const i=this.managedTextures.indexOf(e);i!==-1&&_i(this.managedTextures,i,1)}}updateTextureStyle(e){var n;const r=e._glTextures[this.CONTEXT_UID];r&&((e.mipmap===ar.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?r.mipmap=!1:r.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?r.wrapMode=Kr.CLAMP:r.wrapMode=e.wrapMode,(n=e.resource)!=null&&n.style(this.renderer,e,r)||this.setStyle(e,r),r.dirtyStyleId=e.dirtyStyleId)}setStyle(e,r){const n=this.gl;if(r.mipmap&&e.mipmap!==ar.ON_MANUAL&&n.generateMipmap(e.target),n.texParameteri(e.target,n.TEXTURE_WRAP_S,r.wrapMode),n.texParameteri(e.target,n.TEXTURE_WRAP_T,r.wrapMode),r.mipmap){n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===yr.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const i=this.renderer.context.extensions.anisotropicFiltering;if(i&&e.anisotropicLevel>0&&e.scaleMode===yr.LINEAR){const s=Math.min(e.anisotropicLevel,n.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(e.target,i.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(e.target,n.TEXTURE_MIN_FILTER,e.scaleMode===yr.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(e.target,n.TEXTURE_MAG_FILTER,e.scaleMode===yr.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}Mv.extension={type:F.RendererSystem,name:"texture"};$.add(Mv);class Dv{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glTransformFeedbacks[n]||this.createGLTransformFeedback(e);r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,i)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,r){const{gl:n,renderer:i}=this;r&&i.shader.bind(r),n.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:r,renderer:n,CONTEXT_UID:i}=this,s=r.createTransformFeedback();e._glTransformFeedbacks[i]=s,r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(n.buffer.update(a),a._glBuffers[i].refCount++,r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[i].buffer||null))}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,r){const n=e._glTransformFeedbacks[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!r&&s.dispose(a,r))}n&&(r||i.deleteTransformFeedback(n),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}Dv.extension={type:F.RendererSystem,name:"transformFeedback"};$.add(Dv);class wl{constructor(e){this.renderer=e}init(e){this.screen=new q(0,0,e.width,e.height),this.element=e.view||N.ADAPTER.createCanvas(),this.resolution=e.resolution||N.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,r){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(r*this.resolution);const n=this.element.width/this.resolution,i=this.element.height/this.resolution;this.screen.width=n,this.screen.height=i,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${i}px`),this.renderer.emit("resize",n,i),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var r;e&&((r=this.element.parentNode)==null||r.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}wl.defaultOptions={width:800,height:600,resolution:N.RESOLUTION,autoDensity:!1};wl.extension={type:[F.RendererSystem,F.CanvasRendererSystem],name:"_view"};$.add(wl);N.PREFER_ENV=Bn.WEBGL2;N.STRICT_TEXTURE_CACHE=!1;N.RENDER_OPTIONS={..._l.defaultOptions,...vl.defaultOptions,...wl.defaultOptions,...xl.defaultOptions};Object.defineProperties(N,{WRAP_MODE:{get(){return K.defaultOptions.wrapMode},set(t){Z("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),K.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return K.defaultOptions.scaleMode},set(t){Z("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),K.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return K.defaultOptions.mipmap},set(t){Z("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),K.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return K.defaultOptions.anisotropicLevel},set(t){Z("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),K.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return Z("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Ge.defaultResolution},set(t){Ge.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return Z("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Ge.defaultMultisample},set(t){Ge.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return Ft.defaultMaxTextures},set(t){Z("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),Ft.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return Ft.defaultBatchSize},set(t){Z("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),Ft.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return Ft.canUploadSameBuffer},set(t){Z("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),Ft.canUploadSameBuffer=t}},GC_MODE:{get(){return Ot.defaultMode},set(t){Z("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),Ot.defaultMode=t}},GC_MAX_IDLE:{get(){return Ot.defaultMaxIdle},set(t){Z("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),Ot.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return Ot.defaultCheckCountMax},set(t){Z("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),Ot.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return Lt.defaultVertexPrecision},set(t){Z("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Lt.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return Lt.defaultFragmentPrecision},set(t){Z("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Lt.defaultFragmentPrecision=t}}});var Mn=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(Mn||{});class bu{constructor(e,r=null,n=0,i=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=r,this.priority=n,this.once=i}match(e,r=null){return this.fn===e&&this.context===r}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const r=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),r}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const r=this.next;return this.next=e?null:r,this.previous=null,r}}const ut=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new bu(null,null,1/0),this.deltaMS=1/ut.targetFPMS,this.elapsedMS=1/ut.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,r=Mn.NORMAL){return this._addListener(new bu(t,e,r))}addOnce(t,e,r=Mn.NORMAL){return this._addListener(new bu(t,e,r,!0))}_addListener(t){let e=this._head.next,r=this._head;if(!e)t.connect(r);else{for(;e;){if(t.priority>e.priority){t.connect(r);break}r=e,e=e.next}t.previous||t.connect(r)}return this._startIfPossible(),this}remove(t,e){let r=this._head.next;for(;r;)r.match(t,e)?r=r.destroy():r=r.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const i=t-this._lastFrame|0;if(i<this._minElapsedMS)return;this._lastFrame=t-i%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*ut.targetFPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this.deltaTime);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),r=Math.min(Math.max(0,e)/1e3,ut.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!ut._shared){const t=ut._shared=new ut;t.autoStart=!0,t._protected=!0}return ut._shared}static get system(){if(!ut._system){const t=ut._system=new ut;t.autoStart=!0,t._protected=!0}return ut._system}};let Ye=ut;Ye.targetFPMS=.06;Object.defineProperties(N,{TARGET_FPMS:{get(){return Ye.targetFPMS},set(t){Z("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ye.targetFPMS=t}}});class kv{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(r){this._ticker&&this._ticker.remove(this.render,this),this._ticker=r,r&&r.add(this.render,this,Mn.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?Ye.shared:new Ye,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}kv.extension=F.Application;$.add(kv);const Bv=[];$.handleByList(F.Renderer,Bv);function GT(t){for(const e of Bv)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var zT=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,HT=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const $T=zT,Nv=HT;class Fv{constructor(e){this.renderer=e}contextChange(e){let r;if(this.renderer.context.webGLVersion===1){const n=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,n)}else{const n=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),r=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,n)}r>=Ae.HIGH?this.multisample=Ae.HIGH:r>=Ae.MEDIUM?this.multisample=Ae.MEDIUM:r>=Ae.LOW?this.multisample=Ae.LOW:this.multisample=Ae.NONE}destroy(){}}Fv.extension={type:F.RendererSystem,name:"_multisample"};$.add(Fv);class VT{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class Ov{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);r.bindBuffer(e.type,i.buffer)}unbind(e){const{gl:r}=this;r.bindBuffer(e,null)}bindBufferBase(e,r){const{gl:n,CONTEXT_UID:i}=this;if(this.boundBufferBases[r]!==e){const s=e._glBuffers[i]||this.createGLBuffer(e);this.boundBufferBases[r]=e,n.bindBufferBase(n.UNIFORM_BUFFER,r,s.buffer)}}bindBufferRange(e,r,n){const{gl:i,CONTEXT_UID:s}=this;n=n||0;const o=e._glBuffers[s]||this.createGLBuffer(e);i.bindBufferRange(i.UNIFORM_BUFFER,r||0,o.buffer,n*256,256)}update(e){const{gl:r,CONTEXT_UID:n}=this,i=e._glBuffers[n]||this.createGLBuffer(e);if(e._updateID!==i.updateID)if(i.updateID=e._updateID,r.bindBuffer(e.type,i.buffer),i.byteLength>=e.data.byteLength)r.bufferSubData(e.type,0,e.data);else{const s=e.static?r.STATIC_DRAW:r.DYNAMIC_DRAW;i.byteLength=e.data.byteLength,r.bufferData(e.type,e.data,s)}}dispose(e,r){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const n=e._glBuffers[this.CONTEXT_UID],i=this.gl;e.disposeRunner.remove(this),n&&(r||i.deleteBuffer(n.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const r=Object.keys(this.managedBuffers);for(let n=0;n<r.length;n++)this.dispose(this.managedBuffers[r[n]],e)}createGLBuffer(e){const{CONTEXT_UID:r,gl:n}=this;return e._glBuffers[r]=new VT(n.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[r]}}Ov.extension={type:F.RendererSystem,name:"buffer"};$.add(Ov);class Lv{constructor(e){this.renderer=e}render(e,r){const n=this.renderer;let i,s,o,a;if(r&&(i=r.renderTexture,s=r.clear,o=r.transform,a=r.skipUpdateTransform),this.renderingToScreen=!i,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(i||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}n.renderTexture.bind(i),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),e.render(n),n.batch.currentRenderer.flush(),i&&(r.blit&&n.framebuffer.blit(),i.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}Lv.extension={type:F.RendererSystem,name:"objectRenderer"};$.add(Lv);const rc=class extends LT{constructor(t){super(),this.type=Py.WEBGL,t=Object.assign({},N.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new $t({projectionMatrix:new de},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:rc.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(Z("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha),this._plugin.rendererPlugins=rc.__plugins,this.options=t,this.startup.run(this.options)}static test(t){return t!=null&&t.forceCanvas?!1:mE()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return Z("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return Z("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return Z("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return Z("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){Z("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return Z("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(t){Z("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return Z("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let Li=rc;Li.extension={type:F.Renderer,priority:1};Li.__plugins={};Li.__systems={};$.handleByMap(F.RendererPlugin,Li.__plugins);$.handleByMap(F.RendererSystem,Li.__systems);$.add(Li);class Uv extends Vs{constructor(e,r){const{width:n,height:i}=r||{};super(n,i),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new K;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,r){for(let n=0;n<this.length;n++)e[n]&&(e[n].castToBaseTexture?this.addBaseTextureAt(e[n].castToBaseTexture(),n):e[n]instanceof Vs?this.addResourceAt(e[n],n):this.addResourceAt(rv(e[n],r),n))}dispose(){for(let e=0,r=this.length;e<r;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,r){if(!this.items[r])throw new Error(`Index ${r} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[r].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=e,this.items[r].on("update",e.update,e)}unbind(e){super.unbind(e);for(let r=0;r<this.length;r++)this.items[r].parentTextureArray=null,this.items[r].off("update",e.update,e)}load(){if(this._load)return this._load;const r=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(r).then(()=>{const{realWidth:n,realHeight:i}=this.items[0];return this.resize(n,i),Promise.resolve(this)}),this._load}}class jT extends Uv{constructor(e,r){const{width:n,height:i}=r||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:n,height:i}),s&&this.initFromArray(s,r)}addBaseTextureAt(e,r){if(e.resource)this.addResourceAt(e.resource,r);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=mi.TEXTURE_2D_ARRAY}upload(e,r,n){const{length:i,itemDirtyIds:s,items:o}=this,{gl:a}=e;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,i,0,r.format,n.type,null);for(let l=0;l<i;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,r.format,n.type,u.resource.source))}return!0}}class XT extends en{constructor(e){super(e)}static test(e){const{OffscreenCanvas:r}=globalThis;return r&&e instanceof r?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const os=class extends Uv{constructor(t,e){const{width:r,height:n,autoLoad:i,linkBaseTexture:s}=e||{};if(t&&t.length!==os.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:r,height:n});for(let o=0;o<os.SIDES;o++)this.items[o].target=mi.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,t&&this.initFromArray(t,e),i!==!1&&this.load()}bind(t){super.bind(t),t.target=mi.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,r){if(r===void 0&&(r=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=mi.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,r){const n=this.itemDirtyIds;for(let i=0;i<os.SIDES;i++){const s=this.items[i];(n[i]<s.dirtyId||r.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,r),n[i]=s.dirtyId):n[i]<-1&&(t.gl.texImage2D(s.target,0,r.internalFormat,e.realWidth,e.realHeight,0,e.format,r.type,null),n[i]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===os.SIDES}};let Gv=os;Gv.SIDES=6;class li extends en{constructor(e,r){r=r||{};let n,i;typeof e=="string"?(n=li.EMPTY,i=e):(n=e,i=null),super(n),this.url=i,this.crossOrigin=r.crossOrigin??!0,this.alphaMode=typeof r.alphaMode=="number"?r.alphaMode:null,this._load=null,r.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,r)=>{if(this.url===null){e(this);return}try{const n=await N.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const i=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(i,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===jt.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),e(this)}catch(n){if(this.destroyed)return;r(n),this.onError.emit(n)}}),this._load)}upload(e,r,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(r.alphaMode=this.alphaMode),super.upload(e,r,n)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return li._EMPTY=li._EMPTY??N.ADAPTER.createCanvas(0,0),li._EMPTY}}const aa=class extends en{constructor(t,e){e=e||{},super(N.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},aa.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;en.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,r=t.height;if(!e||!r)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=e*this.scale,i=r*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/r*e,i=this._overrideHeight||this._overrideWidth/e*r),n=Math.round(n),i=Math.round(i);const s=this.source;s.width=n,s.height=i,s._pixiId=`canvas_${Rn()}`,s.getContext("2d").drawImage(t,0,0,e,r,0,0,n,i),this._resolve(),this._resolve=null}}static getSize(t){const e=aa.SVG_SIZE.exec(t),r={};return e&&(r[e[1]]=Math.round(parseFloat(e[3])),r[e[5]]=Math.round(parseFloat(e[7]))),r}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&aa.SVG_XML.test(t)}};let js=aa;js.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;js.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const nc=class extends en{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const r=document.createElement("video");r.setAttribute("preload","auto"),r.setAttribute("webkit-playsinline",""),r.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);const n=t[0].src||t[0];en.crossOrigin(r,n,e.crossorigin);for(let i=0;i<t.length;++i){const s=document.createElement("source");let{src:o,mime:a}=t[i];o=o||t[i];const l=o.split("?").shift().toLowerCase(),u=l.slice(l.lastIndexOf(".")+1);a=a||nc.MIME_TYPES[u]||`video/${u}`,s.src=o,s.type=a,r.appendChild(s)}t=r}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){const e=Ye.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(Ye.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(Ye.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(Ye.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(Ye.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(Ye.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||nc.TYPES.includes(e)}};let Ad=nc;Ad.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Ad.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};qh.push(li,dv,XT,Ad,js,eo,Gv,jT);class $a{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?q.EMPTY:(e=e||new q(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,r){const{a:n,b:i,c:s,d:o,tx:a,ty:l}=e,u=n*r.x+s*r.y+a,h=i*r.x+o*r.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,h),this.maxY=Math.max(this.maxY,h)}addQuad(e){let r=this.minX,n=this.minY,i=this.maxX,s=this.maxY,o=e[0],a=e[1];r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[2],a=e[3],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[4],a=e[5],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,o=e[6],a=e[7],r=o<r?o:r,n=a<n?a:n,i=o>i?o:i,s=a>s?a:s,this.minX=r,this.minY=n,this.maxX=i,this.maxY=s}addFrame(e,r,n,i,s){this.addFrameMatrix(e.worldTransform,r,n,i,s)}addFrameMatrix(e,r,n,i,s){const o=e.a,a=e.b,l=e.c,u=e.d,h=e.tx,c=e.ty;let d=this.minX,f=this.minY,p=this.maxX,v=this.maxY,x=o*r+l*n+h,y=a*r+u*n+c;d=x<d?x:d,f=y<f?y:f,p=x>p?x:p,v=y>v?y:v,x=o*i+l*n+h,y=a*i+u*n+c,d=x<d?x:d,f=y<f?y:f,p=x>p?x:p,v=y>v?y:v,x=o*r+l*s+h,y=a*r+u*s+c,d=x<d?x:d,f=y<f?y:f,p=x>p?x:p,v=y>v?y:v,x=o*i+l*s+h,y=a*i+u*s+c,d=x<d?x:d,f=y<f?y:f,p=x>p?x:p,v=y>v?y:v,this.minX=d,this.minY=f,this.maxX=p,this.maxY=v}addVertexData(e,r,n){let i=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=r;l<n;l+=2){const u=e[l],h=e[l+1];i=u<i?u:i,s=h<s?h:s,o=u>o?u:o,a=h>a?h:a}this.minX=i,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,r,n,i){this.addVerticesMatrix(e.worldTransform,r,n,i)}addVerticesMatrix(e,r,n,i,s=0,o=s){const a=e.a,l=e.b,u=e.c,h=e.d,c=e.tx,d=e.ty;let f=this.minX,p=this.minY,v=this.maxX,x=this.maxY;for(let y=n;y<i;y+=2){const g=r[y],m=r[y+1],_=a*g+u*m+c,w=h*m+l*g+d;f=Math.min(f,_-s),v=Math.max(v,_+s),p=Math.min(p,w-o),x=Math.max(x,w+o)}this.minX=f,this.minY=p,this.maxX=v,this.maxY=x}addBounds(e){const r=this.minX,n=this.minY,i=this.maxX,s=this.maxY;this.minX=e.minX<r?e.minX:r,this.minY=e.minY<n?e.minY:n,this.maxX=e.maxX>i?e.maxX:i,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,r){const n=e.minX>r.minX?e.minX:r.minX,i=e.minY>r.minY?e.minY:r.minY,s=e.maxX<r.maxX?e.maxX:r.maxX,o=e.maxY<r.maxY?e.maxY:r.maxY;if(n<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}addBoundsMatrix(e,r){this.addFrameMatrix(r,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,r){const n=e.minX>r.x?e.minX:r.x,i=e.minY>r.y?e.minY:r.y,s=e.maxX<r.x+r.width?e.maxX:r.x+r.width,o=e.maxY<r.y+r.height?e.maxY:r.y+r.height;if(n<=s&&i<=o){const a=this.minX,l=this.minY,u=this.maxX,h=this.maxY;this.minX=n<a?n:a,this.minY=i<l?i:l,this.maxX=s>u?s:u,this.maxY=o>h?o:h}}pad(e=0,r=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=r,this.maxY+=r)}addFramePad(e,r,n,i,s,o){e-=s,r-=o,n+=s,i+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<r?this.minY:r,this.maxY=this.maxY>i?this.maxY:i}}class _e extends Zs{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Sd,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new $a,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const r=Object.keys(e);for(let n=0;n<r.length;++n){const i=r[n];Object.defineProperty(_e.prototype,i,Object.getOwnPropertyDescriptor(e,i))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,r){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),r||(this._boundsRect||(this._boundsRect=new q),r=this._boundsRect),this._bounds.getRectangle(r)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new q),e=this._localBoundsRect),this._localBounds||(this._localBounds=new $a);const r=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const i=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=n,this.transform=r,this._bounds=i,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,r,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,r)}toLocal(e,r,n,i){return r&&(e=r.toGlobal(e,n,i)),i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,n)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,r=0,n=1,i=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=r,this.scale.x=n||1,this.scale.y=i||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new WT),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*$E}set angle(e){this.transform.rotation=e*VE}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount--,r._maskRefCount===0&&(r.renderable=!0,r.isMask=!1))}if(this._mask=e,this._mask){const r=this._mask.isMaskData?this._mask.maskObject:this._mask;r&&(r._maskRefCount===0&&(r.renderable=!1,r.isMask=!0),r._maskRefCount++)}}}}class WT extends _e{constructor(){super(...arguments),this.sortDirty=null}}_e.prototype.displayObjectUpdateTransform=_e.prototype.updateTransform;const YT=new de;function KT(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const ic=class extends _e{constructor(){super(),this.children=[],this.sortableChildren=ic.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const r=this.getChildIndex(t),n=this.getChildIndex(e);this.children[r]=e,this.children[n]=t,this.onChildrenChange(r<n?r:n)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const r=this.getChildIndex(t);_i(this.children,r,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],r=this.children.indexOf(e);if(r===-1)return null;e.parent=null,e.transform._parentID=-1,_i(this.children,r,1),this._boundsID++,this.onChildrenChange(r),e.emit("removed",this),this.emit("childRemoved",e,this,r)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,_i(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const r=t,n=e,i=n-r;let s;if(i>0&&i<=n){s=this.children.splice(r,i);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(i===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,r=this.children.length;e<r;++e){const n=this.children[e];n._lastSortedIndex=e,!t&&n.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(KT),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const r=this.children[t];r.visible&&r.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;r?(r.calculateBounds(),this._bounds.addBoundsMask(e._bounds,r._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const r=super.getLocalBounds(t);if(!e)for(let n=0,i=this.children.length;n<i;++n){const s=this.children[n];s.visible&&s.updateTransform()}return r}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let r,n;this.cullArea?(r=this.cullArea,n=this.worldTransform):this._render!==ic.prototype._render&&(r=this.getBounds(!0));const i=t.projection.transform;if(i&&(n?(n=YT.copyFrom(n),n.prepend(i)):n=i),r&&e.intersects(r,n))this._render(t);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],l=a.cullable;a.cullable=l||!this.cullArea,a.render(t),a.cullable=l}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let r=0,n=this.children.length;r<n;++r)this.children[r].render(t)}}renderAdvanced(t){var i,s,o;const e=this.filters,r=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<e.length;a++)e[a].enabled&&this._enabledFilters.push(e[a])}const n=e&&((i=this._enabledFilters)==null?void 0:i.length)||r&&(!r.isMaskData||r.enabled&&(r.autoDetect||r.type!==Ie.NONE));if(n&&t.batch.flush(),e&&((s=this._enabledFilters)!=null&&s.length)&&t.filter.push(this,this._enabledFilters),r&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(t)}n&&t.batch.flush(),r&&t.mask.pop(this),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,r=this.removeChildren(0,this.children.length);if(e)for(let n=0;n<r.length;++n)r[n].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};let At=ic;At.defaultSortableChildren=!1;At.prototype.containerUpdateTransform=At.prototype.updateTransform;Object.defineProperties(N,{SORTABLE_CHILDREN:{get(){return At.defaultSortableChildren},set(t){Z("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),At.defaultSortableChildren=t}}});const Ji=new ne,qT=new Uint16Array([0,1,2,0,2,3]);class Ui extends At{constructor(e){super(),this._anchor=new Gr(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new oe(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=X.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||H.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=qT,this.pluginName="batch",this.isSprite=!0,this._roundPixels=N.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=Ur(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=Ur(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const r=this.transform.worldTransform,n=r.a,i=r.b,s=r.c,o=r.d,a=r.tx,l=r.ty,u=this.vertexData,h=e.trim,c=e.orig,d=this._anchor;let f=0,p=0,v=0,x=0;if(h?(p=h.x-d._x*c.width,f=p+h.width,x=h.y-d._y*c.height,v=x+h.height):(p=-d._x*c.width,f=p+c.width,x=-d._y*c.height,v=x+c.height),u[0]=n*p+s*x+a,u[1]=o*x+i*p+l,u[2]=n*f+s*x+a,u[3]=o*x+i*f+l,u[4]=n*f+s*v+a,u[5]=o*v+i*f+l,u[6]=n*p+s*v+a,u[7]=o*v+i*p+l,this._roundPixels){const y=N.RESOLUTION;for(let g=0;g<u.length;++g)u[g]=Math.round(u[g]*y)/y}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,r=this.vertexTrimmedData,n=e.orig,i=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,h=s.tx,c=s.ty,d=-i._x*n.width,f=d+n.width,p=-i._y*n.height,v=p+n.height;r[0]=o*d+l*p+h,r[1]=u*p+a*d+c,r[2]=o*f+l*p+h,r[3]=u*p+a*f+c,r[4]=o*f+l*v+h,r[5]=u*v+a*f+c,r[6]=o*d+l*v+h,r[7]=u*v+a*d+c}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,r=this._texture.orig;!e||e.width===r.width&&e.height===r.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new $a),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new q),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Ji);const r=this._texture.orig.width,n=this._texture.orig.height,i=-r*this.anchor.x;let s=0;return Ji.x>=i&&Ji.x<i+r&&(s=-n*this.anchor.y,Ji.y>=s&&Ji.y<s+n)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const n=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(e,r){const n=e instanceof H?e:H.from(e,r);return new Ui(n)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const r=Ur(this.scale.x)||1;this.scale.x=r*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const r=Ur(this.scale.y)||1;this.scale.y=r*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tintColor.value}set tint(e){this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||H.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const zv=new de;_e.prototype._cacheAsBitmap=!1;_e.prototype._cacheData=null;_e.prototype._cacheAsBitmapResolution=null;_e.prototype._cacheAsBitmapMultisample=null;class QT{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(_e.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new QT),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});_e.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};_e.prototype._initCachedDisplayObject=function(e){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const r=this.alpha;this.alpha=1,e.batch.flush();const n=this.getLocalBounds(null,!0).clone();if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;n.pad(p)}n.ceil(N.RESOLUTION);const i=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,l=Nn.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),u=`cacheAsBitmap_${Rn()}`;this._cacheData.textureCacheId=u,K.addToCache(l.baseTexture,u),H.addToCache(l,u);const h=this.transform.localTransform.copyTo(zv).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:h,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(i,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=r;const c=new Ui(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(n.x/n.width),c.anchor.y=-(n.y/n.height),c.alpha=r,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};_e.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};_e.prototype._initCachedDisplayObjectCanvas=function(e){var h;if((h=this._cacheData)!=null&&h.sprite)return;const r=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;const i=e.canvasContext.activeContext,s=e._projTransform;r.ceil(N.RESOLUTION);const o=Nn.create({width:r.width,height:r.height}),a=`cacheAsBitmap_${Rn()}`;this._cacheData.textureCacheId=a,K.addToCache(o.baseTexture,a),H.addToCache(o,a);const l=zv;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=r.x,l.ty-=r.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=i,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const u=new Ui(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(r.x/r.width),u.anchor.y=-(r.y/r.height),u.alpha=n,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};_e.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};_e.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};_e.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,K.removeFromCache(this._cacheData.textureCacheId),H.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};_e.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};_e.prototype.name=null;At.prototype.getChildByName=function(e,r){for(let n=0,i=this.children.length;n<i;n++)if(this.children[n].name===e)return this.children[n];if(r)for(let n=0,i=this.children.length;n<i;n++){const s=this.children[n];if(!s.getChildByName)continue;const o=s.getChildByName(e,!0);if(o)return o}return null};_e.prototype.getGlobalPosition=function(e=new ne,r=!1){return this.parent?this.parent.toGlobal(this.position,e,r):(e.x=this.position.x,e.y=this.position.y),e};var ZT=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class JT extends Ge{constructor(e=1){super($T,ZT,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const eS={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},tS=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function rS(t){const e=eS[t],r=e.length;let n=tS,i="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let l=s.replace("%index%",a.toString());o=a,a>=r&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),i+=l,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}const nS=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function iS(t,e){const r=Math.ceil(t/2);let n=nS,i="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(r-1)}.0`),i+=a,i+=`
`}return n=n.replace("%blur%",i),n=n.replace("%size%",t.toString()),n}class sc extends Ge{constructor(e,r=8,n=4,i=Ge.defaultResolution,s=5){const o=iS(s,e),a=rS(s);super(o,a),this.horizontal=e,this.resolution=i,this._quality=0,this.quality=n,this.blur=r}apply(e,r,n,i){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/r.width):this.uniforms.strength=1/n.height*(n.height/r.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/r.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/r.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,r,n,i);else{const s=e.getFilterTexture(),o=e.renderer;let a=r,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Jt.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,Jt.BLIT),this.uniforms.uSampler=l;const h=l;l=a,a=h,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,n,i),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class sS extends Ge{constructor(e=8,r=4,n=Ge.defaultResolution,i=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new sc(!0,e,r,n,i),this.blurYFilter=new sc(!1,e,r,n,i),this.resolution=n,this.quality=r,this.blur=e,this.repeatEdgePixels=!1}apply(e,r,n,i){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,r,a,Jt.CLEAR),this.blurYFilter.apply(e,a,n,i),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,r,n,i):this.blurXFilter.apply(e,r,n,i)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var oS=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class oc extends Ge{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(Nv,oS,e),this.alpha=1}_loadMatrix(e,r=!1){let n=e;r&&(this._multiply(n,this.uniforms.m,e),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(e,r,n){return e[0]=r[0]*n[0]+r[1]*n[5]+r[2]*n[10]+r[3]*n[15],e[1]=r[0]*n[1]+r[1]*n[6]+r[2]*n[11]+r[3]*n[16],e[2]=r[0]*n[2]+r[1]*n[7]+r[2]*n[12]+r[3]*n[17],e[3]=r[0]*n[3]+r[1]*n[8]+r[2]*n[13]+r[3]*n[18],e[4]=r[0]*n[4]+r[1]*n[9]+r[2]*n[14]+r[3]*n[19]+r[4],e[5]=r[5]*n[0]+r[6]*n[5]+r[7]*n[10]+r[8]*n[15],e[6]=r[5]*n[1]+r[6]*n[6]+r[7]*n[11]+r[8]*n[16],e[7]=r[5]*n[2]+r[6]*n[7]+r[7]*n[12]+r[8]*n[17],e[8]=r[5]*n[3]+r[6]*n[8]+r[7]*n[13]+r[8]*n[18],e[9]=r[5]*n[4]+r[6]*n[9]+r[7]*n[14]+r[8]*n[19]+r[9],e[10]=r[10]*n[0]+r[11]*n[5]+r[12]*n[10]+r[13]*n[15],e[11]=r[10]*n[1]+r[11]*n[6]+r[12]*n[11]+r[13]*n[16],e[12]=r[10]*n[2]+r[11]*n[7]+r[12]*n[12]+r[13]*n[17],e[13]=r[10]*n[3]+r[11]*n[8]+r[12]*n[13]+r[13]*n[18],e[14]=r[10]*n[4]+r[11]*n[9]+r[12]*n[14]+r[13]*n[19]+r[14],e[15]=r[15]*n[0]+r[16]*n[5]+r[17]*n[10]+r[18]*n[15],e[16]=r[15]*n[1]+r[16]*n[6]+r[17]*n[11]+r[18]*n[16],e[17]=r[15]*n[2]+r[16]*n[7]+r[17]*n[12]+r[18]*n[17],e[18]=r[15]*n[3]+r[16]*n[8]+r[17]*n[13]+r[18]*n[18],e[19]=r[15]*n[4]+r[16]*n[9]+r[17]*n[14]+r[18]*n[19]+r[19],e}_colorMatrix(e){const r=new Float32Array(e);return r[4]/=255,r[9]/=255,r[14]/=255,r[19]/=255,r}brightness(e,r){const n=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}tint(e,r){const[n,i,s]=oe.shared.setValue(e).toArray(),o=[n,0,0,0,0,0,i,0,0,0,0,0,s,0,0,0,0,0,1,0];this._loadMatrix(o,r)}greyscale(e,r){const n=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(n,r)}blackAndWhite(e){const r=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(r,e)}hue(e,r){e=(e||0)/180*Math.PI;const n=Math.cos(e),i=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=n+(1-n)*o,u=o*(1-n)-a*i,h=o*(1-n)+a*i,c=o*(1-n)+a*i,d=n+o*(1-n),f=o*(1-n)-a*i,p=o*(1-n)-a*i,v=o*(1-n)+a*i,x=n+o*(1-n),y=[l,u,h,0,0,c,d,f,0,0,p,v,x,0,0,0,0,0,1,0];this._loadMatrix(y,r)}contrast(e,r){const n=(e||0)+1,i=-.5*(n-1),s=[n,0,0,0,i,0,n,0,0,i,0,0,n,0,i,0,0,0,1,0];this._loadMatrix(s,r)}saturate(e=0,r){const n=e*2/3+1,i=(n-1)*-.5,s=[n,i,i,0,0,i,n,i,0,0,i,i,n,0,0,0,0,0,1,0];this._loadMatrix(s,r)}desaturate(){this.saturate(-1)}negative(e){const r=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(r,e)}sepia(e){const r=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(r,e)}technicolor(e){const r=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(r,e)}polaroid(e){const r=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(r,e)}toBGR(e){const r=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(r,e)}kodachrome(e){const r=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(r,e)}browni(e){const r=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(r,e)}vintage(e){const r=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(r,e)}colorTone(e,r,n,i,s){e=e||.2,r=r||.15,n=n||16770432,i=i||3375104;const o=oe.shared,[a,l,u]=o.setValue(n).toArray(),[h,c,d]=o.setValue(i).toArray(),f=[.3,.59,.11,0,0,a,l,u,e,0,h,c,d,r,0,a-h,l-c,u-d,0,0];this._loadMatrix(f,s)}night(e,r){e=e||.1;const n=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(n,r)}predator(e,r){const n=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(n,r)}lsd(e){const r=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(r,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}oc.prototype.grayscale=oc.prototype.greyscale;var aS=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,lS=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class uS extends Ge{constructor(e,r){const n=new de;e.renderable=!1,super(lS,aS,{mapSampler:e._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=n,r==null&&(r=20),this.scale=new ne(r,r)}apply(e,r,n,i){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,r,n,i)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var hS=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,cS=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class dS extends Ge{constructor(){super(cS,hS)}}var fS=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class pS extends Ge{constructor(e=.5,r=Math.random()){super(Nv,fS,{uNoise:0,uSeed:0}),this.noise=e,this.seed=r}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const Xp={AlphaFilter:JT,BlurFilter:sS,BlurFilterPass:sc,ColorMatrixFilter:oc,DisplacementFilter:uS,FXAAFilter:dS,NoiseFilter:pS};Object.entries(Xp).forEach(([t,e])=>{Object.defineProperty(Xp,t,{get(){return Z("7.1.0",`filters.${t} has moved to ${t}`),e}})});class mS{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(e){this.removeTickerListener(),this.events=e,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(e){this._pauseUpdate=e}addTickerListener(){this.tickerAdded||!this.domElement||(Ye.system.add(this.tickerUpdate,this,Mn.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ye.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const e=this.events.rootPointerEvent;this.events.supportsTouchEvents&&e.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:e.clientX,clientY:e.clientY}))}tickerUpdate(e){this._deltaTime+=e,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const Nr=new mS;class to{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=to.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new ne,this.page=new ne,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,r,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,r,n,i,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class Va extends to{constructor(){super(...arguments),this.client=new ne,this.movement=new ne,this.offset=new ne,this.global=new ne,this.screen=new ne}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(e,r,n){return e.worldTransform.applyInverse(n||this.global,r)}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,r,n,i,s,o,a,l,u,h,c,d,f,p,v){throw new Error("Method not implemented.")}}class Rt extends Va{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class Di extends Va{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}Di.DOM_DELTA_PIXEL=0;Di.DOM_DELTA_LINE=1;Di.DOM_DELTA_PAGE=2;const gS=2048,yS=new ne,Iu=new ne;class vS{constructor(e){this.dispatch=new Zs,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,r){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:r,priority:0}),this.mappingTable[e].sort((n,i)=>n.priority-i.priority)}dispatchEvent(e,r){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,r),this.dispatch.emit(r||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const r=this.mappingTable[e.type];if(r)for(let n=0,i=r.length;n<i;n++)r[n].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,r){Nr.pauseUpdate=!0;const i=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",s=this[i](this.rootTarget,this.rootTarget.eventMode,yS.set(e,r),this.hitTestFn,this.hitPruneFn);return s&&s[0]}propagate(e,r){if(!e.target)return;const n=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let i=0,s=n.length-1;i<s;i++)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,r),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let i=n.length-2;i>=0;i--)if(e.currentTarget=n[i],this.notifyTarget(e,r),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,r,n=this._allInteractiveElements){if(n.length===0)return;e.eventPhase=e.BUBBLING_PHASE;const i=Array.isArray(r)?r:[r];for(let s=n.length-1;s>=0;s--)i.forEach(o=>{e.currentTarget=n[s],this.notifyTarget(e,o)})}propagationPath(e){const r=[e];for(let n=0;n<gS&&e!==this.rootTarget;n++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");r.push(e.parent),e=e.parent}return r.reverse(),r}hitTestMoveRecursive(e,r,n,i,s,o=!1){let a=!1;if(this._interactivePrune(e))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Nr.pauseUpdate=!1),e.interactiveChildren&&e.children){const h=e.children;for(let c=h.length-1;c>=0;c--){const d=h[c],f=this.hitTestMoveRecursive(d,this._isInteractive(r)?r:d.eventMode,n,i,s,o||s(e,n));if(f){if(f.length>0&&!f[f.length-1].parent)continue;const p=e.isInteractive();(f.length>0||p)&&(p&&this._allInteractiveElements.push(e),f.push(e)),this._hitElements.length===0&&(this._hitElements=f),a=!0}}}const l=this._isInteractive(r),u=e.isInteractive();return u&&u&&this._allInteractiveElements.push(e),o||this._hitElements.length>0?null:a?this._hitElements:l&&!s(e,n)&&i(e,n)?u?[e]:[]:null}hitTestRecursive(e,r,n,i,s){if(this._interactivePrune(e)||s(e,n))return null;if((e.eventMode==="dynamic"||r==="dynamic")&&(Nr.pauseUpdate=!1),e.interactiveChildren&&e.children){const l=e.children;for(let u=l.length-1;u>=0;u--){const h=l[u],c=this.hitTestRecursive(h,this._isInteractive(r)?r:h.eventMode,n,i,s);if(c){if(c.length>0&&!c[c.length-1].parent)continue;const d=e.isInteractive();return(c.length>0||d)&&c.push(e),c}}}const o=this._isInteractive(r),a=e.isInteractive();return o&&i(e,n)?a?[e]:[]:null}_isInteractive(e){return e==="static"||e==="dynamic"}_interactivePrune(e){return!!(!e||e.isMask||!e.visible||!e.renderable||e.eventMode==="none"||e.eventMode==="passive"&&!e.interactiveChildren||e.isMask)}hitPruneFn(e,r){var n;if(e.hitArea&&(e.worldTransform.applyInverse(r,Iu),!e.hitArea.contains(Iu.x,Iu.y)))return!0;if(e._mask){const i=e._mask.isMaskData?e._mask.maskObject:e._mask;if(i&&!((n=i.containsPoint)!=null&&n.call(i,r)))return!0}return!1}hitTestFn(e,r){return e.eventMode==="passive"?!1:e.hitArea?!0:e.containsPoint?e.containsPoint(r):!1}notifyTarget(e,r){var s,o;r=r??e.type;const n=`on${r}`;(o=(s=e.currentTarget)[n])==null||o.call(s,e);const i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${r}capture`:r;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,r)}mapPointerDown(e){if(!(e instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.createPointerEvent(e);if(this.dispatchEvent(r,"pointerdown"),r.pointerType==="touch")this.dispatchEvent(r,"touchstart");else if(r.pointerType==="mouse"||r.pointerType==="pen"){const i=r.button===2;this.dispatchEvent(r,i?"rightdown":"mousedown")}const n=this.trackingData(e.pointerId);n.pressTargetsByButton[e.button]=r.composedPath(),this.freeEvent(r)}mapPointerMove(e){var l,u;if(!(e instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const r=this.createPointerEvent(e);this._isPointerMoveEvent=!1;const n=r.pointerType==="mouse"||r.pointerType==="pen",i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.overTargets);if(((l=i.overTargets)==null?void 0:l.length)>0&&s!==r.target){const h=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,h,s);if(this.dispatchEvent(c,"pointerout"),n&&this.dispatchEvent(c,"mouseout"),!r.composedPath().includes(s)){const d=this.createPointerEvent(e,"pointerleave",s);for(d.eventPhase=d.AT_TARGET;d.target&&!r.composedPath().includes(d.target);)d.currentTarget=d.target,this.notifyTarget(d),n&&this.notifyTarget(d,"mouseleave"),d.target=d.target.parent;this.freeEvent(d)}this.freeEvent(c)}if(s!==r.target){const h=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(r,h);this.dispatchEvent(c,"pointerover"),n&&this.dispatchEvent(c,"mouseover");let d=s==null?void 0:s.parent;for(;d&&d!==this.rootTarget.parent&&d!==r.target;)d=d.parent;if(!d||d===this.rootTarget.parent){const p=this.clonePointerEvent(r,"pointerenter");for(p.eventPhase=p.AT_TARGET;p.target&&p.target!==s&&p.target!==this.rootTarget.parent;)p.currentTarget=p.target,this.notifyTarget(p),n&&this.notifyTarget(p,"mouseenter"),p.target=p.target.parent;this.freeEvent(p)}this.freeEvent(c)}const o=[],a=this.enableGlobalMoveEvents??!0;this.moveOnAll?o.push("pointermove"):this.dispatchEvent(r,"pointermove"),a&&o.push("globalpointermove"),r.pointerType==="touch"&&(this.moveOnAll?o.splice(1,0,"touchmove"):this.dispatchEvent(r,"touchmove"),a&&o.push("globaltouchmove")),n&&(this.moveOnAll?o.splice(1,0,"mousemove"):this.dispatchEvent(r,"mousemove"),a&&o.push("globalmousemove"),this.cursor=(u=r.target)==null?void 0:u.cursor),o.length>0&&this.all(r,o),this._allInteractiveElements.length=0,this._hitElements.length=0,i.overTargets=r.composedPath(),this.freeEvent(r)}mapPointerOver(e){var o;if(!(e instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),i&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),i&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;r.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId);if(r.overTargets){const n=e.pointerType==="mouse"||e.pointerType==="pen",i=this.findMountedTarget(r.overTargets),s=this.createPointerEvent(e,"pointerout",i);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",i);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;r.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=performance.now(),n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const i=this.trackingData(e.pointerId),s=this.findMountedTarget(i.pressTargetsByButton[e.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete i.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,i.clicksByButton[e.button]||(i.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:r});const l=i.clicksByButton[e.button];if(l.target===a.target&&r-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=r,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(e){if(!(e instanceof Rt)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const r=this.trackingData(e.pointerId),n=this.findMountedTarget(r.pressTargetsByButton[e.button]),i=this.createPointerEvent(e);if(n){let s=n;for(;s;)i.currentTarget=s,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch"?this.notifyTarget(i,"touchendoutside"):(i.pointerType==="mouse"||i.pointerType==="pen")&&this.notifyTarget(i,i.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete r.pressTargetsByButton[e.button]}this.freeEvent(i)}mapWheel(e){if(!(e instanceof Di)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const r=this.createWheelEvent(e);this.dispatchEvent(r),this.freeEvent(r)}findMountedTarget(e){if(!e)return null;let r=e[0];for(let n=1;n<e.length&&e[n].parent===r;n++)r=e[n];return r}createPointerEvent(e,r,n){const i=this.allocateEvent(Rt);return this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.nativeEvent=e.nativeEvent,i.originalEvent=e,i.target=n??this.hitTest(i.global.x,i.global.y)??this._hitElements[0],typeof r=="string"&&(i.type=r),i}createWheelEvent(e){const r=this.allocateEvent(Di);return this.copyWheelData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=this.hitTest(r.global.x,r.global.y),r}clonePointerEvent(e,r){const n=this.allocateEvent(Rt);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyPointerData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=r??n.type,n}copyWheelData(e,r){r.deltaMode=e.deltaMode,r.deltaX=e.deltaX,r.deltaY=e.deltaY,r.deltaZ=e.deltaZ}copyPointerData(e,r){e instanceof Rt&&r instanceof Rt&&(r.pointerId=e.pointerId,r.width=e.width,r.height=e.height,r.isPrimary=e.isPrimary,r.pointerType=e.pointerType,r.pressure=e.pressure,r.tangentialPressure=e.tangentialPressure,r.tiltX=e.tiltX,r.tiltY=e.tiltY,r.twist=e.twist)}copyMouseData(e,r){e instanceof Va&&r instanceof Va&&(r.altKey=e.altKey,r.button=e.button,r.buttons=e.buttons,r.client.copyFrom(e.client),r.ctrlKey=e.ctrlKey,r.metaKey=e.metaKey,r.movement.copyFrom(e.movement),r.screen.copyFrom(e.screen),r.shiftKey=e.shiftKey,r.global.copyFrom(e.global))}copyData(e,r){r.isTrusted=e.isTrusted,r.srcElement=e.srcElement,r.timeStamp=performance.now(),r.type=e.type,r.detail=e.detail,r.view=e.view,r.which=e.which,r.layer.copyFrom(e.layer),r.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const r=this.eventPool.get(e).pop()||new e(this);return r.eventPhase=r.NONE,r.currentTarget=null,r.path=null,r.target=null,r}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const r=e.constructor;this.eventPool.has(r)||this.eventPool.set(r,[]),this.eventPool.get(r).push(e)}notifyListeners(e,r){const n=e.currentTarget._events[r];if(n&&e.currentTarget.isInteractive())if("fn"in n)n.once&&e.currentTarget.removeListener(r,n.fn,void 0,!0),n.fn.call(n.context,e);else for(let i=0,s=n.length;i<s&&!e.propagationImmediatelyStopped;i++)n[i].once&&e.currentTarget.removeListener(r,n[i].fn,void 0,!0),n[i].fn.call(n[i].context,e)}}const _S=1,xS={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},ac=class{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new vS(null),Nr.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Rt(null),this.rootWheelEvent=new Di(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...ac.defaultEventFeatures},{set:(e,r,n)=>(r==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=n),e[r]=n,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(t){const{view:e,resolution:r}=this.renderer;this.setTargetElement(e),this.resolution=r,ac._defaultEventMode=t.eventMode??"auto",Object.assign(this.features,t.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let e=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(e=!1),this.currentCursor===t)return;this.currentCursor=t;const r=this.cursorStyles[t];if(r)switch(typeof r){case"string":e&&(this.domElement.style.cursor=r);break;case"function":r(t);break;case"object":e&&Object.assign(this.domElement.style,r);break}else e&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}get pointer(){return this.rootPointerEvent}onPointerDown(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let r=0,n=e.length;r<n;r++){const i=e[r],s=this.bootstrapEvent(this.rootPointerEvent,i);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(!this.features.move||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;Nr.pointerMoved();const e=this.normalizeToPointerData(t);for(let r=0,n=e.length;r<n;r++){const i=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;let e=t.target;t.composedPath&&t.composedPath().length>0&&(e=t.composedPath()[0]);const r=e!==this.domElement?"outside":"",n=this.normalizeToPointerData(t);for(let i=0,s=n.length;i<s;i++){const o=this.bootstrapEvent(this.rootPointerEvent,n[i]);o.type+=r,this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(!this.features.click||(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch"))return;const e=this.normalizeToPointerData(t);for(let r=0,n=e.length;r<n;r++){const i=this.bootstrapEvent(this.rootPointerEvent,e[r]);this.rootBoundary.mapEvent(i)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){if(!this.features.wheel)return;const e=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(e)}setTargetElement(t){this.removeEvents(),this.domElement=t,Nr.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;Nr.addTickerListener();const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;Nr.removeTickerListener();const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,e,r){let n;this.domElement.parentElement?n=this.domElement.getBoundingClientRect():n={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const i=1/this.resolution;t.x=(e-n.left)*(this.domElement.width/n.width)*i,t.y=(r-n.top)*(this.domElement.height/n.height)*i}normalizeToPointerData(t){const e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let r=0,n=t.changedTouches.length;r<n;r++){const i=t.changedTouches[r];typeof i.button>"u"&&(i.button=0),typeof i.buttons>"u"&&(i.buttons=1),typeof i.isPrimary>"u"&&(i.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof i.width>"u"&&(i.width=i.radiusX||1),typeof i.height>"u"&&(i.height=i.radiusY||1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="touch"),typeof i.pointerId>"u"&&(i.pointerId=i.identifier||0),typeof i.pressure>"u"&&(i.pressure=i.force||.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),typeof i.layerX>"u"&&(i.layerX=i.offsetX=i.clientX),typeof i.layerY>"u"&&(i.layerY=i.offsetY=i.clientY),i.isNormalized=!0,i.type=t.type,e.push(i)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const r=t;typeof r.isPrimary>"u"&&(r.isPrimary=!0),typeof r.width>"u"&&(r.width=1),typeof r.height>"u"&&(r.height=1),typeof r.tiltX>"u"&&(r.tiltX=0),typeof r.tiltY>"u"&&(r.tiltY=0),typeof r.pointerType>"u"&&(r.pointerType="mouse"),typeof r.pointerId>"u"&&(r.pointerId=_S),typeof r.pressure>"u"&&(r.pressure=.5),typeof r.twist>"u"&&(r.twist=0),typeof r.tangentialPressure>"u"&&(r.tangentialPressure=0),r.isNormalized=!0,e.push(r)}else e.push(t);return e}normalizeWheelEvent(t){const e=this.rootWheelEvent;return this.transferMouseData(e,t),e.deltaX=t.deltaX,e.deltaY=t.deltaY,e.deltaZ=t.deltaZ,e.deltaMode=t.deltaMode,this.mapPositionToPoint(e.screen,t.clientX,t.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.nativeEvent=t,e.type=t.type,e}bootstrapEvent(t,e){return t.originalEvent=null,t.nativeEvent=e,t.pointerId=e.pointerId,t.width=e.width,t.height=e.height,t.isPrimary=e.isPrimary,t.pointerType=e.pointerType,t.pressure=e.pressure,t.tangentialPressure=e.tangentialPressure,t.tiltX=e.tiltX,t.tiltY=e.tiltY,t.twist=e.twist,this.transferMouseData(t,e),this.mapPositionToPoint(t.screen,e.clientX,e.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=e.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=xS[t.type]||t.type),t}transferMouseData(t,e){t.isTrusted=e.isTrusted,t.srcElement=e.srcElement,t.timeStamp=performance.now(),t.type=e.type,t.altKey=e.altKey,t.button=e.button,t.buttons=e.buttons,t.client.x=e.clientX,t.client.y=e.clientY,t.ctrlKey=e.ctrlKey,t.metaKey=e.metaKey,t.movement.x=e.movementX,t.movement.y=e.movementY,t.page.x=e.pageX,t.page.y=e.pageY,t.relatedTarget=null,t.shiftKey=e.shiftKey}};let Xs=ac;Xs.extension={name:"events",type:[F.RendererSystem,F.CanvasRendererSystem]};Xs.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};$.add(Xs);function Wp(t){return t==="dynamic"||t==="static"}const wS={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??Wp(Xs.defaultEventMode)},set interactive(t){Z("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=t,this.eventMode=t?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??Xs.defaultEventMode},set eventMode(t){this._internalInteractive=Wp(t),this._internalEventMode=t},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.on(t,e,i)},removeEventListener(t,e,r){const n=typeof r=="boolean"&&r||typeof r=="object"&&r.capture,i=typeof e=="function"?void 0:e;t=n?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,i)},dispatchEvent(t){if(!(t instanceof to))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};_e.mixin(wS);const ES={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};_e.mixin(ES);const TS=9,Lo=100,SS=0,AS=0,Yp=2,Kp=1,CS=-1e3,bS=-1e3,IS=2;class Hv{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(vr.tablet||vr.phone)&&this.createTouchHook();const r=document.createElement("div");r.style.width=`${Lo}px`,r.style.height=`${Lo}px`,r.style.position="absolute",r.style.top=`${SS}px`,r.style.left=`${AS}px`,r.style.zIndex=Yp.toString(),this.div=r,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${Kp}px`,e.style.height=`${Kp}px`,e.style.position="absolute",e.style.top=`${CS}px`,e.style.left=`${bS}px`,e.style.zIndex=IS.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.isInteractive()&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const r=e.children;if(r)for(let n=0;n<r.length;n++)this.updateAccessibleObjects(r[n])}update(){const e=performance.now();if(vr.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:r,y:n,width:i,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=i/o*l,h=s/a*l;let c=this.div;c.style.left=`${r}px`,c.style.top=`${n}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,_i(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{c=f._accessibleDiv;let p=f.hitArea;const v=f.worldTransform;f.hitArea?(c.style.left=`${(v.tx+p.x*v.a)*u}px`,c.style.top=`${(v.ty+p.y*v.d)*h}px`,c.style.width=`${p.width*v.a*u}px`,c.style.height=`${p.height*v.d*h}px`):(p=f.getBounds(),this.capHitArea(p),c.style.left=`${p.x*u}px`,c.style.top=`${p.y*h}px`,c.style.width=`${p.width*u}px`,c.style.height=`${p.height*h}px`,c.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(c.title=f.accessibleTitle),c.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&c.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==c.title||f.tabIndex!==c.tabIndex)&&(c.title=f.accessibleTitle,c.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:r,height:n}=this.renderer;e.x+e.width>r&&(e.width=r-e.x),e.y+e.height>n&&(e.height=n-e.y)}addChild(e){let r=this.pool.pop();r||(r=document.createElement("button"),r.style.width=`${Lo}px`,r.style.height=`${Lo}px`,r.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",r.style.position="absolute",r.style.zIndex=Yp.toString(),r.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?r.setAttribute("aria-live","off"):r.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?r.setAttribute("aria-relevant","additions"):r.setAttribute("aria-relevant","text"),r.addEventListener("click",this._onClick.bind(this)),r.addEventListener("focus",this._onFocus.bind(this)),r.addEventListener("focusout",this._onFocusOut.bind(this))),r.style.pointerEvents=e.accessiblePointerEvents,r.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?r.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(r.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&r.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(r),e._accessibleActive=!0,e._accessibleDiv=r,r.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,r){const{displayObject:n}=e.target,i=this.renderer.events.rootBoundary,s=Object.assign(new to(i),{target:n});i.rootTarget=this.renderer.lastObjectRendered,r.forEach(o=>i.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===TS&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}Hv.extension={name:"accessibility",type:[F.RendererPlugin,F.CanvasRendererPlugin]};$.add(Hv);const lc=class{constructor(t){this.stage=new At,t=Object.assign({forceCanvas:!1},t),this.renderer=GT(t),lc._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const r=lc._plugins.slice(0);r.reverse(),r.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let Cd=lc;Cd._plugins=[];$.handleByList(F.Application,Cd._plugins);class $v{static init(e){Object.defineProperty(this,"resizeTo",{set(r){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=r,r&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let r,n;if(this._resizeTo===globalThis.window)r=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:i,clientHeight:s}=this._resizeTo;r=i,n=s}this.renderer.resize(r,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}$v.extension=F.Application;$.add($v);const qp={loader:F.LoadParser,resolver:F.ResolveParser,cache:F.CacheParser,detection:F.DetectionParser};$.handle(F.Asset,t=>{const e=t.ref;Object.entries(qp).filter(([r])=>!!e[r]).forEach(([r,n])=>$.add(Object.assign(e[r],{extension:e[r].extension??n})))},t=>{const e=t.ref;Object.keys(qp).filter(r=>!!e[r]).forEach(r=>$.remove(e[r]))});class PS{constructor(e,r=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=r}add(e){e.forEach(r=>{this._assetList.push(r)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],r=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<r;n++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function ro(t,e){if(Array.isArray(e)){for(const r of e)if(t.startsWith(`data:${r}`))return!0;return!1}return t.startsWith(`data:${e}`)}function Fn(t,e){const r=t.split("?")[0],n=Ke.extname(r).toLowerCase();return Array.isArray(e)?e.includes(n):n===e}const xr=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(r=>typeof r=="string"?e(r):r):t),uc=(t,e)=>{const r=e.split("?")[1];return r&&(t+=`?${r}`),t};function Vv(t,e,r,n,i){const s=e[r];for(let o=0;o<s.length;o++){const a=s[o];r<e.length-1?Vv(t.replace(n[r],a),e,r+1,n,i):i.push(t.replace(n[r],a))}}function RS(t){const e=/\{(.*?)\}/g,r=t.match(e),n=[];if(r){const i=[];r.forEach(s=>{const o=s.substring(1,s.length-1).split(",");i.push(o)}),Vv(t,i,0,r,n)}else n.push(t);return n}const ja=t=>!Array.isArray(t);class MS{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const r=this._cache.get(e);return r||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),r}set(e,r){const n=xr(e);let i;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(r)){i=l.getCacheableAssets(n,r);break}}i||(i={},n.forEach(a=>{i[a]=r}));const s=Object.keys(i),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==r&&console.warn("[Cache] already has key:",a),this._cache.set(a,i[a])}),r instanceof H){const a=r;n.forEach(l=>{a.baseTexture!==H.EMPTY.baseTexture&&K.addToCache(a.baseTexture,l),H.addToCache(a,l)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const r=this._cacheMap.get(e);r.cacheKeys.forEach(i=>{this._cache.delete(i)}),r.keys.forEach(i=>{this._cacheMap.delete(i)})}get parsers(){return this._parsers}}const es=new MS;class DS{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(e,r,n)=>(this._parsersValidated=!1,e[r]=n,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(e,r){const n={promise:null,parser:null};return n.promise=(async()=>{var o,a;let i=null,s=null;if(r.loadParser&&(s=this._parserHash[r.loadParser],s||console.warn(`[Assets] specified load parser "${r.loadParser}" not found while loading ${e}`)),!s){for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];if(u.load&&((o=u.test)!=null&&o.call(u,e,r,this))){s=u;break}}if(!s)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}i=await s.load(e,r,this),n.parser=s;for(let l=0;l<this.parsers.length;l++){const u=this.parsers[l];u.parse&&u.parse&&await((a=u.testParse)==null?void 0:a.call(u,i,r,this))&&(i=await u.parse(i,r,this)||i,n.parser=u)}return i})(),n}async load(e,r){this._parsersValidated||this._validateParsers();let n=0;const i={},s=ja(e),o=xr(e,u=>({src:u})),a=o.length,l=o.map(async u=>{const h=Ke.toAbsolute(u.src);if(!i[u.src])try{this.promiseCache[h]||(this.promiseCache[h]=this._getLoadPromiseAndParser(h,u)),i[u.src]=await this.promiseCache[h].promise,r&&r(++n/a)}catch(c){throw delete this.promiseCache[h],delete i[u.src],new Error(`[Loader.load] Failed to load ${h}.
${c}`)}});return await Promise.all(l),s?i[o[0].src]:i}async unload(e){const n=xr(e,i=>({src:i})).map(async i=>{var a,l;const s=Ke.toAbsolute(i.src),o=this.promiseCache[s];if(o){const u=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,u,i,this),delete this.promiseCache[s]}});await Promise.all(n)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(e=>e.name).reduce((e,r)=>(e[r.name]&&console.warn(`[Assets] loadParser name conflict "${r.name}"`),{...e,[r.name]:r}),{})}}var lr=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(lr||{});const kS=".json",BS="application/json",NS={extension:{type:F.LoadParser,priority:lr.Low},name:"loadJson",test(t){return ro(t,BS)||Fn(t,kS)},async load(t){return await(await N.ADAPTER.fetch(t)).json()}};$.add(NS);const FS=".txt",OS="text/plain",LS={name:"loadTxt",extension:{type:F.LoadParser,priority:lr.Low},test(t){return ro(t,OS)||Fn(t,FS)},async load(t){return await(await N.ADAPTER.fetch(t)).text()}};$.add(LS);const US=["normal","bold","100","200","300","400","500","600","700","800","900"],GS=[".ttf",".otf",".woff",".woff2"],zS=["font/ttf","font/otf","font/woff","font/woff2"],HS=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function $S(t){const e=Ke.extname(t),i=Ke.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(a=>a.charAt(0).toUpperCase()+a.slice(1));let s=i.length>0;for(const a of i)if(!a.match(HS)){s=!1;break}let o=i.join(" ");return s||(o=`"${o.replace(/[\\"]/g,"\\$&")}"`),o}const VS={extension:{type:F.LoadParser,priority:lr.Low},name:"loadWebFont",test(t){return ro(t,zS)||Fn(t,GS)},async load(t,e){var n,i,s;const r=N.ADAPTER.getFontFaceSet();if(r){const o=[],a=((n=e.data)==null?void 0:n.family)??$S(t),l=((s=(i=e.data)==null?void 0:i.weights)==null?void 0:s.filter(h=>US.includes(h)))??["normal"],u=e.data??{};for(let h=0;h<l.length;h++){const c=l[h],d=new FontFace(a,`url(${encodeURI(t)})`,{...u,weight:c});await d.load(),r.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>N.ADAPTER.getFontFaceSet().delete(e))}};$.add(VS);let Qp=0,Pu;const jS="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",XS={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${jS}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},WS={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let Ru;class YS{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const r=URL.createObjectURL(new Blob([XS.code],{type:"application/javascript"})),n=new Worker(r);n.addEventListener("message",i=>{n.terminate(),URL.revokeObjectURL(r),e(i.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Pu===void 0&&(Pu=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Pu&&(Ru||(Ru=URL.createObjectURL(new Blob([WS.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(Ru),e.addEventListener("message",r=>{this.complete(r.data),this.returnWorker(r.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,r){await this._initWorkers();const n=new Promise((i,s)=>{this.queue.push({id:e,arguments:r,resolve:i,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const r=this.queue.pop(),n=r.id;this.resolveHash[Qp]={resolve:r.resolve,reject:r.reject},e.postMessage({data:r.arguments,uuid:Qp++,id:n})}}const Zp=new YS;function El(t,e,r){const n=new H(t);return n.baseTexture.on("dispose",()=>{delete e.promiseCache[r]}),n}const KS=[".jpeg",".jpg",".png",".webp",".avif"],qS=["image/jpeg","image/png","image/webp","image/avif"];async function QS(t){const e=await N.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const r=await e.blob();return await createImageBitmap(r)}const Tl={name:"loadTextures",extension:{type:F.LoadParser,priority:lr.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(t){return ro(t,qS)||Fn(t,KS)},async load(t,e,r){let n=null;globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await Zp.isImageBitmapSupported()?n=await Zp.loadImageBitmap(t):n=await QS(t):n=await new Promise(s=>{n=new Image,n.crossOrigin=this.config.crossOrigin,n.src=t,n.complete?s(n):n.onload=()=>{s(n)}});const i=new K(n,{resolution:Zr(t),...e.data});return i.resource.src=t,El(i,r,t)},unload(t){t.destroy(!0)}};$.add(Tl);const ZS=".svg",JS="image/svg+xml",eA={extension:{type:F.LoadParser,priority:lr.High},name:"loadSVG",test(t){return ro(t,JS)||Fn(t,ZS)},async testParse(t){return js.test(t)},async parse(t,e,r){var o;const n=new js(t,(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions);await n.load();const i=new K(n,{resolution:Zr(t),...e==null?void 0:e.data});return i.resource.src=t,El(i,r,t)},async load(t,e){return(await N.ADAPTER.fetch(t)).text()},unload:Tl.unload};$.add(eA);class tA{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,r)=>`${e}${this._bundleIdConnector}${r}`,extractAssetIdFromBundle:(e,r)=>r.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(r=>{this._preferredOrder.push(r),r.priority||(r.priority=Object.keys(r.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const r=e;this._defaultSearchParams=Object.keys(r).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(r[n])}`).join("&")}}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(r=>{this.addBundle(r.name,r.assets)})}addBundle(e,r){const n=[];Array.isArray(r)?r.forEach(i=>{if(typeof i.name=="string"){const s=this._createBundleAssetId(e,i.name);n.push(s),this.add([i.name,s],i.srcs,i.data)}else{const s=i.name.map(o=>this._createBundleAssetId(e,o));s.forEach(o=>{n.push(o)}),this.add([...i.name,...s],i.srcs)}}):Object.keys(r).forEach(i=>{n.push(this._createBundleAssetId(e,i)),this.add([i,this._createBundleAssetId(e,i)],r[i])}),this._bundles[e]=n}add(e,r,n){const i=xr(e);i.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(r)||(typeof r=="string"?r=RS(r):r=[r]);const s=r.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let u=0;u<this._parsers.length;u++){const h=this._parsers[u];if(h.test(o)){a=h.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=i),(this._basePath||this._rootPath)&&(a.src=Ke.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??n,a});i.forEach(o=>{this._assetMap[o]=s})}resolveBundle(e){const r=ja(e);e=xr(e);const n={};return e.forEach(i=>{const s=this._bundles[i];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(i,l)]=u}n[i]=a}}),r?n[e[0]]:n}resolveUrl(e){const r=this.resolve(e);if(typeof e!="string"){const n={};for(const i in r)n[i]=r[i].src;return n}return r.src}resolve(e){const r=ja(e);e=xr(e);const n={};return e.forEach(i=>{if(!this._resolverHash[i])if(this._assetMap[i]){let s=this._assetMap[i];const o=this._getPreferredOrder(s),a=s[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(u=>{const h=s.filter(c=>c[l]?c[l]===u:!1);h.length&&(s=h)})}),this._resolverHash[i]=s[0]??a}else{let s=i;(this._basePath||this._rootPath)&&(s=Ke.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[i]={src:s}}n[i]=this._resolverHash[i]}),r?n[e[0]]:n}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let r=0;r<e.length;r++){const n=e[0],i=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(i)return i}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const r=/\?/.test(e)?"&":"?";return`${e}${r}${this._defaultSearchParams}`}}class rA{constructor(){this._detections=[],this._initialized=!1,this.resolver=new tA,this.loader=new DS,this.cache=es,this._backgroundLoader=new PS(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let l=e.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const r=((s=e.texturePreference)==null?void 0:s.resolution)??1,n=typeof r=="number"?[r]:r;let i=[];if((o=e.texturePreference)!=null&&o.format){const l=(a=e.texturePreference)==null?void 0:a.format;i=typeof l=="string"?[l]:l;for(const u of this._detections)await u.test()||(i=await u.remove(i))}else for(const l of this._detections)await l.test()&&(i=await l.add(i));this.resolver.prefer({params:{format:i,resolution:n}}),e.preferences&&this.setPreferences(e.preferences)}add(e,r,n){this.resolver.add(e,r,n)}async load(e,r){this._initialized||await this.init();const n=ja(e),i=xr(e).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(i),o=await this._mapLoadToResolve(s,r);return n?o[i[0]]:o}addBundle(e,r){this.resolver.addBundle(e,r)}async loadBundle(e,r){this._initialized||await this.init();let n=!1;typeof e=="string"&&(n=!0,e=[e]);const i=this.resolver.resolveBundle(e),s={},o=Object.keys(i);let a=0,l=0;const u=()=>{r==null||r(++a/l)},h=o.map(c=>{const d=i[c];return l+=Object.keys(d).length,this._mapLoadToResolve(d,u).then(f=>{s[c]=f})});return await Promise.all(h),n?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(r))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const r=this.resolver.resolveBundle(e);Object.values(r).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return es.get(e);const r={};for(let n=0;n<e.length;n++)r[n]=es.get(e[n]);return r}async _mapLoadToResolve(e,r){const n=Object.values(e),i=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(n,r);this._backgroundLoader.active=!0;const o={};return n.forEach((a,l)=>{const u=s[a.src],h=[a.src];a.alias&&h.push(...a.alias),o[i[l]]=u,es.set(h,u)}),o}async unload(e){this._initialized||await this.init();const r=xr(e).map(i=>typeof i!="string"?i.src:i),n=this.resolver.resolve(r);await this._unloadFromResolved(n)}async unloadBundle(e){this._initialized||await this.init(),e=xr(e);const r=this.resolver.resolveBundle(e),n=Object.keys(r).map(i=>this._unloadFromResolved(r[i]));await Promise.all(n)}async _unloadFromResolved(e){const r=Object.values(e);r.forEach(n=>{es.remove(n.src)}),await this.loader.unload(r)}get detections(){return this._detections}get preferWorkers(){return Tl.config.preferWorkers}set preferWorkers(e){Z("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:e})}setPreferences(e){this.loader.parsers.forEach(r=>{r.config&&Object.keys(r.config).filter(n=>n in e).forEach(n=>{r.config[n]=e[n]})})}}const Uo=new rA;$.handleByList(F.LoadParser,Uo.loader.parsers).handleByList(F.ResolveParser,Uo.resolver.parsers).handleByList(F.CacheParser,Uo.cache.parsers).handleByList(F.DetectionParser,Uo.detections);const nA={extension:F.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof H),getCacheableAssets:(t,e)=>{const r={};return t.forEach(n=>{e.forEach((i,s)=>{r[n+(s===0?"":s+1)]=i})}),r}};$.add(nA);const iA={extension:{type:F.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",e=await N.ADAPTER.fetch(t).then(r=>r.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};$.add(iA);const sA={extension:{type:F.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",e=await N.ADAPTER.fetch(t).then(r=>r.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};$.add(sA);const Jp=["png","jpg","jpeg"],oA={extension:{type:F.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...Jp],remove:async t=>t.filter(e=>!Jp.includes(e))};$.add(oA);const aA={extension:F.ResolveParser,test:Tl.test,parse:t=>{var e;return{resolution:parseFloat(((e=N.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}};$.add(aA);var ht=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(ht||{});const Xa={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35986:1,34798:1,37808:1};let cr,jn;function em(){jn={s3tc:cr.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:cr.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:cr.getExtension("WEBGL_compressed_texture_etc"),etc1:cr.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:cr.getExtension("WEBGL_compressed_texture_pvrtc")||cr.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:cr.getExtension("WEBGL_compressed_texture_atc"),astc:cr.getExtension("WEBGL_compressed_texture_astc")}}const lA={extension:{type:F.DetectionParser,priority:2},test:async()=>{const e=N.ADAPTER.createCanvas().getContext("webgl");return e?(cr=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{jn||em();const e=[];for(const r in jn)jn[r]&&e.push(r);return[...e,...t]},remove:async t=>(jn||em(),t.filter(e=>!(e in jn)))};$.add(lA);class uA extends eo{constructor(e,r={width:1,height:1,autoLoad:!0}){let n,i;typeof e=="string"?(n=e,i=new Uint8Array):(n=null,i=e),super(i,r),this.origin=n,this.buffer=i?new Kh(i):null,this._load=null,this.loaded=!1,this.origin!==null&&r.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(e=>e.blob()).then(e=>e.arrayBuffer()).then(e=>(this.data=new Uint32Array(e),this.buffer=new Kh(e),this.loaded=!0,this.onBlobLoaded(e),this.update(),this)),this._load)}}class Tn extends uA{constructor(e,r){super(e,r),this.format=r.format,this.levels=r.levels||1,this._width=r.width,this._height=r.height,this._extension=Tn._formatToExtension(this.format),(r.levelBuffers||this.buffer)&&(this._levelBuffers=r.levelBuffers||Tn._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,r,n){const i=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:u,levelHeight:h,levelBuffer:c}=this._levelBuffers[o];i.compressedTexImage2D(i.TEXTURE_2D,l,this.format,u,h,0,c)}return!0}onBlobLoaded(){this._levelBuffers=Tn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,r,n,i,s,o,a){const l=new Array(n);let u=e.byteOffset,h=o,c=a,d=h+i-1&~(i-1),f=c+s-1&~(s-1),p=d*f*Xa[r];for(let v=0;v<n;v++)l[v]={levelID:v,levelWidth:n>1?h:d,levelHeight:n>1?c:f,levelBuffer:new Uint8Array(e.buffer,u,p)},u+=p,h=h>>1||1,c=c>>1||1,d=h+i-1&~(i-1),f=c+s-1&~(s-1),p=d*f*Xa[r];return l}}const Mu=4,Go=124,hA=32,tm=20,cA=542327876,zo={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},dA={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},Ho={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},fA=1,pA=2,mA=4,gA=64,yA=512,vA=131072,_A=827611204,xA=861165636,wA=894720068,EA=808540228,TA=4,SA={[_A]:ht.COMPRESSED_RGBA_S3TC_DXT1_EXT,[xA]:ht.COMPRESSED_RGBA_S3TC_DXT3_EXT,[wA]:ht.COMPRESSED_RGBA_S3TC_DXT5_EXT},AA={70:ht.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:ht.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:ht.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:ht.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:ht.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:ht.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:ht.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function CA(t){const e=new Uint32Array(t);if(e[0]!==cA)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(t,0,Go/Uint32Array.BYTES_PER_ELEMENT),i=n[zo.HEIGHT],s=n[zo.WIDTH],o=n[zo.MIPMAP_COUNT],a=new Uint32Array(t,zo.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,hA/Uint32Array.BYTES_PER_ELEMENT),l=a[fA];if(l&mA){const u=a[dA.FOURCC];if(u!==EA){const m=SA[u],_=Mu+Go,w=new Uint8Array(t,_);return[new Tn(w,{format:m,width:s,height:i,levels:o})]}const h=Mu+Go,c=new Uint32Array(e.buffer,h,tm/Uint32Array.BYTES_PER_ELEMENT),d=c[Ho.DXGI_FORMAT],f=c[Ho.RESOURCE_DIMENSION],p=c[Ho.MISC_FLAG],v=c[Ho.ARRAY_SIZE],x=AA[d];if(x===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(p===TA)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const y=new Array,g=Mu+Go+tm;if(v===1)y.push(new Uint8Array(t,g));else{const m=Xa[x];let _=0,w=s,S=i;for(let E=0;E<o;E++){const D=Math.max(1,w+3&-4),I=Math.max(1,S+3&-4),M=D*I*m;_+=M,w=w>>>1,S=S>>>1}let T=g;for(let E=0;E<v;E++)y.push(new Uint8Array(t,T,_)),T+=_}return y.map(m=>new Tn(m,{format:x,width:s,height:i,levels:o}))}throw l&gA?new Error("DDSParser does not support uncompressed texture data."):l&yA?new Error("DDSParser does not supported YUV uncompressed texture data."):l&vA?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&pA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const rm=[171,75,84,88,32,49,49,187,13,10,26,10],bA=67305985,It={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},hc=64,nm={[j.UNSIGNED_BYTE]:1,[j.UNSIGNED_SHORT]:2,[j.INT]:4,[j.UNSIGNED_INT]:4,[j.FLOAT]:4,[j.HALF_FLOAT]:8},IA={[k.RGBA]:4,[k.RGB]:3,[k.RG]:2,[k.RED]:1,[k.LUMINANCE]:1,[k.LUMINANCE_ALPHA]:2,[k.ALPHA]:1},PA={[j.UNSIGNED_SHORT_4_4_4_4]:2,[j.UNSIGNED_SHORT_5_5_5_1]:2,[j.UNSIGNED_SHORT_5_6_5]:2};function RA(t,e,r=!1){const n=new DataView(e);if(!MA(t,n))return null;const i=n.getUint32(It.ENDIANNESS,!0)===bA,s=n.getUint32(It.GL_TYPE,i),o=n.getUint32(It.GL_FORMAT,i),a=n.getUint32(It.GL_INTERNAL_FORMAT,i),l=n.getUint32(It.PIXEL_WIDTH,i),u=n.getUint32(It.PIXEL_HEIGHT,i)||1,h=n.getUint32(It.PIXEL_DEPTH,i)||1,c=n.getUint32(It.NUMBER_OF_ARRAY_ELEMENTS,i)||1,d=n.getUint32(It.NUMBER_OF_FACES,i),f=n.getUint32(It.NUMBER_OF_MIPMAP_LEVELS,i),p=n.getUint32(It.BYTES_OF_KEY_VALUE_DATA,i);if(u===0||h!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const v=4,x=4,y=l+3&-4,g=u+3&-4,m=new Array(c);let _=l*u;s===0&&(_=y*g);let w;if(s!==0?nm[s]?w=nm[s]*IA[o]:w=PA[s]:w=Xa[a],w===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const S=r?kA(n,p,i):null;let E=_*w,D=l,I=u,M=y,B=g,b=hc+p;for(let C=0;C<f;C++){const W=n.getUint32(b,i);let Y=b+4;for(let O=0;O<c;O++){let P=m[O];P||(P=m[O]=new Array(f)),P[C]={levelID:C,levelWidth:f>1||s!==0?D:M,levelHeight:f>1||s!==0?I:B,levelBuffer:new Uint8Array(e,Y,E)},Y+=E}b+=W+4,b=b%4!==0?b+4-b%4:b,D=D>>1||1,I=I>>1||1,M=D+v-1&~(v-1),B=I+x-1&~(x-1),E=M*B*w}return s!==0?{uncompressed:m.map(C=>{let W=C[0].levelBuffer,Y=!1;return s===j.FLOAT?W=new Float32Array(C[0].levelBuffer.buffer,C[0].levelBuffer.byteOffset,C[0].levelBuffer.byteLength/4):s===j.UNSIGNED_INT?(Y=!0,W=new Uint32Array(C[0].levelBuffer.buffer,C[0].levelBuffer.byteOffset,C[0].levelBuffer.byteLength/4)):s===j.INT&&(Y=!0,W=new Int32Array(C[0].levelBuffer.buffer,C[0].levelBuffer.byteOffset,C[0].levelBuffer.byteLength/4)),{resource:new eo(W,{width:C[0].levelWidth,height:C[0].levelHeight}),type:s,format:Y?DA(o):o}}),kvData:S}:{compressed:m.map(C=>new Tn(null,{format:a,width:l,height:u,levels:f,levelBuffers:C})),kvData:S}}function MA(t,e){for(let r=0;r<rm.length;r++)if(e.getUint8(r)!==rm[r])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function DA(t){switch(t){case k.RGBA:return k.RGBA_INTEGER;case k.RGB:return k.RGB_INTEGER;case k.RG:return k.RG_INTEGER;case k.RED:return k.RED_INTEGER;default:return t}}function kA(t,e,r){const n=new Map;let i=0;for(;i<e;){const s=t.getUint32(hc+i,r),o=hc+i+4,a=3-(s+3)%4;if(s===0||s>e-i){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),h=new DataView(t.buffer,o+l+1,s-l-1);n.set(u,h),i+=4+s+a}return n}const BA={extension:{type:F.LoadParser,priority:lr.High},name:"loadDDS",test(t){return Fn(t,".dds")},async load(t,e,r){const i=await(await N.ADAPTER.fetch(t)).arrayBuffer(),o=CA(i).map(a=>{const l=new K(a,{mipmap:ar.OFF,alphaMode:jt.NO_PREMULTIPLIED_ALPHA,resolution:Zr(t),...e.data});return El(l,r,t)});return o.length===1?o[0]:o},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};$.add(BA);const NA={extension:{type:F.LoadParser,priority:lr.High},name:"loadKTX",test(t){return Fn(t,".ktx")},async load(t,e,r){const i=await(await N.ADAPTER.fetch(t)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=RA(t,i),l=s??o,u={mipmap:ar.OFF,alphaMode:jt.NO_PREMULTIPLIED_ALPHA,resolution:Zr(t),...e.data},h=l.map(c=>{l===o&&Object.assign(u,{type:c.type,format:c.format});const d=new K(c,u);return d.ktxKeyValueData=a,El(d,r,t)});return h.length===1?h[0]:h},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};$.add(NA);const FA={extension:F.ResolveParser,test:t=>{const r=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(r)},parse:t=>{var n,i;if(t.split("?")[0].split(".").pop()==="ktx"){const s=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(s.some(o=>t.endsWith(o)))return{resolution:parseFloat(((n=N.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:s.find(o=>t.endsWith(o)),src:t}}return{resolution:parseFloat(((i=N.RETINA_PREFIX.exec(t))==null?void 0:i[1])??"1"),format:t.split(".").pop(),src:t}}};$.add(FA);const OA=new q,LA=4,as=class{constructor(t){this.renderer=t}async image(t,e,r){const n=new Image;return n.src=await this.base64(t,e,r),n}async base64(t,e,r){const n=this.canvas(t);if(n.toBlob!==void 0)return new Promise((i,s)=>{n.toBlob(o=>{if(!o){s(new Error("ICanvas.toBlob failed!"));return}const a=new FileReader;a.onload=()=>i(a.result),a.onerror=s,a.readAsDataURL(o)},e,r)});if(n.toDataURL!==void 0)return n.toDataURL(e,r);if(n.convertToBlob!==void 0){const i=await n.convertToBlob({type:e,quality:r});return new Promise((s,o)=>{const a=new FileReader;a.onload=()=>s(a.result),a.onerror=o,a.readAsDataURL(i)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:r,width:n,height:i,flipY:s}=this._rawPixels(t,e);s&&as._flipY(r,n,i),as._unpremultiplyAlpha(r);const o=new RE(n,i,1),a=new ImageData(new Uint8ClampedArray(r.buffer),n,i);return o.context.putImageData(a,0,0),o.canvas}pixels(t,e){const{pixels:r,width:n,height:i,flipY:s}=this._rawPixels(t,e);return s&&as._flipY(r,n,i),as._unpremultiplyAlpha(r),r}_rawPixels(t,e){const r=this.renderer;if(!r)throw new Error("The Extract has already been destroyed");let n,i=!1,s,o=!1;if(t&&(t instanceof Nn?s=t:(s=r.generateTexture(t,{resolution:r.resolution,multisample:r.multisample}),o=!0)),s){if(n=s.baseTexture.resolution,e=e??s.frame,i=!1,!o){r.renderTexture.bind(s);const c=s.framebuffer.glFramebuffers[r.CONTEXT_UID];c.blitFramebuffer&&r.framebuffer.bind(c.blitFramebuffer)}}else n=r.resolution,e||(e=OA,e.width=r.width/n,e.height=r.height/n),i=!0,r.renderTexture.bind();const a=Math.round(e.width*n),l=Math.round(e.height*n),u=new Uint8Array(LA*a*l),h=r.gl;return h.readPixels(Math.round(e.x*n),Math.round(e.y*n),a,l,h.RGBA,h.UNSIGNED_BYTE,u),o&&(s==null||s.destroy(!0)),{pixels:u,width:a,height:l,flipY:i}}destroy(){this.renderer=null}static _flipY(t,e,r){const n=e<<2,i=r>>1,s=new Uint8Array(n);for(let o=0;o<i;o++){const a=o*n,l=(r-o-1)*n;s.set(t.subarray(a,a+n)),t.copyWithin(a,l,l+n),t.set(s,l)}}static _unpremultiplyAlpha(t){t instanceof Uint8ClampedArray&&(t=new Uint8Array(t.buffer));const e=t.length;for(let r=0;r<e;r+=4){const n=t[r+3];if(n!==0){const i=255.001/n;t[r]=t[r]*i+.5,t[r+1]=t[r+1]*i+.5,t[r+2]=t[r+2]*i+.5}}}};let jv=as;jv.extension={name:"extract",type:F.RendererSystem};$.add(jv);const Wa={build(t){const e=t.points;let r,n,i,s,o,a;if(t.type===Ue.CIRC){const p=t.shape;r=p.x,n=p.y,o=a=p.radius,i=s=0}else if(t.type===Ue.ELIP){const p=t.shape;r=p.x,n=p.y,o=p.width,a=p.height,i=s=0}else{const p=t.shape,v=p.width/2,x=p.height/2;r=p.x+v,n=p.y+x,o=a=Math.max(0,Math.min(p.radius,Math.min(v,x))),i=v-o,s=x-a}if(!(o>=0&&a>=0&&i>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(i?4:0)+(s?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=r+i,e[1]=e[3]=n+s,e[2]=e[4]=r-i,e[5]=e[7]=n-s;return}let h=0,c=l*4+(i?2:0)+2,d=c,f=u;{const p=i+o,v=s,x=r+p,y=r-p,g=n+v;if(e[h++]=x,e[h++]=g,e[--c]=g,e[--c]=y,s){const m=n-v;e[d++]=y,e[d++]=m,e[--f]=m,e[--f]=x}}for(let p=1;p<l;p++){const v=Math.PI/2*(p/l),x=i+Math.cos(v)*o,y=s+Math.sin(v)*a,g=r+x,m=r-x,_=n+y,w=n-y;e[h++]=g,e[h++]=_,e[--c]=_,e[--c]=m,e[d++]=m,e[d++]=w,e[--f]=w,e[--f]=g}{const p=i,v=s+a,x=r+p,y=r-p,g=n+v,m=n-v;e[h++]=x,e[h++]=g,e[--f]=m,e[--f]=x,i&&(e[h++]=y,e[h++]=g,e[--f]=m,e[--f]=y)}},triangulate(t,e){const r=t.points,n=e.points,i=e.indices;if(r.length===0)return;let s=n.length/2;const o=s;let a,l;if(t.type!==Ue.RREC){const h=t.shape;a=h.x,l=h.y}else{const h=t.shape;a=h.x+h.width/2,l=h.y+h.height/2}const u=t.matrix;n.push(t.matrix?u.a*a+u.c*l+u.tx:a,t.matrix?u.b*a+u.d*l+u.ty:l),s++,n.push(r[0],r[1]);for(let h=2;h<r.length;h+=2)n.push(r[h],r[h+1]),i.push(s++,o,s);i.push(o+1,o,s)}};function im(t,e=!1){const r=t.length;if(r<6)return;let n=0;for(let i=0,s=t[r-2],o=t[r-1];i<r;i+=2){const a=t[i],l=t[i+1];n+=(a-s)*(l+o),s=a,o=l}if(!e&&n>0||e&&n<=0){const i=r/2;for(let s=i+i%2;s<r;s+=2){const o=r-s-2,a=r-s-1,l=s,u=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[u]]=[t[u],t[a]]}}}const Xv={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let r=t.points;const n=t.holes,i=e.points,s=e.indices;if(r.length>=6){im(r,!1);const o=[];for(let u=0;u<n.length;u++){const h=n[u];im(h.points,!0),o.push(r.length/2),r=r.concat(h.points)}const a=e1(r,o,2);if(!a)return;const l=i.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<r.length;u++)i.push(r[u])}}},UA={build(t){const e=t.shape,r=e.x,n=e.y,i=e.width,s=e.height,o=t.points;o.length=0,i>=0&&s>=0&&o.push(r,n,r+i,n,r+i,n+s,r,n+s)},triangulate(t,e){const r=t.points,n=e.points;if(r.length===0)return;const i=n.length/2;n.push(r[0],r[1],r[2],r[3],r[6],r[7],r[4],r[5]),e.indices.push(i,i+1,i+2,i+1,i+2,i+3)}},GA={build(t){Wa.build(t)},triangulate(t,e){Wa.triangulate(t,e)}};var kt=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(kt||{}),vn=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(vn||{});const ki={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let r=Math.ceil(t/this.maxLength);return r<this.minSegments?r=this.minSegments:r>this.maxSegments&&(r=this.maxSegments),r}};class sm{static curveTo(e,r,n,i,s,o){const a=o[o.length-2],u=o[o.length-1]-r,h=a-e,c=i-r,d=n-e,f=Math.abs(u*d-h*c);if(f<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==r)&&o.push(e,r),null;const p=u*u+h*h,v=c*c+d*d,x=u*c+h*d,y=s*Math.sqrt(p)/f,g=s*Math.sqrt(v)/f,m=y*x/p,_=g*x/v,w=y*d+g*h,S=y*c+g*u,T=h*(g+m),E=u*(g+m),D=d*(y+_),I=c*(y+_),M=Math.atan2(E-S,T-w),B=Math.atan2(I-S,D-w);return{cx:w+e,cy:S+r,radius:s,startAngle:M,endAngle:B,anticlockwise:h*c>d*u}}static arc(e,r,n,i,s,o,a,l,u){const h=a-o,c=ki._segmentsCount(Math.abs(h)*s,Math.ceil(Math.abs(h)/Ha)*40),d=h/(c*2),f=d*2,p=Math.cos(d),v=Math.sin(d),x=c-1,y=x%1/x;for(let g=0;g<=x;++g){const m=g+y*g,_=d+o+f*m,w=Math.cos(_),S=-Math.sin(_);u.push((p*w+v*S)*s+n,(p*-S+v*w)*s+i)}}}class zA{constructor(){this.reset()}begin(e,r,n){this.reset(),this.style=e,this.start=r,this.attribStart=n}end(e,r){this.attribSize=r-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class bd{static curveLength(e,r,n,i,s,o,a,l){let h=0,c=0,d=0,f=0,p=0,v=0,x=0,y=0,g=0,m=0,_=0,w=e,S=r;for(let T=1;T<=10;++T)c=T/10,d=c*c,f=d*c,p=1-c,v=p*p,x=v*p,y=x*e+3*v*c*n+3*p*d*s+f*a,g=x*r+3*v*c*i+3*p*d*o+f*l,m=w-y,_=S-g,w=y,S=g,h+=Math.sqrt(m*m+_*_);return h}static curveTo(e,r,n,i,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const h=ki._segmentsCount(bd.curveLength(l,u,e,r,n,i,s,o));let c=0,d=0,f=0,p=0,v=0;a.push(l,u);for(let x=1,y=0;x<=h;++x)y=x/h,c=1-y,d=c*c,f=d*c,p=y*y,v=p*y,a.push(f*l+3*d*y*e+3*c*p*n+v*s,f*u+3*d*y*r+3*c*p*i+v*o)}}function om(t,e,r,n,i,s,o,a){const l=t-r*i,u=e-n*i,h=t+r*s,c=e+n*s;let d,f;o?(d=n,f=-r):(d=-n,f=r);const p=l+d,v=u+f,x=h+d,y=c+f;return a.push(p,v,x,y),2}function an(t,e,r,n,i,s,o,a){const l=r-t,u=n-e;let h=Math.atan2(l,u),c=Math.atan2(i-t,s-e);a&&h<c?h+=Math.PI*2:!a&&h>c&&(c+=Math.PI*2);let d=h;const f=c-h,p=Math.abs(f),v=Math.sqrt(l*l+u*u),x=(15*p*Math.sqrt(v)/Math.PI>>0)+1,y=f/x;if(d+=y,a){o.push(t,e,r,n);for(let g=1,m=d;g<x;g++,m+=y)o.push(t,e,t+Math.sin(m)*v,e+Math.cos(m)*v);o.push(t,e,i,s)}else{o.push(r,n,t,e);for(let g=1,m=d;g<x;g++,m+=y)o.push(t+Math.sin(m)*v,e+Math.cos(m)*v,t,e);o.push(i,s,t,e)}return x*2}function HA(t,e){const r=t.shape;let n=t.points||r.points.slice();const i=e.closePointEps;if(n.length===0)return;const s=t.lineStyle,o=new ne(n[0],n[1]),a=new ne(n[n.length-2],n[n.length-1]),l=r.type!==Ue.POLY||r.closeStroke,u=Math.abs(o.x-a.x)<i&&Math.abs(o.y-a.y)<i;if(l){n=n.slice(),u&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const O=(o.x+a.x)*.5,P=(a.y+o.y)*.5;n.unshift(O,P),n.push(O,P)}const h=e.points,c=n.length/2;let d=n.length;const f=h.length/2,p=s.width/2,v=p*p,x=s.miterLimit*s.miterLimit;let y=n[0],g=n[1],m=n[2],_=n[3],w=0,S=0,T=-(g-_),E=y-m,D=0,I=0,M=Math.sqrt(T*T+E*E);T/=M,E/=M,T*=p,E*=p;const B=s.alignment,b=(1-B)*2,C=B*2;l||(s.cap===vn.ROUND?d+=an(y-T*(b-C)*.5,g-E*(b-C)*.5,y-T*b,g-E*b,y+T*C,g+E*C,h,!0)+2:s.cap===vn.SQUARE&&(d+=om(y,g,T,E,b,C,!0,h))),h.push(y-T*b,g-E*b,y+T*C,g+E*C);for(let O=1;O<c-1;++O){y=n[(O-1)*2],g=n[(O-1)*2+1],m=n[O*2],_=n[O*2+1],w=n[(O+1)*2],S=n[(O+1)*2+1],T=-(g-_),E=y-m,M=Math.sqrt(T*T+E*E),T/=M,E/=M,T*=p,E*=p,D=-(_-S),I=m-w,M=Math.sqrt(D*D+I*I),D/=M,I/=M,D*=p,I*=p;const P=m-y,G=g-_,A=m-w,L=S-_,V=P*A+G*L,te=G*A-L*P,ee=te<0;if(Math.abs(te)<.001*Math.abs(V)){h.push(m-T*b,_-E*b,m+T*C,_+E*C),V>=0&&(s.join===kt.ROUND?d+=an(m,_,m-T*b,_-E*b,m-D*b,_-I*b,h,!1)+4:d+=2,h.push(m-D*C,_-I*C,m+D*b,_+I*b));continue}const xe=(-T+y)*(-E+_)-(-T+m)*(-E+g),se=(-D+w)*(-I+_)-(-D+m)*(-I+S),fe=(P*se-A*xe)/te,$e=(L*xe-G*se)/te,lt=(fe-m)*(fe-m)+($e-_)*($e-_),Fe=m+(fe-m)*b,he=_+($e-_)*b,Se=m-(fe-m)*C,be=_-($e-_)*C,Xt=Math.min(P*P+G*G,A*A+L*L),Wt=ee?b:C,Gi=Xt+Wt*Wt*v,i0=lt<=Gi;let no=s.join;if(no===kt.MITER&&lt/v>x&&(no=kt.BEVEL),i0)switch(no){case kt.MITER:{h.push(Fe,he,Se,be);break}case kt.BEVEL:{ee?h.push(Fe,he,m+T*C,_+E*C,Fe,he,m+D*C,_+I*C):h.push(m-T*b,_-E*b,Se,be,m-D*b,_-I*b,Se,be),d+=2;break}case kt.ROUND:{ee?(h.push(Fe,he,m+T*C,_+E*C),d+=an(m,_,m+T*C,_+E*C,m+D*C,_+I*C,h,!0)+4,h.push(Fe,he,m+D*C,_+I*C)):(h.push(m-T*b,_-E*b,Se,be),d+=an(m,_,m-T*b,_-E*b,m-D*b,_-I*b,h,!1)+4,h.push(m-D*b,_-I*b,Se,be));break}}else{switch(h.push(m-T*b,_-E*b,m+T*C,_+E*C),no){case kt.MITER:{ee?h.push(Se,be,Se,be):h.push(Fe,he,Fe,he),d+=2;break}case kt.ROUND:{ee?d+=an(m,_,m+T*C,_+E*C,m+D*C,_+I*C,h,!0)+2:d+=an(m,_,m-T*b,_-E*b,m-D*b,_-I*b,h,!1)+2;break}}h.push(m-D*b,_-I*b,m+D*C,_+I*C),d+=2}}y=n[(c-2)*2],g=n[(c-2)*2+1],m=n[(c-1)*2],_=n[(c-1)*2+1],T=-(g-_),E=y-m,M=Math.sqrt(T*T+E*E),T/=M,E/=M,T*=p,E*=p,h.push(m-T*b,_-E*b,m+T*C,_+E*C),l||(s.cap===vn.ROUND?d+=an(m-T*(b-C)*.5,_-E*(b-C)*.5,m-T*b,_-E*b,m+T*C,_+E*C,h,!1)+2:s.cap===vn.SQUARE&&(d+=om(m,_,T,E,b,C,!1,h)));const W=e.indices,Y=ki.epsilon*ki.epsilon;for(let O=f;O<d+f-2;++O)y=h[O*2],g=h[O*2+1],m=h[(O+1)*2],_=h[(O+1)*2+1],w=h[(O+2)*2],S=h[(O+2)*2+1],!(Math.abs(y*(_-S)+m*(S-g)+w*(g-_))<Y)&&W.push(O,O+1,O+2)}function $A(t,e){let r=0;const n=t.shape,i=t.points||n.points,s=n.type!==Ue.POLY||n.closeStroke;if(i.length===0)return;const o=e.points,a=e.indices,l=i.length/2,u=o.length/2;let h=u;for(o.push(i[0],i[1]),r=1;r<l;r++)o.push(i[r*2],i[r*2+1]),a.push(h,h+1),h++;s&&a.push(h,u)}function am(t,e){t.lineStyle.native?$A(t,e):HA(t,e)}class Id{static curveLength(e,r,n,i,s,o){const a=e-2*n+s,l=r-2*i+o,u=2*n-2*e,h=2*i-2*r,c=4*(a*a+l*l),d=4*(a*u+l*h),f=u*u+h*h,p=2*Math.sqrt(c+d+f),v=Math.sqrt(c),x=2*c*v,y=2*Math.sqrt(f),g=d/v;return(x*p+v*d*(p-y)+(4*f*c-d*d)*Math.log((2*v+g+p)/(g+y)))/(4*x)}static curveTo(e,r,n,i,s){const o=s[s.length-2],a=s[s.length-1],l=ki._segmentsCount(Id.curveLength(o,a,e,r,n,i));let u=0,h=0;for(let c=1;c<=l;++c){const d=c/l;u=o+(e-o)*d,h=a+(r-a)*d,s.push(u+(e+(n-e)*d-u)*d,h+(r+(i-r)*d-h)*d)}}}const Du={[Ue.POLY]:Xv,[Ue.CIRC]:Wa,[Ue.ELIP]:Wa,[Ue.RECT]:UA,[Ue.RREC]:GA},lm=[],$o=[];class Ya{constructor(e,r=null,n=null,i=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=n,this.fillStyle=r,this.matrix=i,this.type=e.type}clone(){return new Ya(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const zn=new ne,Wv=class extends nv{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new $a,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),$o.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),lm.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,r=null,n=null){const i=new Ya(t,e,r,n);return this.graphicsData.push(i),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const r=new Ya(t,null,null,e),n=this.graphicsData[this.graphicsData.length-1];return r.lineStyle=n.lineStyle,n.holes.push(r),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let r=0;r<e.length;++r){const n=e[r];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(t,zn):zn.copyFrom(t),n.shape.contains(zn.x,zn.y))){let i=!1;if(n.holes){for(let s=0;s<n.holes.length;s++)if(n.holes[s].shape.contains(zn.x,zn.y)){i=!0;break}}if(!i)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let r=null,n=null;this.batches.length>0&&(r=this.batches[this.batches.length-1],n=r.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const l=e[a],u=l.fillStyle,h=l.lineStyle;Du[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(u.visible||h.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=d===0?u:h;if(!f.visible)continue;const p=f.texture.baseTexture,v=this.indices.length,x=this.points.length/2;p.wrapMode=Kr.REPEAT,d===0?this.processFill(l):this.processLine(l);const y=this.points.length/2-x;y!==0&&(r&&!this._compareStyles(n,f)&&(r.end(v,x),r=null),r||(r=lm.pop()||new zA,r.begin(f,v,x),this.batches.push(r),n=f),this.addUvs(this.points,t,f.texture,x,y,f.matrix))}}const i=this.indices.length,s=this.points.length/2;if(r&&r.end(i,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const r=this.graphicsData[t],n=r.fillStyle,i=r.lineStyle;if(n&&!n.texture.baseTexture.valid||i&&!i.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,r=t.length;e<r;e++){const n=t[e];for(let i=0;i<n.size;i++){const s=n.start+i;this.indicesUint16[s]=this.indicesUint16[s]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<Wv.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++K._globalBatch;for(let h=0;h<this.drawCalls.length;h++)this.drawCalls[h].texArray.clear(),$o.push(this.drawCalls[h]);this.drawCalls.length=0;const e=this.colors,r=this.textureIds;let n=$o.pop();n||(n=new Qh,n.texArray=new Jh),n.texArray.count=0,n.start=0,n.size=0,n.type=rr.TRIANGLES;let i=0,s=null,o=0,a=!1,l=rr.TRIANGLES,u=0;this.drawCalls.push(n);for(let h=0;h<this.batches.length;h++){const c=this.batches[h],d=8,f=c.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?rr.LINES:rr.TRIANGLES,s=null,i=d,t++),s!==p&&(s=p,p._batchEnabled!==t&&(i===d&&(t++,i=0,n.size>0&&(n=$o.pop(),n||(n=new Qh,n.texArray=new Jh),this.drawCalls.push(n)),n.start=u,n.size=0,n.texArray.count=0,n.type=l),p.touched=1,p._batchEnabled=t,p._batchLocation=i,p.wrapMode=Kr.REPEAT,n.texArray.elements[n.texArray.count++]=p,i++)),n.size+=c.size,u+=c.size,o=p._batchLocation,this.addColors(e,f.color,f.alpha,c.attribSize,c.attribStart),this.addTextureIds(r,o,c.attribSize,c.attribStart)}K._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,r=this.colors,n=this.textureIds,i=new ArrayBuffer(t.length*3*4),s=new Float32Array(i),o=new Uint32Array(i);let a=0;for(let l=0;l<t.length/2;l++)s[a++]=t[l*2],s[a++]=t[l*2+1],s[a++]=e[l*2],s[a++]=e[l*2+1],o[a++]=r[l],s[a++]=n[l];this._buffer.update(i),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?Xv.triangulate(t,this):Du[t.type].triangulate(t,this)}processLine(t){am(t,this);for(let e=0;e<t.holes.length;e++)am(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const r=t[e];Du[r.type].build(r),r.matrix&&this.transformPoints(r.points,r.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let r=0;r<t.length/2;r++){const n=t[r*2],i=t[r*2+1];t[r*2]=e.a*n+e.c*i+e.tx,t[r*2+1]=e.b*n+e.d*i+e.ty}}addColors(t,e,r,n,i=0){const s=oe.shared.setValue(e).toLittleEndianNumber(),o=oe.shared.setValue(s).toPremultiplied(r);t.length=Math.max(t.length,i+n);for(let a=0;a<n;a++)t[i+a]=o}addTextureIds(t,e,r,n=0){t.length=Math.max(t.length,n+r);for(let i=0;i<r;i++)t[n+i]=e}addUvs(t,e,r,n,i,s=null){let o=0;const a=e.length,l=r.frame;for(;o<i;){let h=t[(n+o)*2],c=t[(n+o)*2+1];if(s){const d=s.a*h+s.c*c+s.tx;c=s.b*h+s.d*c+s.ty,h=d}o++,e.push(h/l.width,c/l.height)}const u=r.baseTexture;(l.width<u.width||l.height<u.height)&&this.adjustUvs(e,r,a,i)}adjustUvs(t,e,r,n){const i=e.baseTexture,s=1e-6,o=r+n*2,a=e.frame,l=a.width/i.width,u=a.height/i.height;let h=a.x/a.width,c=a.y/a.height,d=Math.floor(t[r]+s),f=Math.floor(t[r+1]+s);for(let p=r+2;p<o;p+=2)d=Math.min(d,Math.floor(t[p]+s)),f=Math.min(f,Math.floor(t[p+1]+s));h-=d,c-=f;for(let p=r;p<o;p+=2)t[p]=(t[p]+h)*l,t[p+1]=(t[p+1]+c)*u}};let Yv=Wv;Yv.BATCHABLE_SIZE=100;class Sl{constructor(){this.color=16777215,this.alpha=1,this.texture=H.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new Sl;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=H.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class Pd extends Sl{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=vn.BUTT,this.join=kt.MITER,this.miterLimit=10}clone(){const e=new Pd;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const ku={},la=class extends At{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new Sl,this._lineStyle=new Pd,this._matrix=null,this._holeMode=!1,this.state=br.for2d(),this._geometry=t||new Yv,this._geometry.refCount++,this._transformID=-1,this._tintColor=new oe(16777215),this.blendMode=X.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new la(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(t){this._tintColor.setValue(t)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,r,n=.5,i=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:r,alignment:n,native:i}),this.lineTextureStyle(t)}lineTextureStyle(t){const e={width:0,texture:H.WHITE,color:t!=null&&t.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:vn.BUTT,join:kt.MITER,miterLimit:10};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const r=t.width>0&&t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:r},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new xi,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new xi,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const r=this.currentPath.points,n=r[r.length-2],i=r[r.length-1];return(n!==t||i!==e)&&r.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,r,n){this._initCurve();const i=this.currentPath.points;return i.length===0&&this.moveTo(0,0),Id.curveTo(t,e,r,n,i),this}bezierCurveTo(t,e,r,n,i,s){return this._initCurve(),bd.curveTo(t,e,r,n,i,s,this.currentPath.points),this}arcTo(t,e,r,n,i){this._initCurve(t,e);const s=this.currentPath.points,o=sm.curveTo(t,e,r,n,i,s);if(o){const{cx:a,cy:l,radius:u,startAngle:h,endAngle:c,anticlockwise:d}=o;this.arc(a,l,u,h,c,d)}return this}arc(t,e,r,n,i,s=!1){if(n===i)return this;if(!s&&i<=n?i+=Ha:s&&n<=i&&(n+=Ha),i-n===0)return this;const a=t+Math.cos(n)*r,l=e+Math.sin(n)*r,u=this._geometry.closePointEps;let h=this.currentPath?this.currentPath.points:null;if(h){const c=Math.abs(h[h.length-2]-a),d=Math.abs(h[h.length-1]-l);c<u&&d<u||h.push(a,l)}else this.moveTo(a,l),h=this.currentPath.points;return sm.arc(a,l,t,e,r,n,i,s,h),this}beginFill(t=0,e){return this.beginTextureFill({texture:H.WHITE,color:t,alpha:e})}normalizeColor(t){const e=oe.shared.setValue(t.color??0);t.color=e.toNumber(),t.alpha??(t.alpha=e.alpha)}beginTextureFill(t){const e={texture:H.WHITE,color:16777215,matrix:null};t=Object.assign(e,t),this.normalizeColor(t),this.currentPath&&this.startPoly();const r=t.alpha>0;return r?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:r},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,r,n){return this.drawShape(new q(t,e,r,n))}drawRoundedRect(t,e,r,n,i){return this.drawShape(new Td(t,e,r,n,i))}drawCircle(t,e,r){return this.drawShape(new wd(t,e,r))}drawEllipse(t,e,r,n){return this.drawShape(new Ed(t,e,r,n))}drawPolygon(...t){let e,r=!0;const n=t[0];n.points?(r=n.closeStroke,e=n.points):Array.isArray(t[0])?e=t[0]:e=t;const i=new xi(e);return i.closeStroke=r,this.drawShape(i),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===Ue.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,r=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=r,this.vertexData=new Float32Array(t.points);for(let n=0;n<r;n++){const i=t.batches[n],s=i.style.color,o=new Float32Array(this.vertexData.buffer,i.attribStart*4*2,i.attribSize*2),a=new Float32Array(t.uvsFloat32.buffer,i.attribStart*4*2,i.attribSize*2),l=new Uint16Array(t.indicesUint16.buffer,i.start*2,i.size),u={vertexData:o,blendMode:e,indices:l,uvs:a,_batchRGB:oe.shared.setValue(s).toRgbArray(),_tintRGB:s,_texture:i.style.texture,alpha:i.style.alpha,worldAlpha:1};this.batches[n]=u}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,r=this.batches.length;e<r;e++){const n=this.batches[e];n.worldAlpha=this.worldAlpha*n.alpha,t.plugins[this.pluginName].render(n)}}}_renderDirect(t){const e=this._resolveDirectShader(t),r=this._geometry,n=this.worldAlpha,i=e.uniforms,s=r.drawCalls;i.translationMatrix=this.transform.worldTransform,oe.shared.setValue(this._tintColor).premultiply(n).toArray(i.tint),t.shader.bind(e),t.geometry.bind(r,e),t.state.set(this.state);for(let o=0,a=s.length;o<a;o++)this._renderDrawCallDirect(t,r.drawCalls[o])}_renderDrawCallDirect(t,e){const{texArray:r,type:n,size:i,start:s}=e,o=r.count;for(let a=0;a<o;a++)t.texture.bind(r.elements[a],a);t.geometry.draw(n,i,s)}_resolveDirectShader(t){let e=this.shader;const r=this.pluginName;if(!e){if(!ku[r]){const{maxTextures:n}=t.plugins[r],i=new Int32Array(n);for(let a=0;a<n;a++)i[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new de,default:$t.from({uSamplers:i},!0)},o=t.plugins[r]._shader.program;ku[r]=new or(o,s)}e=ku[r]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:r,maxX:n,maxY:i}=t.bounds;this._bounds.addFrame(this.transform,e,r,n,i)}containsPoint(t){return this.worldTransform.applyInverse(t,la._TEMP_POINT),this._geometry.containsPoint(la._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e._tintRGB=oe.shared.setValue(this._tintColor).multiply(e._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,r=e.a,n=e.b,i=e.c,s=e.d,o=e.tx,a=e.ty,l=this._geometry.points,u=this.vertexData;let h=0;for(let c=0;c<l.length;c+=2){const d=l[c],f=l[c+1];u[h++]=r*d+i*f+o,u[h++]=s*f+n*d+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let Al=la;Al.curves=ki;Al._TEMP_POINT=new ne;class VA{constructor(e,r){this.uvBuffer=e,this.uvMatrix=r,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const r=this.uvBuffer.data;(!this.data||this.data.length!==r.length)&&(this.data=new Float32Array(r.length)),this.uvMatrix.multiplyUvs(r,this.data),this._updateID++}}const Bu=new ne,um=new xi,Kv=class extends At{constructor(t,e,r,n=rr.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=r||br.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=N.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===rr.TRIANGLES&&e.length<Kv.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,r=this.shader;r.uvMatrix&&(r.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=r._tintRGB,this._texture=r.texture;const n=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[n]),t.plugins[n].render(this)}calculateVertices(){const e=this.geometry.buffers[0],r=e.data,n=e._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==r.length&&(this.vertexData=new Float32Array(r.length));const i=this.transform.worldTransform,s=i.a,o=i.b,a=i.c,l=i.d,u=i.tx,h=i.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const f=r[d*2],p=r[d*2+1];c[d*2]=s*f+a*p+u,c[d*2+1]=o*f+l*p+h}if(this._roundPixels){const d=N.RESOLUTION;for(let f=0;f<c.length;++f)c[f]=Math.round(c[f]*d)/d}this.vertexDirty=n}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new VA(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Bu);const e=this.geometry.getBuffer("aVertexPosition").data,r=um.points,n=this.geometry.getIndex().data,i=n.length,s=this.drawMode===4?3:1;for(let o=0;o+2<i;o+=s){const a=n[o]*2,l=n[o+1]*2,u=n[o+2]*2;if(r[0]=e[a],r[1]=e[a+1],r[2]=e[l],r[3]=e[l+1],r[4]=e[u],r[5]=e[u+1],um.contains(Bu.x,Bu.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let cc=Kv;cc.BATCHABLE_SIZE=100;class jA extends Jr{constructor(e,r,n){super();const i=new Ee(e),s=new Ee(r,!0),o=new Ee(n,!0,!0);this.addAttribute("aVertexPosition",i,2,!1,j.FLOAT).addAttribute("aTextureCoord",s,2,!1,j.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var XA=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,WA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class hm extends or{constructor(e,r){const n={uSampler:e,alpha:1,uTextureMatrix:de.IDENTITY,uColor:new Float32Array([1,1,1,1])};r=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},r),r.uniforms&&Object.assign(n,r.uniforms),super(r.program||Lt.from(WA,XA),n),this._colorDirty=!1,this.uvMatrix=new _v(e),this.batchable=r.program===void 0,this.pluginName=r.pluginName,this._tintColor=new oe(r.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=r.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this.tint&&(this._tintColor.setValue(e),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const r=this.texture.baseTexture.alphaMode;oe.shared.setValue(this._tintColor).premultiply(this._alpha,r).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class cm{constructor(e,r,n){this.geometry=new Jr,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let i=0;i<e.length;++i){let s=e[i];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||j.FLOAT,offset:s.offset},r[i]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let r=0;this.indexBuffer=new Ee(IE(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=r,r+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new Ee(this.dynamicData,!1,!1);let i=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=i,i+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Ee(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===j.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===j.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,r,n){for(let i=0;i<this.dynamicProperties.length;i++){const s=this.dynamicProperties[i];s.uploadFunction(e,r,n,s.type===j.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,r,n){for(let i=0;i<this.staticProperties.length;i++){const s=this.staticProperties[i];s.uploadFunction(e,r,n,s.type===j.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var YA=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,KA=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class qv extends yl{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new de,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:j.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=or.from(KA,YA,{}),this.state=br.for2d()}render(e){const r=e.children,n=e._maxSize,i=e._batchSize,s=this.renderer;let o=r.length;if(o===0)return;o>n&&!e.autoResize&&(o=n);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=r[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=Jy(e.blendMode,u),s.state.set(this.state);const h=s.gl,c=e.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=oe.shared.setValue(e.tintRgb).premultiply(e.worldAlpha,u).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=i,p+=1){let v=o-f;v>i&&(v=i),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const x=a[p];x.uploadDynamic(r,f,v);const y=e._bufferUpdateIDs[p]||0;d=d||x._updateID<y,d&&(x._updateID=e._updateID,x.uploadStatic(r,f,v)),s.geometry.bind(x.geometry),h.drawElements(h.TRIANGLES,v*6,h.UNSIGNED_SHORT,0)}}generateBuffers(e){const r=[],n=e._maxSize,i=e._batchSize,s=e._properties;for(let o=0;o<n;o+=i)r.push(new cm(this.properties,s,i));return r}_generateOneMoreBuffer(e){const r=e._batchSize,n=e._properties;return new cm(this.properties,n,r)}uploadVertices(e,r,n,i,s,o){let a=0,l=0,u=0,h=0;for(let c=0;c<n;++c){const d=e[r+c],f=d._texture,p=d.scale.x,v=d.scale.y,x=f.trim,y=f.orig;x?(l=x.x-d.anchor.x*y.width,a=l+x.width,h=x.y-d.anchor.y*y.height,u=h+x.height):(a=y.width*(1-d.anchor.x),l=y.width*-d.anchor.x,u=y.height*(1-d.anchor.y),h=y.height*-d.anchor.y),i[o]=l*p,i[o+1]=h*v,i[o+s]=a*p,i[o+s+1]=h*v,i[o+s*2]=a*p,i[o+s*2+1]=u*v,i[o+s*3]=l*p,i[o+s*3+1]=u*v,o+=s*4}}uploadPosition(e,r,n,i,s,o){for(let a=0;a<n;a++){const l=e[r+a].position;i[o]=l.x,i[o+1]=l.y,i[o+s]=l.x,i[o+s+1]=l.y,i[o+s*2]=l.x,i[o+s*2+1]=l.y,i[o+s*3]=l.x,i[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,r,n,i,s,o){for(let a=0;a<n;a++){const l=e[r+a].rotation;i[o]=l,i[o+s]=l,i[o+s*2]=l,i[o+s*3]=l,o+=s*4}}uploadUvs(e,r,n,i,s,o){for(let a=0;a<n;++a){const l=e[r+a]._texture._uvs;l?(i[o]=l.x0,i[o+1]=l.y0,i[o+s]=l.x1,i[o+s+1]=l.y1,i[o+s*2]=l.x2,i[o+s*2+1]=l.y2,i[o+s*3]=l.x3,i[o+s*3+1]=l.y3,o+=s*4):(i[o]=0,i[o+1]=0,i[o+s]=0,i[o+s+1]=0,i[o+s*2]=0,i[o+s*2+1]=0,i[o+s*3]=0,i[o+s*3+1]=0,o+=s*4)}}uploadTint(e,r,n,i,s,o){for(let a=0;a<n;++a){const l=e[r+a],u=oe.shared.setValue(l._tintRGB).toPremultiplied(l.alpha,l.texture.baseTexture.alphaMode>0);i[o]=u,i[o+s]=u,i[o+s*2]=u,i[o+s*3]=u,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}qv.extension={name:"particle",type:F.RendererPlugin};$.add(qv);var Cl=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(Cl||{});const Vo={willReadFrequently:!0},z=class{static get experimentalLetterSpacingSupported(){let t=z._experimentalLetterSpacingSupported;if(t!==void 0){const e=N.ADAPTER.getCanvasRenderingContext2D().prototype;t=z._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,r,n,i,s,o,a,l){this.text=t,this.style=e,this.width=r,this.height=n,this.lines=i,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(t,e,r,n=z._canvas){r=r??e.wordWrap;const i=e.toFontString(),s=z.measureFont(i);s.fontSize===0&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);const o=n.getContext("2d",Vo);o.font=i;const l=(r?z.wordWrap(t,e,n):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let h=0;for(let p=0;p<l.length;p++){const v=z._measureText(l[p],e.letterSpacing,o);u[p]=v,h=Math.max(h,v)}let c=h+e.strokeThickness;e.dropShadow&&(c+=e.dropShadowDistance);const d=e.lineHeight||s.fontSize+e.strokeThickness;let f=Math.max(d,s.fontSize+e.strokeThickness*2)+(l.length-1)*(d+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new z(t,e,c,f,l,u,d+e.leading,h,s)}static _measureText(t,e,r){let n=!1;z.experimentalLetterSpacingSupported&&(z.experimentalLetterSpacing?(r.letterSpacing=`${e}px`,r.textLetterSpacing=`${e}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));let i=r.measureText(t).width;return i>0&&(n?i-=e:i+=(z.graphemeSegmenter(t).length-1)*e),i}static wordWrap(t,e,r=z._canvas){const n=r.getContext("2d",Vo);let i=0,s="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:u}=e,h=z.collapseSpaces(u),c=z.collapseNewlines(u);let d=!h;const f=e.wordWrapWidth+l,p=z.tokenize(t);for(let v=0;v<p.length;v++){let x=p[v];if(z.isNewline(x)){if(!c){o+=z.addLine(s),d=!h,s="",i=0;continue}x=" "}if(h){const g=z.isBreakingSpace(x),m=z.isBreakingSpace(s[s.length-1]);if(g&&m)continue}const y=z.getFromCache(x,l,a,n);if(y>f)if(s!==""&&(o+=z.addLine(s),s="",i=0),z.canBreakWords(x,e.breakWords)){const g=z.wordWrapSplit(x);for(let m=0;m<g.length;m++){let _=g[m],w=_,S=1;for(;g[m+S];){const E=g[m+S];if(!z.canBreakChars(w,E,x,m,e.breakWords))_+=E;else break;w=E,S++}m+=S-1;const T=z.getFromCache(_,l,a,n);T+i>f&&(o+=z.addLine(s),d=!1,s="",i=0),s+=_,i+=T}}else{s.length>0&&(o+=z.addLine(s),s="",i=0);const g=v===p.length-1;o+=z.addLine(x,!g),d=!1,s="",i=0}else y+i>f&&(d=!1,o+=z.addLine(s),s="",i=0),(s.length>0||!z.isBreakingSpace(x)||d)&&(s+=x,i+=y)}return o+=z.addLine(s,!1),o}static addLine(t,e=!0){return t=z.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,r,n){let i=r[t];return typeof i!="number"&&(i=z._measureText(t,e,n)+e,r[t]=i),i}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const r=t[e];if(!z.isBreakingSpace(r))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:z._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:z._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let r="";if(typeof t!="string")return e;for(let n=0;n<t.length;n++){const i=t[n],s=t[n+1];if(z.isBreakingSpace(i,s)||z.isNewline(i)){r!==""&&(e.push(r),r=""),e.push(i);continue}r+=i}return r!==""&&e.push(r),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,r,n,i){return!0}static wordWrapSplit(t){return z.graphemeSegmenter(t)}static measureFont(t){if(z._fonts[t])return z._fonts[t];const e={ascent:0,descent:0,fontSize:0},r=z._canvas,n=z._context;n.font=t;const i=z.METRICS_STRING+z.BASELINE_SYMBOL,s=Math.ceil(n.measureText(i).width);let o=Math.ceil(n.measureText(z.BASELINE_SYMBOL).width);const a=Math.ceil(z.HEIGHT_MULTIPLIER*o);if(o=o*z.BASELINE_MULTIPLIER|0,s===0||a===0)return z._fonts[t]=e,e;r.width=s,r.height=a,n.fillStyle="#f00",n.fillRect(0,0,s,a),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(i,0,o);const l=n.getImageData(0,0,s,a).data,u=l.length,h=s*4;let c=0,d=0,f=!1;for(c=0;c<o;++c){for(let p=0;p<h;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d+=h;else break}for(e.ascent=o-c,d=u-h,f=!1,c=a;c>o;--c){for(let p=0;p<h;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d-=h;else break}return e.descent=c-o,e.fontSize=e.ascent+e.descent,z._fonts[t]=e,e}static clearMetrics(t=""){t?delete z._fonts[t]:z._fonts={}}static get _canvas(){if(!z.__canvas){let t;try{const e=new OffscreenCanvas(0,0),r=e.getContext("2d",Vo);if(r!=null&&r.measureText)return z.__canvas=e,e;t=N.ADAPTER.createCanvas()}catch{t=N.ADAPTER.createCanvas()}t.width=t.height=10,z.__canvas=t}return z.__canvas}static get _context(){return z.__context||(z.__context=z._canvas.getContext("2d",Vo)),z.__context}};let Le=z;Le.METRICS_STRING="|q";Le.BASELINE_SYMBOL="M";Le.BASELINE_MULTIPLIER=1.4;Le.HEIGHT_MULTIPLIER=2;Le.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(r=>r.segment)}return t=>[...t]})();Le.experimentalLetterSpacing=!1;Le._fonts={};Le._newlines=[10,13];Le._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const qA=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],ls=class{constructor(t){this.styleID=0,this.reset(),Fu(this,t,t)}clone(){const t={};return Fu(t,this,ls.defaultStyle),new ls(t)}reset(){Fu(this,ls.defaultStyle,ls.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Nu(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Nu(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){QA(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Nu(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let r=e.length-1;r>=0;r--){let n=e[r].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!qA.includes(n)&&(n=`"${n}"`),e[r]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let Ar=ls;Ar.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Cl.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function Nu(t){const e=oe.shared;return Array.isArray(t)?t.map(r=>e.setValue(r).toHex()):e.setValue(t).toHex()}function QA(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let r=0;r<t.length;++r)if(t[r]!==e[r])return!1;return!0}function Fu(t,e,r){for(const n in r)Array.isArray(e[n])?t[n]=e[n].slice():t[n]=e[n]}const ZA={texture:!0,children:!1,baseTexture:!0},dc=class extends Ui{constructor(t,e,r){let n=!1;r||(r=N.ADAPTER.createCanvas(),n=!0),r.width=3,r.height=3;const i=H.from(r);i.orig=new q,i.trim=new q,super(i),this._ownCanvas=n,this.canvas=r,this.context=r.getContext("2d",{willReadFrequently:!0}),this._resolution=dc.defaultResolution??N.RESOLUTION,this._autoResolution=dc.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return Le.experimentalLetterSpacing}static set experimentalLetterSpacing(t){Z("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),Le.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const r=this.context,n=Le.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),i=n.width,s=n.height,o=n.lines,a=n.lineHeight,l=n.lineWidths,u=n.maxLineWidth,h=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,i)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+e.padding*2)*this._resolution),r.scale(this._resolution,this._resolution),r.clearRect(0,0,this.canvas.width,this.canvas.height),r.font=this._font,r.lineWidth=e.strokeThickness,r.textBaseline=e.textBaseline,r.lineJoin=e.lineJoin,r.miterLimit=e.miterLimit;let c,d;const f=e.dropShadow?2:1;for(let p=0;p<f;++p){const v=e.dropShadow&&p===0,x=v?Math.ceil(Math.max(1,s)+e.padding*2):0,y=x*this._resolution;if(v){r.fillStyle="black",r.strokeStyle="black";const m=e.dropShadowColor,_=e.dropShadowBlur*this._resolution,w=e.dropShadowDistance*this._resolution;r.shadowColor=oe.shared.setValue(m).setAlpha(e.dropShadowAlpha).toRgbaString(),r.shadowBlur=_,r.shadowOffsetX=Math.cos(e.dropShadowAngle)*w,r.shadowOffsetY=Math.sin(e.dropShadowAngle)*w+y}else r.fillStyle=this._generateFillStyle(e,o,n),r.strokeStyle=e.stroke,r.shadowColor="black",r.shadowBlur=0,r.shadowOffsetX=0,r.shadowOffsetY=0;let g=(a-h.fontSize)/2;a-h.fontSize<0&&(g=0);for(let m=0;m<o.length;m++)c=e.strokeThickness/2,d=e.strokeThickness/2+m*a+h.ascent+g,e.align==="right"?c+=u-l[m]:e.align==="center"&&(c+=(u-l[m])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[m],c+e.padding,d+e.padding-x,!0),e.fill&&this.drawLetterSpacing(o[m],c+e.padding,d+e.padding-x)}this.updateTexture()}drawLetterSpacing(t,e,r,n=!1){const s=this._style.letterSpacing;let o=!1;if(Le.experimentalLetterSpacingSupported&&(Le.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){n?this.context.strokeText(t,e,r):this.context.fillText(t,e,r);return}let a=e;const l=Le.graphemeSegmenter(t);let u=this.context.measureText(t).width,h=0;for(let c=0;c<l.length;++c){const d=l[c];n?this.context.strokeText(d,a,r):this.context.fillText(d,a,r);let f="";for(let p=c+1;p<l.length;++p)f+=l[p];h=this.context.measureText(f).width,a+=u-h+s,u=h}}updateTexture(){const t=this.canvas;if(this._style.trim){const s=DE(t);s.data&&(t.width=s.width,t.height=s.height,this.context.putImageData(s.data,0,0))}const e=this._texture,r=this._style,n=r.trim?0:r.padding,i=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-n,e.trim.y=-n,e.orig.width=e._frame.width-n*2,e.orig.height=e._frame.height-n*2,this._onTextureUpdate(),i.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,r){const n=t.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let i;const s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-o*2,l=this.canvas.height/this._resolution-s-o*2,u=n.slice(),h=t.fillGradientStops.slice();if(!h.length){const c=u.length+1;for(let d=1;d<c;++d)h.push(d/c)}if(u.unshift(n[0]),h.unshift(0),u.push(n[n.length-1]),h.push(1),t.fillGradientType===Cl.LINEAR_VERTICAL){i=this.context.createLinearGradient(a/2,o,a/2,l+o);const c=r.fontProperties.fontSize+t.strokeThickness;for(let d=0;d<e.length;d++){const f=r.lineHeight*(d-1)+c,p=r.lineHeight*d;let v=p;d>0&&f>p&&(v=(p+f)/2);const x=p+c,y=r.lineHeight*(d+1);let g=x;d+1<e.length&&y<x&&(g=(x+y)/2);const m=(g-v)/l;for(let _=0;_<u.length;_++){let w=0;typeof h[_]=="number"?w=h[_]:w=_/u.length;let S=Math.min(1,Math.max(0,v/l+w*m));S=Number(S.toFixed(5)),i.addColorStop(S,u[_])}}}else{i=this.context.createLinearGradient(o,l/2,a+o,l/2);const c=u.length+1;let d=1;for(let f=0;f<u.length;f++){let p;typeof h[f]=="number"?p=h[f]:p=d/c,i.addColorStop(p,u[f]),d++}}return i}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},ZA,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=Ur(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=Ur(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof Ar?this._style=t:this._style=new Ar(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let Rd=dc;Rd.defaultAutoResolution=!0;class JA{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function eC(t,e){var n;let r=!1;if((n=t==null?void 0:t._textures)!=null&&n.length){for(let i=0;i<t._textures.length;i++)if(t._textures[i]instanceof H){const s=t._textures[i].baseTexture;e.includes(s)||(e.push(s),r=!0)}}return r}function tC(t,e){if(t.baseTexture instanceof K){const r=t.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function rC(t,e){if(t._texture&&t._texture instanceof H){const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function nC(t,e){return e instanceof Rd?(e.updateText(!0),!0):!1}function iC(t,e){if(e instanceof Ar){const r=e.toFontString();return Le.measureFont(r),!0}return!1}function sC(t,e){if(t instanceof Rd){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const r=t._texture.baseTexture;return e.includes(r)||e.push(r),!0}return!1}function oC(t,e){return t instanceof Ar?(e.includes(t)||e.push(t),!0):!1}const Qv=class{constructor(t){this.limiter=new JA(Qv.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(sC),this.registerFindHook(oC),this.registerFindHook(eC),this.registerFindHook(tC),this.registerFindHook(rC),this.registerUploadHook(nC),this.registerUploadHook(iC)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,Ye.system.addOnce(this.tick,this,Mn.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let r=0,n=this.uploadHooks.length;r<n;r++)if(this.uploadHooks[r](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)Ye.system.addOnce(this.tick,this,Mn.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,r=t.length;e<r;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,r=this.addHooks.length;e<r&&!this.addHooks[e](t,this.queue);e++);if(t instanceof At)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&Ye.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Ka=Qv;Ka.uploadsPerFrame=4;Object.defineProperties(N,{UPLOADS_PER_FRAME:{get(){return Ka.uploadsPerFrame},set(t){Z("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Ka.uploadsPerFrame=t}}});function Zv(t,e){return e instanceof K?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function aC(t,e){if(!(e instanceof Al))return!1;const{geometry:r}=e;e.finishPoly(),r.updateBatches();const{batches:n}=r;for(let i=0;i<n.length;i++){const{texture:s}=n[i].style;s&&Zv(t,s.baseTexture)}return r.batchable||t.geometry.bind(r,e._resolveDirectShader(t)),!0}function lC(t,e){return t instanceof Al?(e.push(t),!0):!1}class Jv extends Ka{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(lC),this.registerUploadHook(Zv),this.registerUploadHook(aC)}}Jv.extension={name:"prepare",type:F.RendererSystem};$.add(Jv);var uC=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,hC=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,cC=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,dm=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,dC=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const jo=new de;class e0 extends yl{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new mv,this.state=br.for2d()}contextChange(){const e=this.renderer,r={globals:e.globalUniforms};this.simpleShader=or.from(dm,dC,r),this.shader=e.context.webGLVersion>1?or.from(hC,uC,r):or.from(dm,cC,r)}render(e){const r=this.renderer,n=this.quad;let i=n.vertices;i[0]=i[6]=e._width*-e.anchor.x,i[1]=i[3]=e._height*-e.anchor.y,i[2]=i[4]=e._width*(1-e.anchor.x),i[5]=i[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;i=n.uvs,i[0]=i[6]=-s,i[1]=i[3]=-o,i[2]=i[4]=1-s,i[5]=i[7]=1-o,n.invalidate();const a=e._texture,l=a.baseTexture,u=l.alphaMode>0,h=e.tileTransform.localTransform,c=e.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[r.CONTEXT_UID]?d=l.wrapMode!==Kr.CLAMP:l.wrapMode===Kr.CLAMP&&(l.wrapMode=Kr.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,v=a.height,x=e._width,y=e._height;jo.set(h.a*p/x,h.b*p/y,h.c*v/x,h.d*v/y,h.tx/x,h.ty/y),jo.invert(),d?jo.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=jo.toArray(!0),f.uniforms.uColor=oe.shared.setValue(e.tint).premultiply(e.worldAlpha,u).toArray(f.uniforms.uColor),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,r.shader.bind(f),r.geometry.bind(n),this.state.blendMode=Jy(e.blendMode,u),r.state.set(this.state),r.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}e0.extension={name:"tilingSprite",type:F.RendererPlugin};$.add(e0);const us=class{constructor(t,e,r=null){this.linkedSheets=[],this._texture=t instanceof H?t:null,this.baseTexture=t instanceof K?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const n=this.baseTexture.resource;this.resolution=this._updateResolution(r||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let r=Zr(t,null);return r===null&&(r=parseFloat(e??"1")),r!==1&&this.baseTexture.setResolution(r),r}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=us.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const r=us.BATCH_SIZE;for(;e-t<r&&e<this._frameKeys.length;){const n=this._frameKeys[e],i=this._frames[n],s=i.frame;if(s){let o=null,a=null;const l=i.trimmed!==!1&&i.sourceSize?i.sourceSize:i.frame,u=new q(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);i.rotated?o=new q(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new q(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),i.trimmed!==!1&&i.spriteSourceSize&&(a=new q(Math.floor(i.spriteSourceSize.x)/this.resolution,Math.floor(i.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new H(this.baseTexture,o,u,a,i.rotated?2:0,i.anchor,i.borders),H.addToCache(this.textures[n],n)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let r=0;r<t[e].length;r++){const n=t[e][r];this.animations[e].push(this.textures[n])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*us.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*us.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const r in this.textures)this.textures[r].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let fc=us;fc.BATCH_SIZE=1e3;const fC=["jpg","png","jpeg","avif","webp"];function t0(t,e,r){const n={};if(t.forEach(i=>{n[i]=e}),Object.keys(e.textures).forEach(i=>{n[i]=e.textures[i]}),!r){const i=Ke.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{const a=t0([`${i}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(n,a)})}return n}const pC={extension:F.Asset,cache:{test:t=>t instanceof fc,getCacheableAssets:(t,e)=>t0(t,e,!1)},resolver:{test:t=>{const r=t.split("?")[0].split("."),n=r.pop(),i=r.pop();return n==="json"&&fC.includes(i)},parse:t=>{var r;const e=t.split(".");return{resolution:parseFloat(((r=N.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:F.LoadParser,priority:lr.Normal},async testParse(t,e){return Ke.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,r){var u,h;let n=Ke.dirname(e.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let i=n+t.meta.image;i=uc(i,e.src);const o=(await r.load([i]))[i],a=new fc(o.baseTexture,t,e.src);await a.parse();const l=(u=t==null?void 0:t.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(l)){const c=[];for(const f of l){if(typeof f!="string")continue;let p=n+f;(h=e.data)!=null&&h.ignoreMultiPack||(p=uc(p,e.src),c.push(r.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(c);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},unload(t){t.destroy(!0)}}};$.add(pC);class qa{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class ua{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const r=e.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in r){const o=r[s].match(/^[a-z]+/gm)[0],a=r[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const h=a[u].split("="),c=h[0],d=h[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[c]=p}n[o].push(l)}const i=new qa;return n.info.forEach(s=>i.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>i.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>i.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>i.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>i.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>i.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),i}}class pc{static test(e){const r=e;return"getElementsByTagName"in r&&r.getElementsByTagName("page").length&&r.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const r=new qa,n=e.getElementsByTagName("info"),i=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<n.length;u++)r.info.push({face:n[u].getAttribute("face"),size:parseInt(n[u].getAttribute("size"),10)});for(let u=0;u<i.length;u++)r.common.push({lineHeight:parseInt(i[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)r.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const h=o[u];r.char.push({id:parseInt(h.getAttribute("id"),10),page:parseInt(h.getAttribute("page"),10)||0,x:parseInt(h.getAttribute("x"),10),y:parseInt(h.getAttribute("y"),10),width:parseInt(h.getAttribute("width"),10),height:parseInt(h.getAttribute("height"),10),xoffset:parseInt(h.getAttribute("xoffset"),10),yoffset:parseInt(h.getAttribute("yoffset"),10),xadvance:parseInt(h.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)r.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)r.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return r}}class mc{static test(e){return typeof e=="string"&&e.includes("<font>")?pc.test(N.ADAPTER.parseXML(e)):!1}static parse(e){return pc.parse(N.ADAPTER.parseXML(e))}}const Ou=[ua,pc,mc];function mC(t){for(let e=0;e<Ou.length;e++)if(Ou[e].test(t))return Ou[e];return null}function gC(t,e,r,n,i,s){const o=r.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=r.dropShadow?r.dropShadowDistance:0,u=r.padding||0,h=t.width/n-l-u*2,c=t.height/n-l-u*2,d=o.slice(),f=r.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let v=1;v<p;++v)f.push(v/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),r.fillGradientType===Cl.LINEAR_VERTICAL){a=e.createLinearGradient(h/2,u,h/2,c+u);let p=0;const x=(s.fontProperties.fontSize+r.strokeThickness)/c;for(let y=0;y<i.length;y++){const g=s.lineHeight*y;for(let m=0;m<d.length;m++){let _=0;typeof f[m]=="number"?_=f[m]:_=m/d.length;const w=g/c+_*x;let S=Math.max(p,w);S=Math.min(S,1),a.addColorStop(S,d[m]),p=S}}}else{a=e.createLinearGradient(u,c/2,h+u,c/2);const p=d.length+1;let v=1;for(let x=0;x<d.length;x++){let y;typeof f[x]=="number"?y=f[x]:y=v/p,a.addColorStop(y,d[x]),v++}}return a}function yC(t,e,r,n,i,s,o){const a=r.text,l=r.fontProperties;e.translate(n,i),e.scale(s,s);const u=o.strokeThickness/2,h=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=gC(t,e,o,s,[a],r),e.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,d=o.dropShadowBlur*s,f=o.dropShadowDistance*s;e.shadowColor=oe.shared.setValue(c).setAlpha(o.dropShadowAlpha).toRgbaString(),e.shadowBlur=d,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*f,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*f}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,h+r.lineHeight-l.descent),o.fill&&e.fillText(a,u,h+r.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function ha(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function r0(t){return Array.from?Array.from(t):t.split("")}function vC(t){typeof t=="string"&&(t=[t]);const e=[];for(let r=0,n=t.length;r<n;r++){const i=t[r];if(Array.isArray(i)){if(i.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${i.length}.`);const s=i[0].charCodeAt(0),o=i[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...r0(i))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const Mt=class{constructor(t,e,r){var u;const[n]=t.info,[i]=t.common,[s]=t.page,[o]=t.distanceField,a=Zr(s.file),l={};this._ownsTextures=r,this.font=n.face,this.size=n.size,this.lineHeight=i.lineHeight/a,this.chars={},this.pageTextures=l;for(let h=0;h<t.page.length;h++){const{id:c,file:d}=t.page[h];l[c]=e instanceof Array?e[h]:e[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[c].baseTexture.alphaMode=jt.NO_PREMULTIPLIED_ALPHA,l[c].baseTexture.mipmap=ar.OFF)}for(let h=0;h<t.char.length;h++){const{id:c,page:d}=t.char[h];let{x:f,y:p,width:v,height:x,xoffset:y,yoffset:g,xadvance:m}=t.char[h];f/=a,p/=a,v/=a,x/=a,y/=a,g/=a,m/=a;const _=new q(f+l[d].frame.x/a,p+l[d].frame.y/a,v,x);this.chars[c]={xOffset:y,yOffset:g,xAdvance:m,kerning:{},texture:new H(l[d].baseTexture,_),page:d}}for(let h=0;h<t.kerning.length;h++){let{first:c,second:d,amount:f}=t.kerning[h];c/=a,d/=a,f/=a,this.chars[d]&&(this.chars[d].kerning[c]=f)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((u=o==null?void 0:o.fieldType)==null?void 0:u.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,r){let n;if(t instanceof qa)n=t;else{const s=mC(t);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(t)}e instanceof H&&(e=[e]);const i=new Mt(n,e,r);return Mt.available[i.font]=i,i}static uninstall(t){const e=Mt.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete Mt.available[t]}static from(t,e,r){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:i,resolution:s,textureWidth:o,textureHeight:a,...l}=Object.assign({},Mt.defaultOptions,r),u=vC(n),h=e instanceof Ar?e:new Ar(e),c=o,d=new qa;d.info[0]={face:h.fontFamily,size:h.fontSize},d.common[0]={lineHeight:h.fontSize};let f=0,p=0,v,x,y,g=0;const m=[];for(let w=0;w<u.length;w++){v||(v=N.ADAPTER.createCanvas(),v.width=o,v.height=a,x=v.getContext("2d"),y=new K(v,{resolution:s,...l}),m.push(new H(y)),d.page.push({id:m.length-1,file:""}));const S=u[w],T=Le.measureText(S,h,!1,v),E=T.width,D=Math.ceil(T.height),I=Math.ceil((h.fontStyle==="italic"?2:1)*E);if(p>=a-D*s){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${S}')`);--w,v=null,x=null,y=null,p=0,f=0,g=0;continue}if(g=Math.max(D+T.fontProperties.descent,g),I*s+f>=c){if(f===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${h.fontFamily}', fontSize: ${h.fontSize}px, char: '${S}')`);--w,p+=g*s,p=Math.ceil(p),f=0,g=0;continue}yC(v,x,T,f,p,s,h);const M=ha(T.text);d.char.push({id:M,page:m.length-1,x:f/s,y:p/s,width:I,height:D,xoffset:0,yoffset:0,xadvance:E-(h.dropShadow?h.dropShadowDistance:0)-(h.stroke?h.strokeThickness:0)}),f+=(I+2*i)*s,f=Math.ceil(f)}for(let w=0,S=u.length;w<S;w++){const T=u[w];for(let E=0;E<S;E++){const D=u[E],I=x.measureText(T).width,M=x.measureText(D).width,b=x.measureText(T+D).width-(I+M);b&&d.kerning.push({first:ha(T),second:ha(D),amount:b})}}const _=new Mt(d,m,!0);return Mt.available[t]!==void 0&&Mt.uninstall(t),Mt.available[t]=_,_}};let rt=Mt;rt.ALPHA=[["a","z"],["A","Z"]," "];rt.NUMERIC=[["0","9"]];rt.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];rt.ASCII=[[" ","~"]];rt.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Mt.ALPHANUMERIC};rt.available={};var _C=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,xC=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const fm=[],pm=[],mm=[],n0=class extends At{constructor(t,e={}){super();const{align:r,tint:n,maxWidth:i,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},n0.styleDefaults,e);if(!rt.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=r,this._tintColor=new oe(n),this._font=void 0,this._fontName=o,this._fontSize=a,this.text=t,this._maxWidth=i,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new Gr(()=>{this.dirty=!0},this,0,0),this._roundPixels=N.ROUND_PIXELS,this.dirty=!0,this._resolution=N.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var I;const t=rt.available[this._fontName],e=this.fontSize,r=e/t.size,n=new ne,i=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=r0(a),u=this._maxWidth*t.size/e,h=t.distanceFieldType==="none"?fm:pm;let c=null,d=0,f=0,p=0,v=-1,x=0,y=0,g=0,m=0;for(let M=0;M<l.length;M++){const B=l[M],b=ha(B);if(/(?:\s)/.test(B)&&(v=M,x=d,m++),B==="\r"||B===`
`){s.push(d),o.push(-1),f=Math.max(f,d),++p,++y,n.x=0,n.y+=t.lineHeight,c=null,m=0;continue}const C=t.chars[b];if(!C)continue;c&&C.kerning[c]&&(n.x+=C.kerning[c]);const W=mm.pop()||{texture:H.EMPTY,line:0,charCode:0,prevSpaces:0,position:new ne};W.texture=C.texture,W.line=p,W.charCode=b,W.position.x=Math.round(n.x+C.xOffset+this._letterSpacing/2),W.position.y=Math.round(n.y+C.yOffset),W.prevSpaces=m,i.push(W),d=W.position.x+Math.max(C.xAdvance-C.xOffset,C.texture.orig.width),n.x+=C.xAdvance+this._letterSpacing,g=Math.max(g,C.yOffset+C.texture.height),c=b,v!==-1&&u>0&&n.x>u&&(++y,_i(i,1+v-y,1+M-v),M=v,v=-1,s.push(x),o.push(i.length>0?i[i.length-1].prevSpaces:0),f=Math.max(f,x),p++,n.x=0,n.y+=t.lineHeight,c=null,m=0)}const _=l[l.length-1];_!=="\r"&&_!==`
`&&(/(?:\s)/.test(_)&&(d=x),s.push(d),f=Math.max(f,d),o.push(-1));const w=[];for(let M=0;M<=p;M++){let B=0;this._align==="right"?B=f-s[M]:this._align==="center"?B=(f-s[M])/2:this._align==="justify"&&(B=o[M]<0?0:(f-s[M])/o[M]),w.push(B)}const S=i.length,T={},E=[],D=this._activePagesMeshData;h.push(...D);for(let M=0;M<S;M++){const B=i[M].texture,b=B.baseTexture.uid;if(!T[b]){let C=h.pop();if(!C){const Y=new jA;let O,P;t.distanceFieldType==="none"?(O=new hm(H.EMPTY),P=X.NORMAL):(O=new hm(H.EMPTY,{program:Lt.from(xC,_C),uniforms:{uFWidth:0}}),P=X.NORMAL_NPM);const G=new cc(Y,O);G.blendMode=P,C={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:G,vertices:null,uvs:null,indices:null}}C.index=0,C.indexCount=0,C.vertexCount=0,C.uvsCount=0,C.total=0;const{_textureCache:W}=this;W[b]=W[b]||new H(B.baseTexture),C.mesh.texture=W[b],C.mesh.tint=this._tintColor.value,E.push(C),T[b]=C}T[b].total++}for(let M=0;M<D.length;M++)E.includes(D[M])||this.removeChild(D[M].mesh);for(let M=0;M<E.length;M++)E[M].mesh.parent!==this&&this.addChild(E[M].mesh);this._activePagesMeshData=E;for(const M in T){const B=T[M],b=B.total;if(!(((I=B.indices)==null?void 0:I.length)>6*b)||B.vertices.length<cc.BATCHABLE_SIZE*2)B.vertices=new Float32Array(4*2*b),B.uvs=new Float32Array(4*2*b),B.indices=new Uint16Array(6*b);else{const C=B.total,W=B.vertices;for(let Y=C*4*2;Y<W.length;Y++)W[Y]=0}B.mesh.size=6*b}for(let M=0;M<S;M++){const B=i[M];let b=B.position.x+w[B.line]*(this._align==="justify"?B.prevSpaces:1);this._roundPixels&&(b=Math.round(b));const C=b*r,W=B.position.y*r,Y=B.texture,O=T[Y.baseTexture.uid],P=Y.frame,G=Y._uvs,A=O.index++;O.indices[A*6+0]=0+A*4,O.indices[A*6+1]=1+A*4,O.indices[A*6+2]=2+A*4,O.indices[A*6+3]=0+A*4,O.indices[A*6+4]=2+A*4,O.indices[A*6+5]=3+A*4,O.vertices[A*8+0]=C,O.vertices[A*8+1]=W,O.vertices[A*8+2]=C+P.width*r,O.vertices[A*8+3]=W,O.vertices[A*8+4]=C+P.width*r,O.vertices[A*8+5]=W+P.height*r,O.vertices[A*8+6]=C,O.vertices[A*8+7]=W+P.height*r,O.uvs[A*8+0]=G.x0,O.uvs[A*8+1]=G.y0,O.uvs[A*8+2]=G.x1,O.uvs[A*8+3]=G.y1,O.uvs[A*8+4]=G.x2,O.uvs[A*8+5]=G.y2,O.uvs[A*8+6]=G.x3,O.uvs[A*8+7]=G.y3}this._textWidth=f*r,this._textHeight=(n.y+t.lineHeight)*r;for(const M in T){const B=T[M];if(this.anchor.x!==0||this.anchor.y!==0){let Y=0;const O=this._textWidth*this.anchor.x,P=this._textHeight*this.anchor.y;for(let G=0;G<B.total;G++)B.vertices[Y++]-=O,B.vertices[Y++]-=P,B.vertices[Y++]-=O,B.vertices[Y++]-=P,B.vertices[Y++]-=O,B.vertices[Y++]-=P,B.vertices[Y++]-=O,B.vertices[Y++]-=P}this._maxLineHeight=g*r;const b=B.mesh.geometry.getBuffer("aVertexPosition"),C=B.mesh.geometry.getBuffer("aTextureCoord"),W=B.mesh.geometry.getIndex();b.data=B.vertices,C.data=B.uvs,W.data=B.indices,b.update(),C.update(),W.update()}for(let M=0;M<i.length;M++)mm.push(i[M]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:r,size:n}=rt.available[this._fontName];if(r!=="none"){const{a:i,b:s,c:o,d:a}=this.worldTransform,l=Math.sqrt(i*i+s*s),u=Math.sqrt(o*o+a*a),h=(Math.abs(l)+Math.abs(u))/2,c=this.fontSize/n,d=t._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=h*e*c*d}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=rt.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(t){if(this.tint!==t){this._tintColor.setValue(t);for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!rt.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??rt.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,n=rt.available[this._fontName].distanceFieldType==="none"?fm:pm;n.push(...this._activePagesMeshData);for(const i of this._activePagesMeshData)this.removeChild(i.mesh);this._activePagesMeshData=[],n.filter(i=>e[i.mesh.texture.baseTexture.uid]).forEach(i=>{i.mesh.texture=H.EMPTY});for(const i in e)e[i].destroy(),delete e[i];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(t)}};let wC=n0;wC.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const EC=[".xml",".fnt"],TC={extension:{type:F.LoadParser,priority:lr.Normal},name:"loadBitmapFont",test(t){return EC.includes(Ke.extname(t).toLowerCase())},async testParse(t){return ua.test(t)||mc.test(t)},async parse(t,e,r){const n=ua.test(t)?ua.parse(t):mc.parse(t),{src:i}=e,{page:s}=n,o=[];for(let u=0;u<s.length;++u){const h=s[u].file;let c=Ke.join(Ke.dirname(i),h);c=uc(c,i),o.push(c)}const a=await r.load(o),l=o.map(u=>a[u]);return rt.install(n,l,!0)},async load(t,e){return(await N.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};$.add(TC);const Xn=class extends Ar{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(t){return new Xn(Object.keys(Xn.defaultOptions).reduce((e,r)=>({...e,[r]:t[r]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(t=>{URL.revokeObjectURL(t.src),t.refs--,t.refs===0&&(t.fontFace&&document.fonts.delete(t.fontFace),delete Xn.availableFonts[t.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(t,e={}){const{availableFonts:r}=Xn;if(r[t]){const n=r[t];return this._fonts.push(n),n.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return N.ADAPTER.fetch(t).then(n=>n.blob()).then(async n=>new Promise((i,s)=>{const o=URL.createObjectURL(n),a=new FileReader;a.onload=()=>i([o,a.result]),a.onerror=s,a.readAsDataURL(n)})).then(async([n,i])=>{const s=Object.assign({family:Ke.basename(t,Ke.extname(t)),weight:"normal",style:"normal",src:n,dataSrc:i,refs:1,originalUrl:t,fontFace:null},e);r[t]=s,this._fonts.push(s),this.styleID++;const o=new FontFace(s.family,`url(${s.src})`,{weight:s.weight,style:s.style});s.fontFace=o,await o.load(),document.fonts.add(o),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...t){const e=t.filter(r=>!this._overrides.includes(r));e.length>0&&(this._overrides.push(...e),this.styleID++)}removeOverride(...t){const e=t.filter(r=>this._overrides.includes(r));e.length>0&&(this._overrides=this._overrides.filter(r=>!e.includes(r)),this.styleID++)}toCSS(t){return[`transform: scale(${t})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((t,e)=>`${t}
            @font-face {
                font-family: "${e.family}";
                src: url('${e.dataSrc}');
                font-weight: ${e.weight};
                font-style: ${e.style}; 
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(t){this._stylesheet!==t&&(this._stylesheet=t,this.styleID++)}normalizeColor(t){return Array.isArray(t)&&(t=CE(t)),typeof t=="number"?AE(t):t}dropShadowToCSS(){let t=this.normalizeColor(this.dropShadowColor);const e=this.dropShadowAlpha,r=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),n=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);t.startsWith("#")&&e<1&&(t+=(e*255|0).toString(16).padStart(2,"0"));const i=`${r}px ${n}px`;return this.dropShadowBlur>0?`text-shadow: ${i} ${this.dropShadowBlur}px ${t}`:`text-shadow: ${i} ${t}`}reset(){Object.assign(this,Xn.defaultOptions)}onBeforeDraw(){const{fontsDirty:t}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&t?new Promise(e=>setTimeout(e,100)):Promise.resolve()}get isSafari(){const{userAgent:t}=N.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(t)}set fillGradientStops(t){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(t){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(t){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(t){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(t){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(t){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(t){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};let Ts=Xn;Ts.availableFonts={};Ts.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};const Wn=class extends Ui{constructor(t="",e={}){super(H.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this._loading=!1,this.localStyleID=-1,this.dirty=!1,this.ownsStyle=!1;const r=new Image,n=H.from(r,{scaleMode:N.SCALE_MODE,resourceOptions:{autoLoad:!1}});n.orig=new q,n.trim=new q,this.texture=n;const i="http://www.w3.org/2000/svg",s="http://www.w3.org/1999/xhtml",o=document.createElementNS(i,"svg"),a=document.createElementNS(i,"foreignObject"),l=document.createElementNS(s,"div"),u=document.createElementNS(s,"style");a.setAttribute("width","10000"),a.setAttribute("height","10000"),a.style.overflow="hidden",o.appendChild(a),this.maxWidth=Wn.defaultMaxWidth,this.maxHeight=Wn.defaultMaxHeight,this._domElement=l,this._styleElement=u,this._svgRoot=o,this._foreignObject=a,this._foreignObject.appendChild(u),this._foreignObject.appendChild(l),this._image=r,this._loadImage=new Image,this._autoResolution=Wn.defaultAutoResolution,this._resolution=Wn.defaultResolution??N.RESOLUTION,this.text=t,this.style=e}measureText(t){var a,l;const{text:e,style:r,resolution:n}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},t);Object.assign(this._domElement,{innerHTML:e,style:r.toCSS(n)}),this._styleElement.textContent=r.toGlobalCSS(),document.body.appendChild(this._svgRoot);const i=this._domElement.getBoundingClientRect();this._svgRoot.remove();const s=Math.min(this.maxWidth,Math.ceil(i.width)),o=Math.min(this.maxHeight,Math.ceil(i.height));return this._svgRoot.setAttribute("width",s.toString()),this._svgRoot.setAttribute("height",o.toString()),e!==this._text&&(this._domElement.innerHTML=this._text),r!==this._style&&(Object.assign(this._domElement,{style:(a=this._style)==null?void 0:a.toCSS(n)}),this._styleElement.textContent=(l=this._style)==null?void 0:l.toGlobalCSS()),{width:s+r.padding*2,height:o+r.padding*2}}async updateText(t=!0){const{style:e,_image:r,_loadImage:n}=this;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;const{width:i,height:s}=this.measureText();r.width=n.width=Math.ceil(Math.max(1,i)),r.height=n.height=Math.ceil(Math.max(1,s)),this._loading||(this._loading=!0,await new Promise(o=>{n.onload=async()=>{await e.onBeforeDraw(),this._loading=!1,r.src=n.src,n.onload=null,n.src="",this.updateTexture(),o()};const a=new XMLSerializer().serializeToString(this._svgRoot);n.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(a)}`}))}get source(){return this._image}updateTexture(){const{style:t,texture:e,_image:r,resolution:n}=this,{padding:i}=t,{baseTexture:s}=e;e.trim.width=e._frame.width=r.width/n,e.trim.height=e._frame.height=r.height/n,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-i*2,e.orig.height=e._frame.height-i*2,this._onTextureUpdate(),s.setRealSize(r.width,r.height,n),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}_renderCanvas(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(t)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds(t)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(t){var r,n,i,s,o;typeof t=="boolean"&&(t={children:t}),t=Object.assign({},Wn.defaultDestroyOptions,t),super.destroy(t);const e=null;this.ownsStyle&&((r=this._style)==null||r.cleanFonts()),this._style=e,(n=this._svgRoot)==null||n.remove(),this._svgRoot=e,(i=this._domElement)==null||i.remove(),this._domElement=e,(s=this._foreignObject)==null||s.remove(),this._foreignObject=e,(o=this._styleElement)==null||o.remove(),this._styleElement=e,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=e,this._image.src="",this._image=e}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(t){this.updateText(!0);const e=Ur(this.scale.x)||1;this.scale.x=e*t/this._image.width/this.resolution,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(t){this.updateText(!0);const e=Ur(this.scale.y)||1;this.scale.y=e*t/this._image.height/this.resolution,this._height=t}get style(){return this._style}set style(t){this._style!==t&&(t=t||{},t instanceof Ts?(this.ownsStyle=!1,this._style=t):t instanceof Ar?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=Ts.from(t)):(this.ownsStyle=!0,this._style=new Ts(t)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(t){t=String(t===""||t===null||t===void 0?" ":t),t=this.sanitiseText(t),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}sanitiseText(t){return t.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};let bl=Wn;bl.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0};bl.defaultMaxWidth=2024;bl.defaultMaxHeight=2024;bl.defaultAutoResolution=!0;class SC{constructor(e){Md(this,"pixi");this.pixi=new Cd({background:"black",width:e.clientWidth,height:e.clientHeight-4}),e.appendChild(this.pixi.view)}}class AC extends Za.Component{render(){return Yn.jsxs("section",{children:[Yn.jsx("header",{children:" "}),Yn.jsx("main",{}),Yn.jsx("footer",{})]})}}new SC(document.getElementById("universe"));Lu.createRoot(document.getElementById("ui")).render(Yn.jsx(T0.StrictMode,{children:Yn.jsx(AC,{})}));
